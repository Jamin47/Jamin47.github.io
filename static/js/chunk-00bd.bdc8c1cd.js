(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-00bd"],{"+dKU":function(e,t,i){"use strict";var n=i("6OT7");i.n(n).a},"/EnG":function(e,t,i){"use strict";i.r(t);var n=i("EUoD"),a=i("iNRi"),s=i("Q2EI"),o=i("S2Rr"),r=i("XVnh"),c=i("YelX"),l={name:"ElectronicFence",components:{tagging:n.default,region:a.default,lines:s.default,administration:o.default,notPerm:r.a},mixins:[c.default],data:function(){return{activeName:"tagging",isPermission:!1,mapState:!1}},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.isPermissionShow("labelList")?(this.activeName="tagging",this.isPermission=!0):this.isPermissionShow("regionList")?(this.activeName="region",this.isPermission=!0):this.isPermissionShow("routeList")?(this.activeName="lines",this.isPermission=!0):this.isPermissionShow("adminList")?(this.activeName="administration",this.isPermission=!0):this.isPermission=!1},mapSwitchFn:function(e){this.mapState=e}}},d=(i("zH98"),i("ZrdR")),u=Object(d.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrap",class:{"page-wrap-padding":!e.mapState}},[e.isPermission?i("div",{staticClass:"main"},[i("el-tabs",{staticClass:"init-tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isPermissionShow("labelList")?i("el-tab-pane",{attrs:{name:"tagging"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_bzgl"}),e._v(" "+e._s(e.$t("electronicFence.label_management")))])]):e._e(),e._v(" "),e.isPermissionShow("regionList")?i("el-tab-pane",{attrs:{name:"region"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_qygl"}),e._v(" "+e._s(e.$t("electronicFence.area_management")))])]):e._e(),e._v(" "),e.isPermissionShow("routeList")?i("el-tab-pane",{attrs:{name:"lines"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_xlgl"}),e._v(" "+e._s(e.$t("electronicFence.line_management")))])]):e._e(),e._v(" "),e.isPermissionShow("adminList")?i("el-tab-pane",{attrs:{name:"administration"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_xzqy"}),e._v(" "+e._s(e.$t("electronicFence.administration_management")))])]):e._e()],1),e._v(" "),i("div",["tagging"===e.activeName?i("tagging",{on:{mapSwitchFn:e.mapSwitchFn}}):e._e(),e._v(" "),"region"===e.activeName?i("region",{on:{mapSwitchFn:e.mapSwitchFn}}):e._e(),e._v(" "),"lines"===e.activeName?i("lines",{on:{mapSwitchFn:e.mapSwitchFn}}):e._e(),e._v(" "),"administration"===e.activeName?i("administration",{on:{mapSwitchFn:e.mapSwitchFn}}):e._e()],1)],1):e._e(),e._v(" "),e.isPermission||e.$store.state.app.permsDataLoading?e._e():i("notPerm")],1)},[],!1,null,"42ab989d",null);u.options.__file="electronicFence.vue";t.default=u.exports},"/aYH":function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_L-1.73edc78.png"},"1EGo":function(e,t,i){e.exports=i.p+"static/img/vehicle_icon_biaozhu_c.5dbc68e.png"},"1V5b":function(e,t,i){"use strict";var n=i("gjL5");i.n(n).a},"2S/W":function(e,t,i){"use strict";var n=i("OFem");i.n(n).a},"59wn":function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_hong.c2605f2.png"},"5caA":function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_l.cce8e63.png"},"6OT7":function(e,t,i){},ETiy:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_lan.9aecd4d.png"},EUoD:function(e,t,i){"use strict";i.r(t);var n=i("omC7"),a=i.n(n),s=i("bS4n"),o=i.n(s),r=i("8t5x"),c=i("ABCu"),l=i("kDn8"),d=i("AlM9"),u=i("EXUM"),p=i("YelX"),m=i("1EGo"),h=i.n(m),f=i("RCyq"),g=i.n(f),y=i("LpoB"),_=i.n(y),v=i("kvP9"),b=i.n(v),$=i("GNt7"),F=i.n($),T=i("59wn"),x=i.n(T),C=i("/aYH"),w=i.n(C),k=i("MrZo"),N=i.n(k),I=i("5caA"),S=i.n(I),D=i("ETiy"),M=i.n(D),O=i("d6xc"),z=i.n(O),A=i("ojTi"),P=i.n(A),E={name:"VehicleAdminister",components:{treeView:c.a,dialogDesign:l.a,TableView:d.a,bdMap:u.default},mixins:[p.default],data:function(){return{icons:[{icon:h.a,index:0},{icon:_.a,index:1},{icon:F.a,index:2},{icon:w.a,index:3},{icon:S.a,index:4},{icon:z.a,index:5},{icon:g.a,index:6},{icon:b.a,index:7},{icon:x.a,index:8},{icon:N.a,index:9},{icon:M.a,index:10},{icon:P.a,index:11}],widthNum:0,show:!1,viewLeft:!1,company:[],dialogDisplay:!1,alias:{pageSize:"pageSize",pageNum:"pageNum"},fieldMap:{},activeMenu:{typeId:null,name:""},typeTitle:this.$t("electronicFence.label_name"),typeId:null,isTree:!0,labelId:null,filterText:"",resTreeData:null,resetData:{parentId:"parentId",value:"typeId",label:"typeName",children:"opEfTypeNodes"},resetMenu:[],resetMenus:[],treeData:{extendData:{},checkOriginName:"",treeQuery:{type:"get",action:"/ef/type/treeList/0",list:null},defaultProps:{children:"opEfTypeNodes",label:"typeName",isLeaf:"lezy",disabled:"disabled"},nodeKey:"typeId",currentNodeKey:1,defaultExpandAll:!0,expandClickNode:!1,indent:16,screenFn:{bindFn:function(e,t){return!e||-1!==t.typeName.indexOf(e)}},draggable:{isDraggable:!1,allowDrap:function(e,t,i){return!0},allowDrop:function(e,t,i){return e.data.type===t.data.type?"inner"!==i:(1!==e.data.type||0!==t.data.type)&&(0!==e.data.type||1!==t.data.type)}}},params:{},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:this.$t("electronicFence.sequence_number")},{title:this.$t("electronicFence.icon"),type:"slot",name:"icon"},{title:this.$t("electronicFence.label_name"),type:"text",minWidth:"130",key:"labelName"},{title:this.$t("electronicFence.subordinate_classification"),key:"typeName",minWidth:"130",type:"text"},{title:this.$t("electronicFence.region"),key:"region",minWidth:"130",type:"text"},{title:this.$t("electronicFence.belong_company"),key:"companyName",minWidth:"150",type:"text"},{title:this.$t("electronicFence.create_time"),key:"createTime",minWidth:"220",type:"text"},{title:this.$t("operation.operation"),key:"operate",type:"operate",fixed:"right",width:"150",buttons:[],mode:"default",dropdownType:"primary"}],buttonControls:[],searchControls:[{type:"input",key:"labelName",placeholder:this.$t("electronicFence.label_name"),width:"200px",size:"small"},{type:"input",key:"region",placeholder:this.$t("electronicFence.region"),width:"200px",size:"small"},{type:"select",key:"companyId",placeholder:this.$t("electronicFence.belong_company"),width:"200px",size:"small",filterable:!0,clearable:!0,options:[{name:this.$t("electronicFence.none"),value:0}]}],searchMode:"immediate",footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},isTaggingExist:!1}},computed:o()({},Object(r.b)(["elNorms"]),{categoryManagementPermission:function(){return this.isPermissionShow("typeCreate")||this.isPermissionShow("typeUpdate")||this.isPermissionShow("typeDelete")}}),watch:{filterText:function(e){this.$refs.tree.$refs.sonTree.filter(e)},show:function(e){this.$emit("mapSwitchFn",e)}},created:function(){this.getCompanyDataFn()},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("labelCreate")&&this.tableOptions.buttonControls.push({text:this.$t("electronicFence.add_label"),size:"mini",round:!1,icon:"el-icon-plus",funcName:"addVehicle"}),this.isPermissionShow("labelExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),size:"mini",type:"null",round:!1,icon:"el-icon-download",funcName:"exportRecord"}),this.tableOptions.footerButtons=[],this.isPermissionShow("labelUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("electronicFence.move"),type:"",size:"mini",icon:"el-icon-remove-outline",round:!1,funcName:"move"}),this.isPermissionShow("labelDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operateCommon.delete"),type:"danger",size:"mini",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("labelList")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.details"),size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_chakan",funcName:"details"}),e>-1&&this.isPermissionShow("labelUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_bj",funcName:"edit"})},addVehicle:function(){this.show=!0,this.$refs.bdmap.addVehicle()},edit:function(e){this.show=!0,this.$refs.bdmap.edit(e)},details:function(e){this.show=!0,this.$refs.bdmap.details(e)},diaClose:function(e){var t=this;this.treeData.currentNodeKey=this.activeMenu.typeId,e&&(this.isTree=!1,this.$nextTick(function(){t.isTree=!0})),this.dialogDisplay=!1},dialogCallback:function(e,t,i){this[e.handlerCallback.funcName].call(function(){},e,t,i)},addMenu:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"click"===e.type&&(e={}),-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(a()(this.resetMenus)).splice(-1,1),this.$set(this.resetMenu[0],"value",0)),this.dialogData={staticData:{parentId:"mainNew"===i?null:e.typeId?e.typeId:0},isClickClose:!1,isDialogDisplay:!0,title:this.$t("electronicFence.add_Category"),data:{},defaultData:{fenceType:0},mainWidth:"500",titleWidth:"100",submitAction:"/ef/type/create",btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_superior_category"),trigger:"change"}]},{title:this.$t("electronicFence.category_name"),type:"input",offsetWidth:"320",key:"typeName",rules:[{required:!0,message:this.$t("electronicFence.enter_category_name"),trigger:"blur"}]}],message:{message:this.$t("electronicFence.category_added_successfully"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}],confirmSubmitFn:function(e,i){var n=!1;t.dialogData.submitAction="/ef/type/create",function t(i){for(var a=0;a<i.length;a++){if(null===i[a].typeId&&0===e.parentId||i[a].typeId===e.parentId){n=i[a].opEfTypeNodes.some(function(t){return t.typeName===e.typeName});break}i[a].opEfTypeNodes&&i[a].opEfTypeNodes.length>0&&t(i[a].opEfTypeNodes)}}(t.resTreeData),n&&(t.dialogData.submitAction=!1,t.$message.warning(t.$t("electronicFence.category_name_exists")))}},this.dialogDisplay=!0},editMenu:function(e){-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(a()(this.resetMenus)).splice(-1,1),this.$set(this.resetMenu[0],"value",0)),delete e.list,this.dialogData={isClickClose:!1,staticData:e,isDialogDisplay:!0,title:this.$t("electronicFence.edit_categories"),data:{},defaultData:{fenceType:0},mainWidth:"500",titleWidth:"100",submitAction:"/ef/type/update/"+e.typeId,btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_superior_category"),trigger:"change"}]},{title:this.$t("electronicFence.category_name"),type:"input",offsetWidth:"320",key:"typeName",rules:[{required:!0,message:this.$t("electronicFence.enter_category_name"),trigger:"blur"}]}],message:{message:this.$t("electronicFence.category_edit_successful"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},handleCommand:function(e){this[e.funcName].call(function(){},e.data,e.node,e.funcName)},removeTree:function(e){var t=this;this.$confirm(this.$t("electronicFence.delete_text_tip"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){t.$http.get("/ef/type/delete/"+e.typeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$message({type:"success",message:t.$t("electronicFence.delete_successfully")}),t.isTree=!1,t.$nextTick(function(){t.isTree=!0}))})}).catch(function(){t.$message({type:"info",message:t.$t("electronicFence.deleted_canceled")})})},getTreeData:function(e){var t=JSON.parse(a()(e));t.unshift({typeName:this.$t("electronicFence.none"),typeId:-1,parentId:0}),this.resTreeData=e,this.resetDataFn(t,!1),this.$refs.table.initRequestTableData()},nodeClick:function(e,t){e.children&&e.children.length||(this.activeMenu={typeId:e.typeId,name:e.typeName},this.parentId=e.parentId),this.typeId=e.typeId,this.$refs.table.initRequestTableData()},getCompanyDataFn:function(){var e=this;this.$http.get("/company/treeList/electronicFence").then(function(t){t.code===e.$config.API_STATUS.OK&&(e.company=t.data)}),this.$http.post("/company/electronicFence/list/all").then(function(t){if(t.code===e.$config.API_STATUS.OK){var i=t.data.list.map(function(e){return{label:e.name,name:e.name,value:e.companyId}});e.tableOptions.searchControls[2].options=i}})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={typeId:this.typeId,region:e.region,labelName:e.labelName,companyId:e.companyId};this.$http.post("/label/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},move:function(e){var t=[];e.forEach(function(e,i){t[i]=e.labelId}),-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(a()(this.resetMenus)).splice(-1,1)),this.dialogData={isClickClose:!1,staticData:"",isDialogDisplay:!0,title:this.$t("electronicFence.adjust_classification"),data:{},defaultData:{ids:t.join(",")},methods:"deleteApi",mainWidth:"500",titleWidth:"100",submitAction:"/label/update",btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"typeId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_category"),trigger:"change"}]}],message:{message:this.$t("electronicFence.adjustment_succeeded"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.labelId}),t.$http.deleteApi("/label/delete",{ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},resetDataFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.resetData){var n=[];if(e.forEach(function(e){var i=t.initJSON(t.resetData,e);n.push(i)}),!0===i)return n;this.resetMenus=n}},initJSON:function(e,t){var i={};for(var n in e)if("children"===n&&t[e[n]]&&t[e[n]].length>0){var a=this.resetDataFn(t[e[n]],!0);i[n]=a}else"children"!==n&&(i[n]=t[e[n]]);return i},disabledData:function(e){this.resetMenus.forEach(function(t){0===e&&t.children&&t.children.length>0&&(t.disabled=!0),t.children&&t.children.length>0&&t.children.forEach(function(t){1===e&&(t.disabled=!1)})})},nodeDragEnd:function(e,t,i){var n=this;this.$http.post("/sys/menu/sort",{motorcadeId:e.data.motorcadeId,targetId:t.data.motorcadeId,moveType:i}).then(function(e){e.code,n.$config.API_STATUS,n.isTree=!1,n.$nextTick(function(){n.isTree=!0})}).catch(function(){n.isTree=!1,n.$nextTick(function(){n.isTree=!0})})},cascaderChange:function(e,t,i){null===t&&(t=0),this.$refs._dialog.dialogData.defaultData.parentId=-1===t?0:t,this.$refs._dialog.dialogData.defaultData.fenceType=0,"0"===t&&(this.$refs._dialog.dialogData.defaultData={type:0})},exportRecord:function(){var e=this;this.$confirm(this.$t("operateCommon.confirm_export_record"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,i,n){if(e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(i){t.key===i&&"operate"!==t.key&&(e.fieldMap[i]=t.title)})}),"confirm"===t){var a=e.$refs.table._data.searchParams,s=a.labelName,o=a.region,r=a.companyId,c={fieldMap:e.fieldMap,labelName:s,region:o,companyId:r,typeId:e.typeId};e.$http.download("/label/export?isToken=true",c),n()}else n()}}).catch(function(){})},verificationLabelName:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.isTaggingExist="edit"===n?(this.tableOptions.data||[]).some(function(n){return e===n.typeId&&t!==n.labelId&&i===n.labelName}):(this.tableOptions.data||[]).some(function(t){return e===t.typeId&&i===t.labelName})}}},L=(i("1V5b"),i("ZrdR")),q=Object(L.a)(E,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"page-body"},[i("div",{staticClass:"con-left"},[i("div",{staticClass:"input-query"},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("electronicFence.search_category_name"),"prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),e.isPermissionShow("typeCreate")?i("el-button",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:e.elNorms.size,circle:e.elNorms.circle,round:e.elNorms.round},on:{click:function(t){e.addMenu(t,"mainNew")}}},[e._v(e._s(e.$t("electronicFence.new_category")))]):e._e()],1),e._v(" "),i("div",{staticClass:"body-tree init-tree"},[e.isTree?i("tree-view",{ref:"tree",attrs:{"tree-data":e.treeData},on:{treeDataFn:e.getTreeData,"node-click":e.nodeClick,"node-drag-end":e.nodeDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"left-title text-ellipsis",style:t.data.data.typeId===e.activeMenu.typeId?"color: var(--main-primary);":""},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_xiaowenjian"}),e._v("\n              "+e._s(t.data.data.typeName)+"\n            ")]),e._v(" "),i("span",{staticClass:"right-edit"},[i("span",[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[e.categoryManagementPermission?i("i",{staticClass:"el-icon-more"}):e._e()]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isPermissionShow("typeCreate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"addMenu"}}},[e._v(e._s(e.$t("electronicFence.add_subcategory")))]):e._e(),e._v(" "),null!==t.data.data.typeId&&e.isPermissionShow("typeUpdate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"editMenu"}}},[e._v(e._s(e.$t("electronicFence.edit_categories")))]):e._e(),e._v(" "),null!==t.data.data.typeId&&e.isPermissionShow("typeDelete")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"removeTree"}}},[e._v(e._s(e.$t("electronicFence.delete_category")))]):e._e()],1)],1)],1)])]}}])}):e._e()],1)]),e._v(" "),i("div",{staticClass:"con-right"},[i("transition",{attrs:{name:"opacity"}},[i("div",{staticClass:"opacity_table"},[i("table-view",{ref:"table",attrs:{center:"","id-key":"labelId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-border":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"}),e._v(" "),i("el-table-column",{attrs:{slot:"icon",label:e.$t("electronicFence.icon"),align:"center",width:"80"},slot:"icon",scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.icon||0===t.row.icon?i("img",{attrs:{src:e.icons[t.row.icon].icon,alt:""}}):e._e()]}}])})],1)],1)])],1)]),e._v(" "),i("transition",{attrs:{name:"el-zoom-in-bottom"}},[i("bd-map",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"bdmap",staticClass:"mapShow left-control control-view",class:{leftActive:e.viewLeft},attrs:{"reset-menus":e.resetMenus,company:e.company,icons:e.icons,"view-left":e.viewLeft,"type-title":e.typeTitle,"is-tagging-exist":e.isTaggingExist,"is-show-form":!0},on:{verificationLabelName:e.verificationLabelName}})],1),e._v(" "),e.dialogDisplay?i("dialog-design",{ref:"_dialog",attrs:{size:"mini",color:"warning","dialog-data":e.dialogData},on:{diaClose:e.diaClose,handlerCallback:e.dialogCallback}}):e._e()],1)},[],!1,null,"5198a07f",null);q.options.__file="tagging.vue";t.default=q.exports},LpoB:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_f.e84ec01.png"},MrZo:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_lv.b165b1c.png"},OFem:function(e,t,i){},Q2EI:function(e,t,i){"use strict";i.r(t);var n=i("unDg"),a=i.n(n),s=i("omC7"),o=i.n(s),r=i("bS4n"),c=i.n(r),l=i("ABCu"),d=i("kDn8"),u=i("AlM9"),p=i("EXUM"),m=i("YelX"),h=i("8t5x"),f={name:"VehicleAdminister",components:{treeView:l.a,dialogDesign:d.a,TableView:u.a,bdMap:p.default},mixins:[m.default],data:function(){return{regionId:null,ruleForm:{paramType:2,enterType:2,enterReceives:[],outType:2,outReceives:[],speedLimit:1,maxSpeed:null,nightMaxSpeed:null,duration:null,effectTime:1,startTime:null,endTime:null,communication:0,collectCnss:1},rules:{enterType:[{required:!0,message:this.$t("electronicFence.tip_1"),trigger:"change"}],enterReceives:[{required:!0,message:this.$t("electronicFence.tip_2"),trigger:"change"}],outType:[{required:!0,message:this.$t("electronicFence.tip_3"),trigger:"change"}],outReceives:[{required:!0,message:this.$t("electronicFence.tip_4"),trigger:"change"}],speedLimit:[{required:!0,message:this.$t("electronicFence.tip_5"),trigger:"change"}],maxSpeed:[{required:!0,message:this.$t("electronicFence.tip_6"),trigger:"blur"}],nightMaxSpeed:[{required:!0,message:this.$t("electronicFence.tip_6"),trigger:"blur"}],duration:[{required:!0,message:this.$t("electronicFence.tip_7"),trigger:"blur"}],effectTime:[{required:!0,message:this.$t("electronicFence.tip_8"),trigger:"change"}],startTime:[{required:!0,message:this.$t("electronicFence.select_start_time"),trigger:"change"}],endTime:[{required:!0,message:this.$t("electronicFence.select_end_time"),trigger:"change"}],communication:[{required:!0,message:this.$t("electronicFence.tip_8"),trigger:"change"}],collectCnss:[{required:!0,message:this.$t("electronicFence.tip_8"),trigger:"change"}]},props:{motorcade:"motorcade",parentId:"parentId",status:"status",children:"children",label:"label",id:"id",count:"count"},routeId:"",userMenus:[],flag:null,checkedKeys:[],tableplay:!1,drawerplay:!1,direction:"rtl",drawerTitle:"",drawerWidth:"700px",user:{username:"",account:""},widthNum:0,show:!1,viewLeft:!1,company:[],dialogDisplay:!1,alias:{pageSize:"pageSize",pageNum:"pageNum"},typeTitle:null,fieldMap:{},activeMenu:{typeId:null,name:""},typeId:null,isTree:!0,filterText:"",resTreeData:null,resetData:{parentId:"parentId",value:"typeId",label:"typeName",children:"opEfTypeNodes"},resetMenus:[],treeData:{extendData:{},checkOriginName:"",treeQuery:{type:"get",action:"/ef/type/treeList/2",list:null},defaultProps:{children:"opEfTypeNodes",label:"typeName",isLeaf:"lezy",disabled:"disabled"},nodeKey:"typeId",currentNodeKey:1,defaultExpandAll:!0,expandClickNode:!1,indent:16,screenFn:{bindFn:function(e,t){return!e||-1!==t.typeName.indexOf(e)}},draggable:{isDraggable:!1,allowDrap:function(e,t,i){return!0},allowDrop:function(e,t,i){return e.data.type===t.data.type?"inner"!==i:(1!==e.data.type||0!==t.data.type)&&(0!==e.data.type||1!==t.data.type)}}},params:{},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:this.$t("electronicFence.sequence_number")},{title:this.$t("electronicFence.line_name"),type:"text",minWidth:"130",key:"routeName"},{title:this.$t("electronicFence.subordinate_classification"),key:"typeName",minWidth:"130",type:"text"},{title:this.$t("electronicFence.belong_company"),key:"companyName",minWidth:"150",type:"text"},{title:this.$t("electronicFence.type"),key:"entryType",minWidth:"130",type:"tagText",tags:[{text:this.$t("electronicFence.disable"),value:1},{text:this.$t("electronicFence.forbidden"),value:2,option:{type:"danger"}}]},{title:this.$t("electronicFence.create_time"),key:"createTime",minWidth:"220",type:"text"},{title:this.$t("operateCommon.operation"),key:"operate",type:"operate",fixed:"right",width:"250",buttons:[],mode:"default",dropdownType:"primary"}],buttonControls:[],searchControls:[{type:"input",key:"routeName",placeholder:this.$t("electronicFence.line_name"),width:"200px"},{type:"select",key:"companyId",placeholder:this.$t("electronicFence.belong_company"),width:"200px",filterable:!0,clearable:!0,options:[{name:this.$t("electronicFence.none"),value:0}]},{type:"select",key:"entryType",placeholder:this.$t("electronicFence.type"),width:"200px",filterable:!0,clearable:!0,options:[{name:this.$t("electronicFence.disable"),value:1},{name:this.$t("electronicFence.forbidden"),value:2}]}],searchMode:"immediate",footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:c()({},Object(h.b)(["elNorms"]),{categoryManagementPermission:function(){return this.isPermissionShow("typeCreate")||this.isPermissionShow("typeUpdate")||this.isPermissionShow("typeDelete")}}),watch:{filterText:function(e){this.$refs.tree.$refs.sonTree.filter(e)},show:function(e){this.$emit("mapSwitchFn",e)}},created:function(){this.getCompanyDataFn()},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("routeCreate")&&this.tableOptions.buttonControls.push({text:this.$t("electronicFence.add_line"),round:!1,icon:"el-icon-plus",funcName:"addVehicle"}),this.isPermissionShow("routeExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-download",funcName:"exportRecord"}),this.tableOptions.footerButtons=[],this.isPermissionShow("routeUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("electronicFence.move"),type:"",size:"mini",icon:"el-icon-remove-outline",round:!1,funcName:"move"}),this.isPermissionShow("routeDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operateCommon.delete"),type:"danger",size:"mini",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("routeList")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.details"),type:"text",icon:"iconfont Jamin_vehicle_ico_xq",funcName:"details"}),e>-1&&this.isPermissionShow("routeUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),type:"text",icon:"iconfont Jamin_vehicle_icon_bj",funcName:"edit"}),e>-1&&this.isPermissionShow("routeUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.fence_arameters"),type:"text",icon:"iconfont Jamin_vehicle_icon_wlcs",funcName:"enclosure"}),e>-1&&this.isPermissionShow("routeUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.zone_down"),type:"text",icon:"iconfont Jamin_vehicle_icon_qyxf",funcName:"vehicleAuthorization"})},enclosure:function(e){var t=this;this.regionId=e.routeId,this.tableplay=!0,this.ruleForm={paramType:2,enterType:2,enterReceives:[],outType:2,outReceives:[],speedLimit:1,maxSpeed:null,nightMaxSpeed:null,duration:null,effectTime:1,startTime:null,endTime:null,communication:0,collectCnss:1},this.$nextTick(function(){t.$refs.ruleForm.resetFields()}),this.drawerTitle=this.$t("electronicFence.fence_arameters"),this.drawerWidth="700px",this.user.username=e.typeName,this.user.account=this.$t("electronicFence.line_management"),this.paramData(e.routeId)},paramData:function(e){var t=this;this.$http.get("/ef/param/2/"+e).then(function(e){e.code===t.$config.API_STATUS.OK&&e.data&&(t.ruleForm=e.data)})},tablesFn:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.ruleForm.regionId=e.regionId,e.$http.post("/ef/param/create",e.ruleForm).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableplay=!1,e.$refs.table.initRequestTableData(),e.$message({message:t.message,type:"success"}))})})},endTime:function(e){this.ruleForm.startTime?new Date(e).getTime()<=new Date(this.ruleForm.startTime).getTime()&&(this.$message.error(this.$t("electronicFence.time_tip_1")),this.ruleForm.endTime=null):(this.$message.error(this.$t("electronicFence.select_start_time")),this.ruleForm.endTimet=null)},click:function(e,t){this.$refs.trees.setCurrentKey(e.treeId),this.$refs._user_tree.setCurrentKey(e.treeId)},switchs:function(e,t){this.$refs.trees.setChecked(t,!1,!1),this.CheckedKeyFn()},treeList:function(e){var t=this;this.flag=!1,this.checkedKeys=[],this.$http.get("/route/list/vehicle?routeId="+e).then(function(e){if(e.code===t.$config.API_STATUS.OK){var i=[{motorcades:e.data.motorcades,vehicles:e.data.vehicles}];t.treeArr(i),t.resetMenus=i[0].children}t.userTreeList(t.routeId)})},userTreeList:function(e){var t=this;this.flag=!0,this.checkedKeys=[],this.$http.get("/route/list/vehicle/authorized?routeId="+e).then(function(e){if(e.code===t.$config.API_STATUS.OK){var i=[{motorcades:e.data.motorcades,vehicles:e.data.vehicles}];t.treeArr(i),t.userMenus=i[0].children,t.$refs.trees.setCheckedKeys(t.checkedKeys)}})},treeArr:function(e){for(var t=this,i=function(i){if(e[i].motorcades){var n=[];e[i].vehicles&&e[i].vehicles.forEach(function(a){t.flag&&t.checkedKeys.push("v"+a.vehicleId),n.push({motorcade:!1,parentId:e[i].vehiclePid,status:a.status,label:a.licenseNum,id:a.vehicleId,treeId:"v"+a.vehicleId})}),e[i].motorcades.forEach(function(e){t.flag&&!e.motorcades.length&&!e.vehicles.length&&t.checkedKeys.push("m"+e.motorcadeId),n.push({motorcade:!0,parentId:e.parentId,status:e.status,motorcades:e.motorcades,vehicles:e.vehicles,label:e.motorcadeName,id:e.motorcadeId,count:e.count,vehiclePid:e.motorcadeId,treeId:"m"+e.motorcadeId})}),e[i].children=JSON.parse(o()(n)),t.treeArr(e[i].children),delete e[i].motorcades,delete e[i].vehicles}},n=0;n<e.length;n++)i(n)},CheckedKeyFn:function(e,t){this.userMenus=[],this.createCheckedTreeFn(this.$refs.trees._data.root.childNodes)},createCheckedTreeFn:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.checked){if(!i.data.motorcade){var n=this.$refs.trees.getNode("m"+i.data.parentId),a=this.forNodeFilterFn(n);a&&this.userMenus.push(a);break}this.userMenus.push(i.data)}else i.childNodes&&i.childNodes.length&&this.createCheckedTreeFn(i.childNodes)}},forNodeFilterFn:function(e){var t=this,i=[],n=null;return e.childNodes.forEach(function(e){if(e.checked)i.push(e.data);else if(e.childNodes&&e.childNodes.length){var n=t.forNodeFilterFn(e);n&&i.push(n)}}),i.length&&((n=JSON.parse(o()(e.data))).children=i),n},vehicleAuthorization:function(e){e.username&&(this.user.username=e.username),e.account&&(this.user.account=e.account),this.routeId=e.routeId,this.treeList(this.routeId),this.drawerWidth="700px",this.drawerTitle=this.$t("electronicFence.zone_down"),this.drawerplay=!0},submitFn:function(){var e=this,t=this.treeCountFn(this.$refs._user_tree._data.root.childNodes,!0);this.$http.post("/route/vehicle/"+this.routeId,t).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$message.success(e.$t("electronicFence.authorization_succeeded")),e.drawerplay=!1,e.$refs.table.initRequestTableData())})},treeCountFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],s=[];return e.forEach(function(e){if(e.data.motorcade){if(n.push({parentId:i?0:e.data.parentId,motorcadeId:e.data.id}),e.childNodes&&e.childNodes.length){var o=t.treeCountFn(e.childNodes);n=[].concat(a()(n),a()(o.authorizedMotorcades)),s=[].concat(a()(s),a()(o.vehicles))}}else s.push({parentId:e.data.parentId,vehicleId:e.data.id})}),{authorizedMotorcades:n,vehicles:s}},addVehicle:function(){this.typeTitle=this.$t("electronicFence.line"),this.show=!0,this.$refs.bdmap.addRoute()},iconMap:function(e){},diaClose:function(e){var t=this;this.treeData.currentNodeKey=this.activeMenu.typeId,e&&(this.isTree=!1,this.$nextTick(function(){t.isTree=!0})),this.dialogDisplay=!1},details:function(e){var t=this;this.$http.get("/route/"+e.routeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.typeTitle=t.$t("electronicFence.line"),t.show=!0,t.$refs.bdmap.detailsRoute(e.data))})},edit:function(e){var t=this;this.$http.get("/route/"+e.routeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.typeTitle=t.$t("electronicFence.line"),t.show=!0,t.$refs.bdmap.editRoute(e.data))})},dialogCallback:function(e,t,i){this[e.handlerCallback.funcName].call(function(){},e,t,i)},addMenu:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"click"===e.type&&(e={}),-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(o()(this.resetMenus)).splice(-1,1),this.$set(this.resetMenu[0],"value",0)),this.dialogData={staticData:{parentId:"mainNew"===i?null:e.typeId?e.typeId:0},isClickClose:!1,isDialogDisplay:!0,title:this.$t("electronicFence.add_Category"),data:{},defaultData:{fenceType:2},mainWidth:"500",titleWidth:"100",submitAction:"/ef/type/create",btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_superior_category"),trigger:"change"}]},{title:this.$t("electronicFence.category_name"),type:"input",offsetWidth:"320",key:"typeName",rules:[{required:!0,message:this.$t("electronicFence.enter_category_name"),trigger:"blur"}]}],message:{message:this.$t("electronicFence.category_edit_successful"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}],confirmSubmitFn:function(e,i){var n=!1;t.dialogData.submitAction="/ef/type/create",function t(i){for(var a=0;a<i.length;a++){if(null===i[a].typeId&&0===e.parentId||i[a].typeId===e.parentId){n=i[a].opEfTypeNodes.some(function(t){return t.typeName===e.typeName});break}i[a].opEfTypeNodes&&i[a].opEfTypeNodes.length>0&&t(i[a].opEfTypeNodes)}}(t.resTreeData),n&&(t.dialogData.submitAction=!1,t.$message.warning(t.$t("electronicFence.category_name_exists")))}},this.dialogDisplay=!0},editMenu:function(e){-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(o()(this.resetMenus)).splice(-1,1),this.$set(this.resetMenu[0],"value",0)),delete e.list,this.dialogData={isClickClose:!1,staticData:e,isDialogDisplay:!0,title:this.$t("electronicFence.edit_categories"),data:{},defaultData:{fenceType:2},mainWidth:"500",titleWidth:"100",submitAction:"/ef/type/update/"+e.typeId,btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_superior_category"),trigger:"change"}]},{title:this.$t("electronicFence.category_name"),type:"input",offsetWidth:"320",key:"typeName",rules:[{required:!0,message:this.$t("electronicFence.enter_category_name"),trigger:"blur"}]}],message:{message:this.$t("electronicFence.category_edit_successful"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},handleCommand:function(e){this[e.funcName].call(function(){},e.data,e.node,e.funcName)},removeTree:function(e){var t=this;this.$confirm(this.$t("electronicFence.delete_text_tip"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){t.$http.get("/ef/type/delete/"+e.typeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$message({type:"success",message:t.$t("electronicFence.delete_successfully")}),t.isTree=!1,t.$nextTick(function(){t.isTree=!0}))})}).catch(function(){t.$message({type:"info",message:t.$t("electronicFence.deleted_canceled")})})},getTreeData:function(e){var t=JSON.parse(o()(e));t.unshift({typeName:this.$t("electronicFence.none"),typeId:-1,parentId:0}),this.resTreeData=e,this.resetDataFn(t,!1),this.$refs.table.initRequestTableData()},nodeClick:function(e,t){e.children&&e.children.length||(this.activeMenu={typeId:e.typeId,name:e.typeName},this.parentId=e.parentId),this.typeId=e.typeId,this.$refs.table.initRequestTableData()},getCompanyDataFn:function(){var e=this;this.$http.get("/company/treeList/electronicFence").then(function(t){t.code===e.$config.API_STATUS.OK&&(e.company=t.data)}),this.$http.post("/company/electronicFence/list/all").then(function(t){if(t.code===e.$config.API_STATUS.OK){var i=t.data.list.map(function(e){return{label:e.name,name:e.name,value:e.companyId}});e.tableOptions.searchControls[1].options=i}})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={typeId:this.typeId,routeName:e.routeName,companyId:e.companyId,entryType:e.entryType};this.$http.post("/route/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},move:function(e){var t=[];e.forEach(function(e,i){t[i]=e.routeId}),-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(o()(this.resetMenus)).splice(-1,1)),this.dialogData={isClickClose:!1,staticData:"",isDialogDisplay:!0,title:this.$t("electronicFence.adjust_classification"),data:{},defaultData:{ids:t.join(",")},methods:"deleteApi",mainWidth:"500",titleWidth:"100",submitAction:"/route/update",btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"typeId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_category"),trigger:"change"}]}],message:{message:this.$t("electronicFence.adjustment_succeeded"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.routeId}),t.$http.deleteApi("/route/delete",{ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},resetDataFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.resetData){var n=[];if(e.forEach(function(e){var i=t.initJSON(t.resetData,e);n.push(i)}),!0===i)return n;this.resetMenus=n}},initJSON:function(e,t){var i={};for(var n in e)if("children"===n&&t[e[n]]&&t[e[n]].length>0){var a=this.resetDataFn(t[e[n]],!0);i[n]=a}else"children"!==n&&(i[n]=t[e[n]]);return i},disabledData:function(e){this.resetMenus.forEach(function(t){0===e&&t.children&&t.children.length>0&&(t.disabled=!0),t.children&&t.children.length>0&&t.children.forEach(function(t){1===e&&(t.disabled=!1)})})},nodeDragEnd:function(e,t,i){var n=this;this.$http.post("/sys/menu/sort",{motorcadeId:e.data.motorcadeId,targetId:t.data.motorcadeId,moveType:i}).then(function(e){e.code,n.$config.API_STATUS,n.isTree=!1,n.$nextTick(function(){n.isTree=!0})}).catch(function(){n.isTree=!1,n.$nextTick(function(){n.isTree=!0})})},cascaderChange:function(e,t,i){null===t&&(t=0),this.$refs._dialog.dialogData.defaultData.parentId=-1===t?0:t,this.$refs._dialog.dialogData.defaultData.fenceType=2,"0"===t&&(this.$refs._dialog.dialogData.defaultData={type:0})},exportRecord:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,i,n){if(e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(i){t.key===i&&"operate"!==t.key&&(e.fieldMap[i]=t.title)})}),"confirm"===t){var a=e.$refs.table._data.searchParams,s=a.regionName,o=a.regionType,r=a.companyId,c=a.entryType,l={fieldMap:e.fieldMap,regionName:s,regionType:o,companyId:r,entryType:c,typeId:e.typeId};e.$http.download("/route/export?isToken=true",l),n()}else n()}}).catch(function(){})}}},g=(i("2S/W"),i("ZrdR")),y=Object(g.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"page-body"},[i("div",{staticClass:"con-left"},[i("div",{staticClass:"input-query"},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("electronicFence.search_category_name"),"prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),e.isPermissionShow("typeCreate")?i("el-button",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:e.elNorms.size,circle:e.elNorms.circle,round:e.elNorms.round},on:{click:function(t){e.addMenu(t,"mainNew")}}},[e._v(e._s(e.$t("electronicFence.new_category")))]):e._e()],1),e._v(" "),i("div",{staticClass:"body-tree init-tree"},[e.isTree?i("tree-view",{ref:"tree",attrs:{"tree-data":e.treeData},on:{treeDataFn:e.getTreeData,"node-click":e.nodeClick,"node-drag-end":e.nodeDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"left-title text-ellipsis",style:t.data.data.typeId===e.activeMenu.typeId?"color: var(--main-primary);":""},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_xiaowenjian"}),e._v("\n              "+e._s(t.data.data.typeName)+"\n            ")]),e._v(" "),i("span",{staticClass:"right-edit"},[i("span",[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[e.categoryManagementPermission?i("i",{staticClass:"el-icon-more"}):e._e()]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isPermissionShow("typeCreate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"addMenu"}}},[e._v(e._s(e.$t("electronicFence.add_subcategory")))]):e._e(),e._v(" "),null!==t.data.data.typeId&&e.isPermissionShow("typeUpdate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"editMenu"}}},[e._v(e._s(e.$t("electronicFence.edit_categories")))]):e._e(),e._v(" "),null!==t.data.data.typeId&&e.isPermissionShow("typeDelete")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"removeTree"}}},[e._v(e._s(e.$t("electronicFence.delete_category")))]):e._e()],1)],1)],1)])]}}])}):e._e()],1)]),e._v(" "),i("div",{staticClass:"con-right"},[i("transition",{attrs:{name:"opacity"}},[i("div",{staticClass:"opacity_table"},[i("table-view",{ref:"table",attrs:{center:"","id-key":"routeId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-border":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1)],1)])],1)]),e._v(" "),i("transition",{attrs:{name:"el-zoom-in-bottom"}},[i("bd-map",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"bdmap",staticClass:"mapShow  left-control control-view",class:{leftActive:e.viewLeft},attrs:{"reset-menus":e.resetMenus,company:e.company,"view-left":e.viewLeft,"type-title":e.typeTitle,"is-show-form":!0}})],1),e._v(" "),e.dialogDisplay?i("dialog-design",{ref:"_dialog",attrs:{size:"mini",color:"warning","dialog-data":e.dialogData},on:{diaClose:e.diaClose,handlerCallback:e.dialogCallback}}):e._e(),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawerplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.drawerplay=t}}},[e.drawerplay?i("div",{staticClass:"uploadDialogClass"},[i("div",{staticClass:"user"},[i("span",[e._v(e._s(e.$t("electronicFence.login_account"))+":  "+e._s(e.user.username))]),e._v(" "),i("span",[e._v(e._s(e.$t("electronicFence.name"))+":  "+e._s(e.user.account))])]),e._v(" "),i("div",{staticClass:"tree_box"},[i("div",{staticClass:"tree_item"},[i("el-tree",{ref:"trees",attrs:{data:e.resetMenus,"show-checkbox":"","node-key":"treeId","default-checked-keys":e.checkedKeys,"default-expand-all":!0,props:e.props},on:{check:e.CheckedKeyFn,"node-click":e.click},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[!0===a.motorcade?i("span",[i("i",{staticClass:"iconfont Jamin_vehicle_icon_dawenjianjia p-c"}),e._v("\n                "+e._s(n.label)+"\n              ")]):e._e(),e._v(" "),!1===a.motorcade?i("span",[i("i",{staticClass:"iconfont Jamin_location_icon_che-lan iconTxt p-s"}),e._v("\n                "+e._s(n.label)+"\n              ")]):e._e()])}}])})],1),e._v(" "),i("div",{staticClass:"tree_item"},[i("el-tree",{ref:"_user_tree",attrs:{data:e.userMenus,"node-key":"treeId","default-expand-all":!0,props:e.props},on:{check:e.CheckedKeyFn,"node-click":e.click},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[!0===a.motorcade?i("span",[i("span",[i("i",{staticClass:"iconfont Jamin_vehicle_icon_dawenjianjia p-c"}),e._v("\n                  "+e._s(n.label)+"\n                ")]),e._v(" "),i("span",{staticClass:"right-box"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.switchs(n,a)}}},[e._v("\n                    "+e._s(e.$t("electronicFence.remove"))+"\n                  ")])],1)]):e._e(),e._v(" "),!1===a.motorcade?i("span",[i("span",[i("i",{staticClass:"iconfont Jamin_location_icon_che-lan iconTxt p-s"}),e._v("\n                  "+e._s(n.label)+"\n                ")]),e._v(" "),i("span",{staticClass:"right-box"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.switchs(n,a)}}},[e._v("\n                    "+e._s(e.$t("electronicFence.remove"))+"\n                  ")])],1)]):e._e()])}}])})],1)])]):e._e(),e._v(" "),i("div",{staticClass:"footBtn"},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.submitFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerplay=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)]),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.tableplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.tableplay=t}}},[e.tableplay?i("div",{staticClass:"uploadDialogClass"},[i("div",{staticClass:"user"},[i("span",[e._v(e._s(e.$t("electronicFence.region_name"))+":  "+e._s(e.user.username))]),e._v(" "),i("span",[e._v(e._s(e.$t("electronicFence.area_shape"))+":  "+e._s(e.user.account))])]),e._v(" "),i("div",{staticClass:"tree_box"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,size:e.elNorms.formSize,"label-width":"120px"}},[i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_9"),prop:"enterType"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.enterType,callback:function(t){e.$set(e.ruleForm,"enterType",t)},expression:"ruleForm.enterType"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.no_alarm"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.alert_once")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.alarm_continuously"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_10"),prop:"enterReceives"}},[i("el-checkbox-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.enterReceives,callback:function(t){e.$set(e.ruleForm,"enterReceives",t)},expression:"ruleForm.enterReceives"}},[i("el-checkbox",{attrs:{label:1}},[e._v(" "+e._s(e.$t("electronicFence.driver"))+" ")]),e._v(" "),i("el-checkbox",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.platform"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_11"),prop:"outType"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.outType,callback:function(t){e.$set(e.ruleForm,"outType",t)},expression:"ruleForm.outType"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.no_alarm"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.alert_once")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.alarm_continuously"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_12"),prop:"outReceives"}},[i("el-checkbox-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.outReceives,callback:function(t){e.$set(e.ruleForm,"outReceives",t)},expression:"ruleForm.outReceives"}},[i("el-checkbox",{attrs:{label:1}},[e._v(" "+e._s(e.$t("electronicFence.driver"))+" ")]),e._v(" "),i("el-checkbox",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.platform"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_13"),prop:"speedLimit"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.speedLimit,callback:function(t){e.$set(e.ruleForm,"speedLimit",t)},expression:"ruleForm.speedLimit"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.unlimited_speed"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.speed_limit")))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.maximum_speed"),prop:"maxSpeed"}},[i("el-input",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.maxSpeed,callback:function(t){e.$set(e.ruleForm,"maxSpeed",t)},expression:"ruleForm.maxSpeed"}},[i("template",{slot:"append"},[e._v("km/h")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.nightSpeed"),prop:"nightMaxSpeed"}},[i("el-input",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.nightMaxSpeed,callback:function(t){e.$set(e.ruleForm,"nightMaxSpeed",t)},expression:"ruleForm.nightMaxSpeed"}},[i("template",{slot:"append"},[e._v("km/h")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.duration"),prop:"duration"}},[i("el-input",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.duration,callback:function(t){e.$set(e.ruleForm,"duration",t)},expression:"ruleForm.duration"}},[i("template",{slot:"append"},[e._v(e._s(e.$t("electronicFence.seconds")))])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.zone_effective_time"),prop:"effectTime"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.effectTime,callback:function(t){e.$set(e.ruleForm,"effectTime",t)},expression:"ruleForm.effectTime"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.permanent_valid"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(" "+e._s(e.$t("electronicFence.time_period"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.every_day"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.start_time"),prop:"startTime"}},[i("el-date-picker",{staticClass:"input-width",attrs:{size:e.elNorms.size,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:""},model:{value:e.ruleForm.startTime,callback:function(t){e.$set(e.ruleForm,"startTime",t)},expression:"ruleForm.startTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.end_time"),prop:"endTime"}},[i("el-date-picker",{staticClass:"input-width",attrs:{size:e.elNorms.size,"value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",type:"datetime",placeholder:""},on:{change:e.endTime},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.gatewayCommunications"),prop:"communication"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.communication,callback:function(t){e.$set(e.ruleForm,"communication",t)},expression:"ruleForm.communication"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.no"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.yes")))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.cnss"),prop:"collectCnss"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.collectCnss,callback:function(t){e.$set(e.ruleForm,"collectCnss",t)},expression:"ruleForm.collectCnss"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.no"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.yes")))])],1)],1)],1)],1)]):e._e(),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"700px"}},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.tablesFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.tableplay=!1}}},[e._v(e._s(this.$t("operateCommon.cancel")))])],1)])],1)},[],!1,null,"fe40e1f0",null);y.options.__file="line.vue";t.default=y.exports},RCyq:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_cheng.866581b.png"},S2Rr:function(e,t,i){"use strict";i.r(t);var n=i("unDg"),a=i.n(n),s=i("omC7"),o=i.n(s),r=i("bS4n"),c=i.n(r),l=i("ABCu"),d=i("kDn8"),u=i("AlM9"),p=i("EXUM"),m=i("YelX"),h=i("8t5x"),f={name:"VehicleAdminister",components:{treeView:l.a,dialogDesign:d.a,TableView:u.a,bdMap:p.default},mixins:[m.default],data:function(){return{regionId:null,ruleForm:{paramType:3,enterType:2,enterReceives:[],outType:2,outReceives:[],speedLimit:1,maxSpeed:null,nightMaxSpeed:null,duration:null,effectTime:1,startTime:null,endTime:null,communication:0,collectCnss:1},rules:{enterType:[{required:!0,message:this.$t("electronicFence.tip_1"),trigger:"change"}],enterReceives:[{required:!0,message:this.$t("electronicFence.tip_2"),trigger:"change"}],outType:[{required:!0,message:this.$t("electronicFence.tip_3"),trigger:"change"}],outReceives:[{required:!0,message:this.$t("electronicFence.tip_4"),trigger:"change"}],speedLimit:[{required:!0,message:this.$t("electronicFence.tip_5"),trigger:"change"}],maxSpeed:[{required:!0,message:this.$t("electronicFence.tip_6"),trigger:"blur"}],nightMaxSpeed:[{required:!0,message:this.$t("electronicFence.tip_6"),trigger:"blur"}],duration:[{required:!0,message:this.$t("electronicFence.tip_7"),trigger:"blur"}],effectTime:[{required:!0,message:this.$t("electronicFence.tip_8"),trigger:"change"}],startTime:[{required:!0,message:this.$t("electronicFence.select_start_time"),trigger:"change"}],endTime:[{required:!0,message:this.$t("electronicFence.select_end_time"),trigger:"change"}],communication:[{required:!0,message:this.$t("electronicFence.tip_8"),trigger:"change"}],collectCnss:[{required:!0,message:this.$t("electronicFence.tip_8"),trigger:"change"}]},props:{motorcade:"motorcade",parentId:"parentId",status:"status",children:"children",label:"label",id:"id",count:"count"},adminId:"",userMenus:[],flag:null,checkedKeys:[],tableplay:!1,drawerplay:!1,direction:"rtl",drawerTitle:"",drawerWidth:"700px",user:{username:"",account:""},widthNum:0,show:!1,viewLeft:!1,company:[],dialogDisplay:!1,alias:{pageSize:"pageSize",pageNum:"pageNum"},typeTitle:null,fieldMap:{},activeMenu:{typeId:null,name:""},typeId:null,isTree:!0,filterText:"",resTreeData:null,resetData:{parentId:"parentId",value:"typeId",label:"typeName",children:"opEfTypeNodes"},resetMenus:[],treeData:{extendData:{},checkOriginName:"",treeQuery:{type:"get",action:"/ef/type/treeList/3",list:null},defaultProps:{children:"opEfTypeNodes",label:"typeName",isLeaf:"lezy",disabled:"disabled"},nodeKey:"typeId",currentNodeKey:1,defaultExpandAll:!0,expandClickNode:!1,indent:16,screenFn:{bindFn:function(e,t){return!e||-1!==t.typeName.indexOf(e)}},draggable:{isDraggable:!1,allowDrap:function(e,t,i){return!0},allowDrop:function(e,t,i){return e.data.type===t.data.type?"inner"!==i:(1!==e.data.type||0!==t.data.type)&&(0!==e.data.type||1!==t.data.type)}}},params:{},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:this.$t("electronicFence.sequence_number")},{title:this.$t("electronicFence.administrative_name"),type:"text",minWidth:"130",key:"adminName"},{title:this.$t("electronicFence.subordinate_classification"),key:"typeName",minWidth:"130",type:"text"},{title:this.$t("electronicFence.belong_company"),key:"companyName",minWidth:"150",type:"text"},{title:this.$t("electronicFence.type"),key:"entryType",minWidth:"130",type:"tagText",tags:[{text:this.$t("electronicFence.disable"),value:1},{text:this.$t("electronicFence.forbidden"),value:2,option:{type:"danger"}}]},{title:this.$t("electronicFence.create_time"),key:"createTime",minWidth:"220",type:"text"},{title:this.$t("operateCommon.operation"),key:"operate",type:"operate",fixed:"right",width:"250",buttons:[],mode:"default",dropdownType:"primary"}],buttonControls:[],searchControls:[{type:"input",key:"adminName",placeholder:this.$t("electronicFence.administrative_name"),width:"200px"},{type:"select",key:"companyId",placeholder:this.$t("electronicFence.belong_company"),width:"200px",filterable:!0,clearable:!0,options:[{name:this.$t("electronicFence.none"),value:0}]},{type:"select",key:"entryType",placeholder:this.$t("electronicFence.type"),width:"200px",filterable:!0,clearable:!0,options:[{name:this.$t("electronicFence.disable"),value:1},{name:this.$t("electronicFence.forbidden"),value:2}]}],searchMode:"immediate",footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:c()({},Object(h.b)(["elNorms"]),{categoryManagementPermission:function(){return this.isPermissionShow("typeCreate")||this.isPermissionShow("typeUpdate")||this.isPermissionShow("typeDelete")}}),watch:{filterText:function(e){this.$refs.tree.$refs.sonTree.filter(e)},show:function(e){this.$emit("mapSwitchFn",e)}},created:function(){this.getCompanyDataFn()},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("adminCreate")&&this.tableOptions.buttonControls.push({text:this.$t("electronicFence.add_region"),round:!1,icon:"el-icon-plus",funcName:"addVehicle"}),this.isPermissionShow("adminExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-download",funcName:"exportRecord"}),this.tableOptions.footerButtons=[],this.isPermissionShow("adminUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("electronicFence.move"),type:"",size:"mini",icon:"el-icon-remove-outline",round:!1,funcName:"move"}),this.isPermissionShow("adminDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operateCommon.delete"),type:"danger",size:"mini",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("adminList")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.details"),type:"text",icon:"iconfont Jamin_vehicle_ico_xq",funcName:"details"}),e>-1&&this.isPermissionShow("adminUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),type:"text",icon:"iconfont Jamin_vehicle_icon_bj",funcName:"edit"}),e>-1&&this.isPermissionShow("adminUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.fence_arameters"),type:"text",icon:"iconfont Jamin_vehicle_icon_wlcs",funcName:"enclosure"}),e>-1&&this.isPermissionShow("adminUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("electronicFence.zone_down"),type:"text",icon:"iconfont Jamin_vehicle_icon_qyxf",funcName:"vehicleAuthorization"})},enclosure:function(e){var t=this;this.regionId=e.adminId,this.tableplay=!0,this.ruleForm={paramType:3,enterType:2,enterReceives:[],outType:2,outReceives:[],speedLimit:1,maxSpeed:null,nightMaxSpeed:null,duration:null,effectTime:1,startTime:null,endTime:null,communication:0,collectCnss:1},this.$nextTick(function(){t.$refs.ruleForm.resetFields()}),this.drawerTitle=this.$t("electronicFence.fence_arameters"),this.drawerWidth="700px",this.user.username=e.adminName,this.user.account=this.$t("electronicFence.administration_management"),this.paramData(e.adminId)},paramData:function(e){var t=this;this.$http.get("/ef/param/3/"+e).then(function(e){e.code===t.$config.API_STATUS.OK&&e.data&&(t.ruleForm=e.data)})},tablesFn:function(){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.ruleForm.regionId=e.regionId,e.$http.post("/ef/param/create",e.ruleForm).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableplay=!1,e.$refs.table.initRequestTableData(),e.$message({message:t.message,type:"success"}))})})},endTime:function(e){this.ruleForm.startTime?new Date(e).getTime()<=new Date(this.ruleForm.startTime).getTime()&&(this.$message.error(this.$t("electronicFence.time_tip_1")),this.ruleForm.endTime=null):(this.$message.error(this.$t("electronicFence.select_start_time")),this.ruleForm.endTimet=null)},click:function(e,t){this.$refs.trees.setCurrentKey(e.treeId),this.$refs._user_tree.setCurrentKey(e.treeId)},switchs:function(e,t){this.$refs.trees.setChecked(t,!1,!1),this.CheckedKeyFn()},treeList:function(e){var t=this;this.flag=!1,this.checkedKeys=[],this.$http.get("/admin/list/vehicle?adminId="+e).then(function(e){if(e.code===t.$config.API_STATUS.OK){var i=[{motorcades:e.data.motorcades,vehicles:e.data.vehicles}];t.treeArr(i),t.resetMenus=i[0].children}t.userTreeList(t.adminId)})},userTreeList:function(e){var t=this;this.flag=!0,this.checkedKeys=[],this.$http.get("/admin/list/vehicle/authorized?adminId="+e).then(function(e){if(e.code===t.$config.API_STATUS.OK){var i=[{motorcades:e.data.motorcades,vehicles:e.data.vehicles}];t.treeArr(i),t.userMenus=i[0].children,t.$refs.trees.setCheckedKeys(t.checkedKeys)}})},treeArr:function(e){for(var t=this,i=function(i){if(e[i].motorcades){var n=[];e[i].vehicles&&e[i].vehicles.forEach(function(a){t.flag&&t.checkedKeys.push("v"+a.vehicleId),n.push({motorcade:!1,parentId:e[i].vehiclePid,status:a.status,label:a.licenseNum,id:a.vehicleId,treeId:"v"+a.vehicleId})}),e[i].motorcades.forEach(function(e){t.flag&&!e.motorcades.length&&!e.vehicles.length&&t.checkedKeys.push("m"+e.motorcadeId),n.push({motorcade:!0,parentId:e.parentId,status:e.status,motorcades:e.motorcades,vehicles:e.vehicles,label:e.motorcadeName,id:e.motorcadeId,count:e.count,vehiclePid:e.motorcadeId,treeId:"m"+e.motorcadeId})}),e[i].children=JSON.parse(o()(n)),t.treeArr(e[i].children),delete e[i].motorcades,delete e[i].vehicles}},n=0;n<e.length;n++)i(n)},CheckedKeyFn:function(e,t){this.userMenus=[],this.createCheckedTreeFn(this.$refs.trees._data.root.childNodes)},createCheckedTreeFn:function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.checked){if(!i.data.motorcade){var n=this.$refs.trees.getNode("m"+i.data.parentId),a=this.forNodeFilterFn(n);a&&this.userMenus.push(a);break}this.userMenus.push(i.data)}else i.childNodes&&i.childNodes.length&&this.createCheckedTreeFn(i.childNodes)}},forNodeFilterFn:function(e){var t=this,i=[],n=null;return e.childNodes.forEach(function(e){if(e.checked)i.push(e.data);else if(e.childNodes&&e.childNodes.length){var n=t.forNodeFilterFn(e);n&&i.push(n)}}),i.length&&((n=JSON.parse(o()(e.data))).children=i),n},vehicleAuthorization:function(e){e.username&&(this.user.username=e.username),e.account&&(this.user.account=e.account),this.adminId=e.adminId,this.treeList(this.adminId),this.drawerWidth="700px",this.drawerTitle=this.$t("electronicFence.zone_down"),this.drawerplay=!0},submitFn:function(){var e=this,t=this.treeCountFn(this.$refs._user_tree._data.root.childNodes,!0);this.$http.post("/admin/vehicle/"+this.adminId,t).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$message.success(e.$t("electronicFence.authorization_succeeded")),e.drawerplay=!1,e.$refs.table.initRequestTableData())})},treeCountFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],s=[];return e.forEach(function(e){if(e.data.motorcade){if(n.push({parentId:i?0:e.data.parentId,motorcadeId:e.data.id}),e.childNodes&&e.childNodes.length){var o=t.treeCountFn(e.childNodes);n=[].concat(a()(n),a()(o.authorizedMotorcades)),s=[].concat(a()(s),a()(o.vehicles))}}else s.push({parentId:e.data.parentId,vehicleId:e.data.id})}),{authorizedMotorcades:n,vehicles:s}},addVehicle:function(){this.typeTitle=this.$t("electronicFence.administration"),this.show=!0,this.$refs.bdmap.addAdmin()},iconMap:function(e){},diaClose:function(e){var t=this;this.treeData.currentNodeKey=this.activeMenu.typeId,e&&(this.isTree=!1,this.$nextTick(function(){t.isTree=!0})),this.dialogDisplay=!1},details:function(e){var t=this;this.$http.get("/admin/"+e.adminId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.typeTitle=t.$t("electronicFence.administration"),t.show=!0,t.$refs.bdmap.detailAdmin(e.data))})},edit:function(e){var t=this;this.$http.get("/admin/"+e.adminId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.typeTitle=t.$t("electronicFence.administration"),t.show=!0,t.$refs.bdmap.editAdmin(e.data))})},dialogCallback:function(e,t,i){this[e.handlerCallback.funcName].call(function(){},e,t,i)},addMenu:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;"click"===e.type&&(e={}),-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(o()(this.resetMenus)).splice(-1,1),this.$set(this.resetMenu[0],"value",0)),this.dialogData={staticData:{parentId:"mainNew"===i?null:e.typeId?e.typeId:0},isClickClose:!1,isDialogDisplay:!0,title:this.$t("electronicFence.add_Category"),data:{},defaultData:{fenceType:3},mainWidth:"500",titleWidth:"100",submitAction:"/ef/type/create",btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_superior_category"),trigger:"change"}]},{title:this.$t("electronicFence.category_name"),type:"input",offsetWidth:"320",key:"typeName",rules:[{required:!0,message:this.$t("electronicFence.enter_category_name"),trigger:"blur"}]}],message:{message:this.$t("electronicFence.category_added_successfully"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}],confirmSubmitFn:function(e,i){var n=!1;t.dialogData.submitAction="/ef/type/create",function t(i){for(var a=0;a<i.length;a++){if(null===i[a].typeId&&0===e.parentId||i[a].typeId===e.parentId){n=i[a].opEfTypeNodes.some(function(t){return t.typeName===e.typeName});break}i[a].opEfTypeNodes&&i[a].opEfTypeNodes.length>0&&t(i[a].opEfTypeNodes)}}(t.resTreeData),n&&(t.dialogData.submitAction=!1,t.$message.warning(t.$t("electronicFence.category_name_exists")))}},this.dialogDisplay=!0},editMenu:function(e){-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(o()(this.resetMenus)).splice(-1,1),this.$set(this.resetMenu[0],"value",0)),delete e.list,this.dialogData={isClickClose:!1,staticData:e,isDialogDisplay:!0,title:this.$t("electronicFence.edit_categories"),data:{},defaultData:{fenceType:3},mainWidth:"500",titleWidth:"100",submitAction:"/ef/type/update/"+e.typeId,btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_superior_category"),trigger:"change"}]},{title:this.$t("electronicFence.category_name"),type:"input",offsetWidth:"320",key:"typeName",rules:[{required:!0,message:this.$t("electronicFence.enter_category_name"),trigger:"blur"}]}],message:{message:this.$t("electronicFence.category_edit_successful"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},handleCommand:function(e){this[e.funcName].call(function(){},e.data,e.node,e.funcName)},removeTree:function(e){var t=this;this.$confirm(this.$t("electronicFence.delete_text_tip"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){t.$http.get("/ef/type/delete/"+e.typeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$message({type:"success",message:t.$t("electronicFence.delete_successfully")}),t.isTree=!1,t.$nextTick(function(){t.isTree=!0}))})}).catch(function(){t.$message({type:"info",message:t.$t("electronicFence.deleted_canceled")})})},getTreeData:function(e){var t=JSON.parse(o()(e));t.unshift({typeName:"无",typeId:-1,parentId:0}),this.resTreeData=e,this.resetDataFn(t,!1),this.$refs.table.initRequestTableData()},nodeClick:function(e,t){e.children&&e.children.length||(this.activeMenu={typeId:e.typeId,name:e.typeName},this.parentId=e.parentId),this.typeId=e.typeId,this.$refs.table.initRequestTableData()},getCompanyDataFn:function(){var e=this;this.$http.get("/company/treeList/electronicFence").then(function(t){t.code===e.$config.API_STATUS.OK&&(e.company=t.data)}),this.$http.post("/company/electronicFence/list/all").then(function(t){if(t.code===e.$config.API_STATUS.OK){var i=t.data.list.map(function(e){return{label:e.name,name:e.name,value:e.companyId}});e.tableOptions.searchControls[1].options=i}})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={typeId:this.typeId,adminName:e.adminName,companyId:e.companyId,entryType:e.entryType};this.$http.post("/admin/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},move:function(e){var t=[];e.forEach(function(e,i){t[i]=e.adminId}),-1===this.resetMenus[0].value&&(this.resetMenu=JSON.parse(o()(this.resetMenus)).splice(-1,1)),this.dialogData={isClickClose:!1,staticData:"",isDialogDisplay:!0,title:this.$t("electronicFence.adjust_classification"),data:{},defaultData:{ids:t.join(",")},methods:"deleteApi",mainWidth:"500",titleWidth:"100",submitAction:"/admin/update",btnAlign:"center",formList:[{title:this.$t("electronicFence.superior_category"),type:"cascader",labelWidth:"100",offsetWidth:"320",key:"typeId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenu},handlerCallback:{target:"changeFunction",funcName:"cascaderChange"},rules:[{required:!0,message:this.$t("electronicFence.select_category"),trigger:"change"}]}],message:{message:this.$t("electronicFence.adjustment_succeeded"),type:"success"},formButton:[{name:this.$t("electronicFence.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.adminId}),t.$http.deleteApi("/admin/delete",{ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.emitRequestTableData(),t.$message({message:e.message,type:"success"}))})}).catch(function(){t.$message({type:"info",message:t.$t("confirm.infoMessage")})})},resetDataFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.resetData){var n=[];if(e.forEach(function(e){var i=t.initJSON(t.resetData,e);n.push(i)}),!0===i)return n;this.resetMenus=n}},initJSON:function(e,t){var i={};for(var n in e)if("children"===n&&t[e[n]]&&t[e[n]].length>0){var a=this.resetDataFn(t[e[n]],!0);i[n]=a}else"children"!==n&&(i[n]=t[e[n]]);return i},disabledData:function(e){this.resetMenus.forEach(function(t){0===e&&t.children&&t.children.length>0&&(t.disabled=!0),t.children&&t.children.length>0&&t.children.forEach(function(t){1===e&&(t.disabled=!1)})})},nodeDragEnd:function(e,t,i){var n=this;this.$http.post("/sys/menu/sort",{motorcadeId:e.data.motorcadeId,targetId:t.data.motorcadeId,moveType:i}).then(function(e){e.code,n.$config.API_STATUS,n.isTree=!1,n.$nextTick(function(){n.isTree=!0})}).catch(function(){n.isTree=!1,n.$nextTick(function(){n.isTree=!0})})},cascaderChange:function(e,t,i){null===t&&(t=0),this.$refs._dialog.dialogData.defaultData.parentId=-1===t?0:t,this.$refs._dialog.dialogData.defaultData.fenceType=3,"0"===t&&(this.$refs._dialog.dialogData.defaultData={type:0})},exportRecord:function(){var e=this;this.$confirm(this.$t("operateCommon.confirm_export_record"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,i,n){if(e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(i){t.key===i&&"operate"!==t.key&&(e.fieldMap[i]=t.title)})}),"confirm"===t){var a=e.$refs.table._data.searchParams,s=a.regionName,o=a.regionType,r=a.companyId,c=a.entryType,l={fieldMap:e.fieldMap,regionName:s,regionType:o,companyId:r,entryType:c,typeId:e.typeId};e.$http.download("/admin/export?isToken=true",l),n()}else n()}}).catch(function(){})}}},g=(i("+dKU"),i("ZrdR")),y=Object(g.a)(f,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"table"},[i("div",{staticClass:"page-body"},[i("div",{staticClass:"con-left"},[i("div",{staticClass:"input-query"},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("electronicFence.search_category_name"),"prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),e.isPermissionShow("typeCreate")?i("el-button",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:e.elNorms.size,circle:e.elNorms.circle,round:e.elNorms.round},on:{click:function(t){e.addMenu(t,"mainNew")}}},[e._v(e._s(e.$t("electronicFence.new_category")))]):e._e()],1),e._v(" "),i("div",{staticClass:"body-tree init-tree"},[e.isTree?i("tree-view",{ref:"tree",attrs:{"tree-data":e.treeData},on:{treeDataFn:e.getTreeData,"node-click":e.nodeClick,"node-drag-end":e.nodeDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"left-title text-ellipsis",style:t.data.data.typeId===e.activeMenu.typeId?"color: var(--main-primary);":""},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_xiaowenjian"}),e._v("\n              "+e._s(t.data.data.typeName)+"\n            ")]),e._v(" "),i("span",{staticClass:"right-edit"},[i("span",[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[e.categoryManagementPermission?i("i",{staticClass:"el-icon-more"}):e._e()]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isPermissionShow("typeCreate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"addMenu"}}},[e._v(e._s(e.$t("electronicFence.add_subcategory")))]):e._e(),e._v(" "),null!==t.data.data.typeId&&e.isPermissionShow("typeUpdate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"editMenu"}}},[e._v(e._s(e.$t("electronicFence.edit_categories")))]):e._e(),e._v(" "),null!==t.data.data.typeId&&e.isPermissionShow("typeDelete")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"removeTree"}}},[e._v(e._s(e.$t("electronicFence.delete_category")))]):e._e()],1)],1)],1)])]}}])}):e._e()],1)]),e._v(" "),i("div",{staticClass:"con-right"},[i("transition",{attrs:{name:"opacity"}},[i("div",{staticClass:"opacity_table"},[i("table-view",{ref:"table",attrs:{center:"","id-key":"adminId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-border":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1)],1)])],1)]),e._v(" "),i("transition",{attrs:{name:"el-zoom-in-bottom"}},[i("bd-map",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"bdmap",staticClass:"mapShow  left-control control-view",class:{leftActive:e.viewLeft},attrs:{"reset-menus":e.resetMenus,company:e.company,"view-left":e.viewLeft,"type-title":e.typeTitle,"is-show-form":!0}})],1),e._v(" "),e.dialogDisplay?i("dialog-design",{ref:"_dialog",attrs:{size:"mini",color:"warning","dialog-data":e.dialogData},on:{diaClose:e.diaClose,handlerCallback:e.dialogCallback}}):e._e(),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawerplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.drawerplay=t}}},[e.drawerplay?i("div",{staticClass:"uploadDialogClass"},[i("div",{staticClass:"user"},[i("span",[e._v(e._s(e.$t("electronicFence.login_account"))+":  "+e._s(e.user.username))]),e._v(" "),i("span",[e._v(e._s(e.$t("electronicFence.name"))+":  "+e._s(e.user.account))])]),e._v(" "),i("div",{staticClass:"tree_box"},[i("div",{staticClass:"tree_item"},[i("el-tree",{ref:"trees",attrs:{data:e.resetMenus,"show-checkbox":"","node-key":"treeId","default-checked-keys":e.checkedKeys,"default-expand-all":!0,props:e.props},on:{check:e.CheckedKeyFn,"node-click":e.click},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[!0===a.motorcade?i("span",[i("i",{staticClass:"iconfont Jamin_vehicle_icon_dawenjianjia p-c"}),e._v("\n                "+e._s(n.label)+"\n              ")]):e._e(),e._v(" "),!1===a.motorcade?i("span",[i("i",{staticClass:"iconfont Jamin_location_icon_che-lan iconTxt p-s"}),e._v("\n                "+e._s(n.label)+"\n              ")]):e._e()])}}])})],1),e._v(" "),i("div",{staticClass:"tree_item"},[i("el-tree",{ref:"_user_tree",attrs:{data:e.userMenus,"node-key":"treeId","default-expand-all":!0,props:e.props},on:{check:e.CheckedKeyFn,"node-click":e.click},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,a=t.data;return i("span",{staticClass:"custom-tree-node"},[!0===a.motorcade?i("span",[i("span",[i("i",{staticClass:"iconfont Jamin_vehicle_icon_dawenjianjia p-c"}),e._v("\n                  "+e._s(n.label)+"\n                ")]),e._v(" "),i("span",{staticClass:"right-box"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.switchs(n,a)}}},[e._v("\n                    "+e._s(e.$t("electronicFence.move"))+"\n                  ")])],1)]):e._e(),e._v(" "),!1===a.motorcade?i("span",[i("span",[i("i",{staticClass:"iconfont Jamin_location_icon_che-lan iconTxt p-s"}),e._v("\n                  "+e._s(n.label)+"\n                ")]),e._v(" "),i("span",{staticClass:"right-box"},[i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(){return e.switchs(n,a)}}},[e._v("\n                    "+e._s(e.$t("electronicFence.move"))+"\n                  ")])],1)]):e._e()])}}])})],1)])]):e._e(),e._v(" "),i("div",{staticClass:"footBtn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submitFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{on:{click:function(t){e.drawerplay=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)]),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.tableplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.tableplay=t}}},[e.tableplay?i("div",{staticClass:"uploadDialogClass"},[i("div",{staticClass:"user"},[i("span",[e._v(e._s(e.$t("electronicFence.region_name"))+":  "+e._s(e.user.username))]),e._v(" "),i("span",[e._v(e._s(e.$t("electronicFence.area_shape"))+":  "+e._s(e.user.account))])]),e._v(" "),i("div",{staticClass:"tree_box"},[i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_9"),prop:"enterType"}},[i("el-radio-group",{model:{value:e.ruleForm.enterType,callback:function(t){e.$set(e.ruleForm,"enterType",t)},expression:"ruleForm.enterType"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.tip_10"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.alert_once")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.alarm_continuously"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_10"),prop:"enterReceives"}},[i("el-checkbox-group",{model:{value:e.ruleForm.enterReceives,callback:function(t){e.$set(e.ruleForm,"enterReceives",t)},expression:"ruleForm.enterReceives"}},[i("el-checkbox",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.driver"))+" ")]),e._v(" "),i("el-checkbox",{attrs:{label:2}},[e._v(e._s(e.$t("electronicFence.platform"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_11"),prop:"outType"}},[i("el-radio-group",{model:{value:e.ruleForm.outType,callback:function(t){e.$set(e.ruleForm,"outType",t)},expression:"ruleForm.outType"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.no_alarm"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.alert_once")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.alarm_continuously"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_12"),prop:"outReceives"}},[i("el-checkbox-group",{model:{value:e.ruleForm.outReceives,callback:function(t){e.$set(e.ruleForm,"outReceives",t)},expression:"ruleForm.outReceives"}},[i("el-checkbox",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.driver"))+" ")]),e._v(" "),i("el-checkbox",{attrs:{label:2}},[e._v(e._s(e.$t("electronicFence.platform"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.tip_13"),prop:"speedLimit"}},[i("el-radio-group",{model:{value:e.ruleForm.speedLimit,callback:function(t){e.$set(e.ruleForm,"speedLimit",t)},expression:"ruleForm.speedLimit"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.unlimited_speed"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.speed_limit")))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.maximum_speed"),prop:"maxSpeed"}},[i("el-input",{model:{value:e.ruleForm.maxSpeed,callback:function(t){e.$set(e.ruleForm,"maxSpeed",t)},expression:"ruleForm.maxSpeed"}},[i("template",{slot:"append"},[e._v("km/h")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.nightSpeed"),prop:"nightMaxSpeed"}},[i("el-input",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.nightMaxSpeed,callback:function(t){e.$set(e.ruleForm,"nightMaxSpeed",t)},expression:"ruleForm.nightMaxSpeed"}},[i("template",{slot:"append"},[e._v("km/h")])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.duration"),prop:"duration"}},[i("el-input",{model:{value:e.ruleForm.duration,callback:function(t){e.$set(e.ruleForm,"duration",t)},expression:"ruleForm.duration"}},[i("template",{slot:"append"},[e._v(e._s(e.$t("electronicFence.seconds")))])],2)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.zone_effective_time"),prop:"effectTime"}},[i("el-radio-group",{model:{value:e.ruleForm.effectTime,callback:function(t){e.$set(e.ruleForm,"effectTime",t)},expression:"ruleForm.effectTime"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.permanent_valid"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(" "+e._s(e.$t("electronicFence.time_period"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(" "+e._s(e.$t("electronicFence.every_day"))+" ")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.start_time"),prop:"startTime"}},[i("el-date-picker",{staticClass:"input-width",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:""},model:{value:e.ruleForm.startTime,callback:function(t){e.$set(e.ruleForm,"startTime",t)},expression:"ruleForm.startTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.end_time"),prop:"endTime"}},[i("el-date-picker",{staticClass:"input-width",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","default-time":"23:59:59",type:"datetime",placeholder:""},on:{change:e.endTime},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.gatewayCommunications"),prop:"communication"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.communication,callback:function(t){e.$set(e.ruleForm,"communication",t)},expression:"ruleForm.communication"}},[i("el-radio",{attrs:{label:0}},[e._v(" "+e._s(e.$t("electronicFence.no"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("electronicFence.yes")))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("electronicFence.cnss"),prop:"collectCnss"}},[i("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.ruleForm.collectCnss,callback:function(t){e.$set(e.ruleForm,"collectCnss",t)},expression:"ruleForm.collectCnss"}},[i("el-radio",{attrs:{label:1}},[e._v(" "+e._s(e.$t("electronicFence.no"))+" ")]),e._v(" "),i("el-radio",{attrs:{label:0}},[e._v(e._s(e.$t("electronicFence.yes")))])],1)],1)],1)],1)]):e._e(),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"700px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.tablesFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{on:{click:function(t){e.tableplay=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)])],1)},[],!1,null,"2733d4be",null);y.options.__file="administration.vue";t.default=y.exports},UcvO:function(e,t,i){},d6xc:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_z.6873d9e.png"},gjL5:function(e,t,i){},jcYt:function(e,t,i){e.exports=i.p+"static/img/not-perm.d97c442.png"},kvP9:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_feng.06ccffd.png"},ojTi:function(e,t,i){e.exports=i.p+"static/img/vehicle_pic_biaozhu_zi.e58d8fb.png"},zH98:function(e,t,i){"use strict";var n=i("UcvO");i.n(n).a}}]);