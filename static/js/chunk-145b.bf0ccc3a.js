(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-145b","chunk-7ef5"],{"+puh":function(e,t,a){"use strict";a.r(t);var n=a("BHIJ"),i=a("AlM9"),r=a("YelX"),s={components:{TableView:i.a,drawer:n.a},mixins:[r.default],data:function(){return{driverIds:[],drawerDisplay:!1,drawerData:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("InsurancePage.licenseNum"),key:"licenseNum",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.companyName"),key:"companyName",type:"text",minWidth:"180"},{title:this.$t("InsurancePage.driverName"),key:"driverName",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.accidentDuty"),key:"accidentDuty",type:"tagText",minWidth:"180",tags:[{value:2,text:this.$t("InsurancePage.accidentDuty_1"),option:{type:"warning"}},{value:1,text:this.$t("InsurancePage.accidentDuty_2"),option:{type:"danger"}}]},{title:this.$t("InsurancePage.accidentAt"),key:"accidentAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.location"),key:"location",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.accidentDescription"),key:"accidentDescription",minWidth:"180",type:"text"},{title:this.$t("operation.operation"),type:"operate",key:"operate",fixed:"right",width:"160",buttons:[]}],buttonControls:[],searchControls:[{type:"input",key:"licenseNum",placeholder:this.$t("view.license_num"),width:"200px"},{type:"treeSelect",key:"companyIds",valueKey:"companyId",placeholder:this.$t("view.searchControl_company"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"sysCompanyNodes",label:"name"},nodeKey:"companyId",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.companyTreeData},{type:"select",key:"type",placeholder:this.$t("InsurancePage.accidentDuty"),width:"200px",filterable:!0,clearable:!0,options:[{name:this.$t("InsurancePage.accidentDuty_1"),value:1},{name:this.$t("InsurancePage.accidentDuty_2"),value:2}]}],footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("accidentCreate")&&this.tableOptions.buttonControls.push({text:this.$t("InsurancePage.search_accident"),type:"primary",round:!1,icon:"el-icon-plus",funcName:"increase"}),this.isPermissionShow("accidentExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-download",funcName:"export"}),this.tableOptions.footerButtons=[],this.isPermissionShow("accidentDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operation.delete"),type:"danger",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("accidentList")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.detail"),icon:"iconfont Jamin_vehicle_ico_xq",type:"text",funcName:"detail"}),e>-1&&this.isPermissionShow("accidentUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),icon:"iconfont Jamin_vehicle_icon_bj",type:"text",funcName:"edit"})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={licenseNum:e.licenseNum,companyIds:e.companyIds?JSON.parse(e.companyIds):[],type:e.type};this.$http.post("/accident/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},vehicleChange:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.driverIds=[],this.$http.get("/vehicle/select/"+e).then(function(e){e.code===t.$config.API_STATUS.OK&&(e.data.forEach(function(e,a){t.$set(t.driverIds,a,{value:e.driverId,name:e.driverName})}),t.$refs.drawer&&(t.$refs.drawer.formDataOptions.driverId_options=t.driverIds,a&&t.$set(t.$refs.drawer.formData,"driverId",null)))})},edit:function(e){var t=this;this.$http.get("/accident/"+e.accidentId).then(function(a){a.code===t.$config.API_STATUS.OK&&(e=a.data)}),this.vehicleChange(e.vehicleId,0),this.drawerDisplay=!0,this.drawerData={staticData:e,isShow:!0,title:this.$t("InsurancePage.form_editTitle_1"),titleWidth:"120",data:{},defaultData:"",submitAction:"/accident/update/"+e.accidentId,btnAlign:"center",formList:[{title:this.$t("InsurancePage.form_edit_wx_vehicleId"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",label:e.licenseNum,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:this.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"change"}],handlerCallback:{target:"clickFunction",funcName:"vehicleChange"}},{title:this.$t("InsurancePage.form_edit_wx_driverId"),type:"select",key:"driverId",offsetWidth:"320",filterable:!0,options:{type:"default",list:this.driverIds},rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_driverId_placeholder"),trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_accidentDuty"),type:"select",key:"accidentDuty",offsetWidth:"320",filterable:!0,options:{type:"default",list:[{value:2,name:this.$t("InsurancePage.accidentDuty_1")},{value:1,name:this.$t("InsurancePage.accidentDuty_2")}]},rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_accidentDuty_placeholder"),trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_accidentAt"),type:"dateSelect",offsetWidth:"320",key:"accidentAt",valueFormat:"yyyy-MM-dd",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_accidentAt_placeholder"),trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_location"),type:"input",key:"location",offsetWidth:"320",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_location_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.form_edit_wx_payoutAmount"),type:"input",offsetWidth:"320",key:"payoutAmount"},{title:this.$t("InsurancePage.form_edit_wx_repairFees"),type:"input",offsetWidth:"320",key:"repairFees"},{title:this.$t("InsurancePage.form_edit_wx_accidentDescription"),type:"input",offsetWidth:"320",key:"accidentDescription"},{title:this.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:this.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:this.$store.getters.userData.tokenHead+this.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(e){e.code===t.$config.API_STATUS.OK&&t.$set(t.$refs.drawer.formData,"attachedPhoto",e.data.url)}}],formButton:[{name:this.$t("confirm.determine"),type:"confirm",class:"primary"},{name:this.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:this.$t("confirm.editSuccess")}}},detail:function(e){this.vehicleChange(e.vehicleId,0),this.drawerDisplay=!0,this.drawerData={staticData:e,isShow:!0,title:this.$t("InsurancePage.detail_accident_title"),titleWidth:"120",btnAlign:"center",formList:[{title:this.$t("InsurancePage.form_edit_wx_vehicleId"),type:"text",key:"licenseNum",offsetWidth:"320"},{title:this.$t("InsurancePage.form_edit_wx_driverId"),type:"textSelect",key:"driverId",offsetWidth:"320",filterable:!0,list:this.driverIds},{title:this.$t("InsurancePage.form_edit_wx_accidentDuty"),type:"textSelect",key:"accidentDuty",offsetWidth:"320",list:[{value:2,name:this.$t("InsurancePage.accidentDuty_1")},{value:1,name:this.$t("InsurancePage.accidentDuty_2")}]},{title:this.$t("InsurancePage.form_edit_wx_accidentAt"),type:"text",offsetWidth:"320",key:"accidentAt"},{title:this.$t("InsurancePage.form_edit_wx_location"),type:"text",key:"location",offsetWidth:"320",rules:[{required:!0,message:"请输入事故地点",trigger:"blur"}]},{title:this.$t("InsurancePage.form_edit_wx_payoutAmount"),type:"text",offsetWidth:"320",key:"payoutAmount"},{title:this.$t("InsurancePage.form_edit_wx_repairFees"),type:"text",offsetWidth:"320",key:"repairFees"},{title:this.$t("InsurancePage.form_edit_wx_accidentDescription"),type:"text",offsetWidth:"320",key:"accidentDescription"},{title:this.$t("InsurancePage.form_description"),type:"text",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.detail_attachedPhoto"),type:"imageView",offsetWidth:"320",key:"attachedPhoto"}]}},increase:function(){var e=this;this.drawerDisplay=!0,this.drawerData={isShow:!0,title:this.$t("InsurancePage.form_add_sg_title"),titleWidth:"120",data:{},defaultData:"",submitAction:"/accident/create",btnAlign:"center",formList:[{title:this.$t("InsurancePage.form_edit_wx_vehicleId"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:this.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}],handlerCallback:{target:"clickFunction",funcName:"vehicleChange"}},{title:this.$t("InsurancePage.form_edit_wx_driverId"),type:"select",key:"driverId",offsetWidth:"320",filterable:!0,options:{type:"default",list:this.driverIds},rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_driverId_placeholder"),trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_accidentDuty"),type:"select",key:"accidentDuty",offsetWidth:"320",filterable:!0,options:{type:"default",list:[{value:2,name:this.$t("InsurancePage.accidentDuty_1")},{value:1,name:this.$t("InsurancePage.accidentDuty_2")}]},rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_accidentDuty"),trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_accidentAt"),type:"dateSelect",offsetWidth:"320",key:"accidentAt",valueFormat:"yyyy-MM-dd",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_accidentAt_placeholder"),trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_location"),type:"input",key:"location",offsetWidth:"320",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_location_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.form_edit_wx_payoutAmount"),type:"input",offsetWidth:"320",key:"payoutAmount"},{title:this.$t("InsurancePage.form_edit_wx_repairFees"),type:"input",offsetWidth:"320",key:"repairFees"},{title:this.$t("InsurancePage.form_edit_wx_accidentDescription"),type:"input",offsetWidth:"320",key:"accidentDescription"},{title:this.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:this.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:this.$store.getters.userData.tokenHead+this.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(t){t.code===e.$config.API_STATUS.OK&&e.$set(e.$refs.drawer.formData,"attachedPhoto",t.data.url)}}],formButton:[{name:this.$t("confirm.determine"),type:"confirm",class:"primary"},{name:this.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:this.$t("confirm.addSuccess")},confirmSubmitFn:function(e,t){e.payoutAmount=parseFloat(e.payoutAmount),e.repairFees=parseFloat(e.repairFees)}}},export:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,a,n){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(a){t.key===a&&"operate"!==t.key&&(e.fieldMap[a]=t.title)})});var i=e.$refs.table._data.searchParams,r=i.licenseNum,s=i.companyIds,o=i.type;if("confirm"===t){var c={fieldMap:e.fieldMap,licenseNum:r,companyIds:s?JSON.parse(s):[],type:o};e.$http.download("/accident/export?isToken=true",c),n()}else n()}}).catch(function(){})},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning"}).then(function(){var a=[];e.forEach(function(e,t){a[t]=e.accidentId}),t.$http.deleteApi("/accident/delete",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},diaClose:function(e){e&&this.$refs.table.initRequestTableData(),this.drawerDisplay=!1},drawerCallback:function(e,t,a,n){this[e.handlerCallback.funcName].call(function(){},t,a,n)}}},o=(a("EVil"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"accidentId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,"view-table-key":"accident",checked:"","column-view":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1),e._v(" "),e.drawerDisplay?a("drawer",{ref:"drawer",attrs:{size:"small","drawer-data":e.drawerData},on:{diaClose:e.diaClose,handlerCallback:e.drawerCallback}}):e._e()],1)},[],!1,null,"3e01a743",null);c.options.__file="accident.vue";t.default=c.exports},"22he":function(e,t,a){"use strict";a.r(t);var n=a("Xks0"),i=a("gPle"),r=a("YelX"),s={components:{purchase:n.default,renewal:i.default},mixins:[r.default],data:function(){return{activeName:"purchase"}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){var e=this.isPermissionShow("insuranceList"),t=this.isPermissionShow("insuranceListAdvance");e?this.activeName="purchase":t&&(this.activeName="renewal")}}},o=(a("R5fy"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isPermissionShow("insuranceList")?a("el-tab-pane",{attrs:{name:"purchase"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(e._s(e.$t("InsurancePage.right_title_2_1"))+" ")]),e._v(" "),"purchase"===e.activeName?a("purchase"):e._e()],1):e._e(),e._v(" "),e.isPermissionShow("insuranceListAdvance")?a("el-tab-pane",{attrs:{name:"renewal"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(e._s(e.$t("InsurancePage.right_title_2_2"))+" ")]),e._v(" "),"renewal"===e.activeName?a("renewal"):e._e()],1):e._e()],1)],1)])},[],!1,null,"54e2d331",null);c.options.__file="index.vue";t.default=c.exports},"2EUx":function(e,t,a){"use strict";a.r(t);var n=a("53CJ"),i=a("ulo4"),r=a("5JdB"),s={components:{times:n.default,mileage:i.default,remind:r.default},props:{permsData:{type:Array,default:function(){return[]}}},data:function(){return{activeName:"times"}},computed:{},created:function(){},mounted:function(){},methods:{}},o=(a("xfox"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"times"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(" "+e._s(e.$t("InsurancePage.right_title_1_1"))+" ")]),e._v(" "),"times"===e.activeName?a("times"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{name:"mileage"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(" "+e._s(e.$t("InsurancePage.right_title_1_2")))]),e._v(" "),"mileage"===e.activeName?a("mileage"):e._e()],1),e._v(" "),a("el-tab-pane",{attrs:{name:"remind"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(" "+e._s(e.$t("InsurancePage.right_title_1_3")))]),e._v(" "),"remind"===e.activeName?a("remind"):e._e()],1)],1)],1)])},[],!1,null,"150162b2",null);c.options.__file="index.vue";t.default=c.exports},"2sP9":function(e,t,a){"use strict";a.r(t);var n=a("Wiqz"),i=a("Y4hI"),r=a("YelX"),s={components:{record:n.default,remind:i.default},mixins:[r.default],data:function(){return{activeName:"record"}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){var e=this.isPermissionShow("annualList"),t=this.isPermissionShow("annualListAdvance");e?this.activeName="record":t&&(this.activeName="remind")}}},o=(a("amn2"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isPermissionShow("annualList")?a("el-tab-pane",{attrs:{name:"record"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(e._s(e.$t("InsurancePage.right_title_3_1"))+" ")]),e._v(" "),"record"===e.activeName?a("record"):e._e()],1):e._e(),e._v(" "),e.isPermissionShow("annualListAdvance")?a("el-tab-pane",{attrs:{name:"remind"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(e._s(e.$t("InsurancePage.right_title_3_2"))+" ")]),e._v(" "),"remind"===e.activeName?a("remind"):e._e()],1):e._e()],1)],1)])},[],!1,null,"2606f570",null);c.options.__file="index.vue";t.default=c.exports},"5JdB":function(e,t,a){"use strict";a.r(t);var n=a("BHIJ"),i=a("AlM9"),r=a("YelX"),s={components:{TableView:i.a,drawer:n.a},mixins:[r.default],data:function(){return{drawerDisplay:!1,drawerData:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("InsurancePage.licenseNum"),key:"licenseNum",minWidth:"130",type:"text"},{title:this.$t("InsurancePage.companyName"),key:"companyName",type:"text",minWidth:"130"},{title:this.$t("InsurancePage.deliveryDate"),key:"deliveryDate",minWidth:"130",type:"text"},{title:this.$t("InsurancePage.maintainMileage"),key:"maintainMileage",minWidth:"130",type:"text"},{title:this.$t("InsurancePage.searchControls_maintainType"),key:"maintainType",type:"tag",minWidth:"160",tags:[{value:1,text:this.$t("InsurancePage.searchControls_maintainType_key_1")},{value:2,text:this.$t("InsurancePage.searchControls_maintainType_key_2")},{value:3,text:this.$t("InsurancePage.searchControls_maintainType_key_3")}]},{title:this.$t("InsurancePage.advanceTime"),key:"advanceTime",minWidth:"220",type:"text"},{title:this.$t("operation.operation"),type:"operate",key:"operate",fixed:"right",width:"160",buttons:[]}],buttonControls:[],searchControls:[{type:"input",key:"licenseNum",placeholder:this.$t("view.license_num"),width:"200px"},{type:"treeSelect",key:"companyIds",valueKey:"companyId",placeholder:this.$t("view.searchControl_company"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"sysCompanyNodes",label:"name"},nodeKey:"companyId",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.companyTreeData},{type:"select",key:"maintainType",placeholder:this.$t("InsurancePage.searchControls_maintainType"),width:"200px",filterable:!0,clearable:!0,options:[{name:this.$t("InsurancePage.searchControls_maintainType_key_1"),value:1},{name:this.$t("InsurancePage.searchControls_maintainType_key_2"),value:2},{name:this.$t("InsurancePage.searchControls_maintainType_key_3"),value:3}]}],footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},params:null}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("maintainExport")&&this.tableOptions.buttonControls.push({text:this.$t("InsurancePage.buttonControls_export"),type:"null",icon:"el-icon-download",funcName:"export",dataStatus:!0}),this.tableOptions.footerButtons=[],this.isPermissionShow("maintainDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operateCommon.delete"),type:"danger",icon:"el-icon-delete",funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("maintainUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),icon:"iconfont Jamin_vehicle_icon_bj",type:"text",funcName:"edit"})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={licenseNum:e.licenseNum,companyIds:e.companyIds?JSON.parse(e.companyIds):[],maintainType:e.maintainType,type:2};this.$http.post("/maintain/list/advance?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){e.code===t.$config.API_STATUS.OK?(t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total):(t.tableOptions.data=[],t.tableOptions.total=0),t.tableOptions.loading=!1}).catch(function(){t.tableOptions.data=[],t.tableOptions.total=0,t.tableOptions.loading=!1}),this.params=e},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},edit:function(e){var t=this;this.$http.get("/maintain/"+e.maintainId).then(function(a){a.code===t.$config.API_STATUS.OK&&(e=a.data,t.editData(e))})},editData:function(e){var t=this,a=function(e,a,n){t.$refs.drawer.formData.deliveryDate&&t.$refs.drawer.formData.endDate?new Date(t.$refs.drawer.formData.deliveryDate).getTime()>new Date(t.$refs.drawer.formData.endDate).getTime()?n(new Error(t.$t("confirm.confirm"))):n():n()};this.drawerDisplay=!0,this.drawerData={staticData:e,isShow:!0,title:this.$t("InsurancePage.form_editTitle"),titleWidth:"120",data:{},defaultData:"",submitAction:"/maintain/update/"+e.maintainId,btnAlign:"center",formList:[{title:this.$t("InsurancePage.form_vehicleId"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",label:e.licenseNum,disabled:!0,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:this.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.form_maintainType"),type:"select",key:"maintainType",offsetWidth:"320",filterable:!0,options:{type:"default",list:[{name:this.$t("InsurancePage.searchControls_maintainType_key_1"),value:1},{name:this.$t("InsurancePage.searchControls_maintainType_key_2"),value:2},{name:this.$t("InsurancePage.searchControls_maintainType_key_3"),value:3}]},rules:[{required:!0,message:this.$t("InsurancePage.form_maintainType_placeholder"),trigger:"change"}]},{title:this.$t("InsurancePage.form_maintainMileage"),type:"input",key:"maintainMileage",offsetWidth:"320",rules:[{required:!0,message:this.$t("InsurancePage.form_maintainMileage_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.form_deliveryDate"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"deliveryDate",rules:[{required:!0,message:this.$t("InsurancePage.form_deliveryDate_placeholder"),trigger:"change"},{validator:a,trigger:"change"}]},{title:this.$t("InsurancePage.form_endDate"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"endDate",rules:[{required:!0,message:this.$t("InsurancePage.form_endDate_placeholder"),trigger:"change"},{validator:a,trigger:"change"}]},{title:this.$t("InsurancePage.form_cost"),type:"input",offsetWidth:"320",key:"cost"},{title:this.$t("InsurancePage.form_payer"),type:"input",offsetWidth:"320",key:"payer"},{title:this.$t("InsurancePage.form_handler"),type:"input",offsetWidth:"320",key:"handler"},{title:this.$t("InsurancePage.form_phone"),type:"input",offsetWidth:"320",key:"phone"},0===e.type?{title:this.$t("InsurancePage.form_advanceNum"),type:"input",offsetWidth:"320",key:"advanceNum",rules:[{required:!0,message:this.$t("InsurancePage.form_advanceNum_placeholder"),trigger:"blur"}]}:{title:this.$t("InsurancePage.form_intervalMileage"),type:"input",offsetWidth:"320",key:"intervalMileage",rules:[{required:!0,message:this.$t("InsurancePage.form_intervalMileage_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.form_content"),type:"input",offsetWidth:"320",key:"content"},{title:this.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"description"},{title:this.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:this.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",disabled:!0,accept:"image/jpeg,image/png",headers:{Authorization:this.$store.getters.userData.tokenHead+this.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(e){e.code===t.$config.API_STATUS.OK&&t.$set(t.$refs.drawer.formData,"attachedPhoto",e.data.url)}}],formButton:[{name:this.$t("confirm.determine"),type:"confirm",class:"primary"},{name:this.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:this.$t("confirm.editSuccess")}}},export:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,a,n){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(a){t.key===a&&"operate"!==t.key&&(e.fieldMap[a]=t.title)})});var i=e.params,r=i.licenseNum,s=i.companyIds,o=i.maintainType;if("confirm"===t){var c={type:2,fieldMap:e.fieldMap,licenseNum:r,companyIds:s?JSON.parse(s):[],maintainType:o};e.tableOptions.total<e.$store.getters.userData.realtimeVideoUrl?e.$http.download("/maintain/export?isToken=true",c):e.$http.post("/maintain/export/async",c),n()}else n()}}).catch(function(){})},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning"}).then(function(){var a=[];e.forEach(function(e,t){a[t]=e.maintainId}),t.$http.deleteApi("/maintain/delete",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},diaClose:function(e){e&&this.$refs.table.initRequestTableData(),this.drawerDisplay=!1},drawerCallback:function(e,t,a,n){this[e.handlerCallback.funcName].call(function(){},t,a,n)}}},o=(a("z9bg"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"maintainId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,"view-table-key":"remind",checked:"","column-view":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1),e._v(" "),e.drawerDisplay?a("drawer",{ref:"drawer",attrs:{size:"small","drawer-data":e.drawerData},on:{diaClose:e.diaClose,handlerCallback:e.drawerCallback}}):e._e()],1)},[],!1,null,"46c2210f",null);c.options.__file="remind.vue";t.default=c.exports},"6Y/C":function(e,t,a){},"7IPx":function(e,t,a){"use strict";a.r(t);var n=a("+puh"),i=a("YelX"),r={components:{accident:n.default},mixins:[i.default],data:function(){return{activeName:"accident"}},computed:{},created:function(){},mounted:function(){},methods:{}},s=(a("YUG9"),a("ZrdR")),o=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isPermissionShow("accidentList")?a("el-tab-pane",{attrs:{name:"accident"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(e._s(e.$t("InsurancePage.right_title_5_1"))+" ")]),e._v(" "),"accident"===e.activeName?a("accident"):e._e()],1):e._e()],1)],1)])},[],!1,null,"17d0bbe2",null);o.options.__file="index.vue";t.default=o.exports},"7eM9":function(e,t,a){"use strict";var n=a("BAZy");a.n(n).a},"9O69":function(e,t,a){"use strict";a.r(t);var n=a("unDg"),i=a.n(n),r=a("2EUx"),s=a("22he"),o=a("2sP9"),c=a("uWEW"),l=a("7IPx"),d=a("XVnh"),u=a("YelX"),p={name:"InsuranceAdminister",components:{maintain:r.default,insurance:s.default,yearlyInspection:o.default,repair:c.default,accident:l.default,notPerm:d.a},mixins:[u.default],data:function(){return{isShow:!0,routerPath:null,routerArr:[{icon:"iconfont Jamin_vehicle_icon_bygl",title:this.$t("InsurancePage.left_title_1"),path:"maintain"},{icon:"iconfont Jamin_vehicle_icon_bxxgl1",title:this.$t("InsurancePage.left_title_2"),path:"insurance"},{icon:"iconfont Jamin_vehicle_icon_cljc",title:this.$t("InsurancePage.left_title_3"),path:"yearlyInspection"},{icon:"iconfont Jamin_vehicle_icon_wxgl",title:this.$t("InsurancePage.left_title_4"),path:"repair"},{icon:"iconfont Jamin_vehicle_icon_sggl",title:this.$t("InsurancePage.left_title_5"),path:"accident"}],companyTreeData:[],carTreeData:[]}},computed:{permsRouterArr:function(){var e=this,t=[];return this.routerArr.forEach(function(a){switch(a.path){case"maintain":e.isPermissionShow("maintainList")&&t.push(a);break;case"insurance":(e.isPermissionShow("insuranceList")||e.isPermissionShow("insuranceListAdvance"))&&t.push(a);break;case"yearlyInspection":(e.isPermissionShow("annualList")||e.isPermissionShow("annualListAdvance"))&&t.push(a);break;case"repair":e.isPermissionShow("repairList")&&t.push(a);break;case"accident":e.isPermissionShow("accidentList")&&t.push(a);break;default:t.push(a)}}),t}},watch:{},created:function(){this.getCompanyTreeDataFn(),this.getCarTreeDataFn()},mounted:function(){},methods:{next:function(e){this.routerPath=e},handlePermissionShow:function(){this.isPermissionShow("maintainList")?this.routerPath="maintain":this.isPermissionShow("insuranceList")||this.isPermissionShow("insuranceListAdvance")?this.routerPath="insurance":this.isPermissionShow("annualList")||this.isPermissionShow("annualListAdvance")?this.routerPath="yearlyInspection":this.isPermissionShow("repairList")?this.routerPath="repair":this.isPermissionShow("accidentList")&&(this.routerPath="accident")},getCompanyTreeDataFn:function(){var e=this;this.$http.get("/company/treeList/InsuranceAdminister").then(function(t){t.code===e.$config.API_STATUS.OK&&(e.companyTreeData=t.data,e.isShow=!1,e.$nextTick(function(){e.isShow=!0}))})},getCarTreeDataFn:function(){var e=this;this.$http.get("/postion/insuranceAdminister/vehicleAllTreeList").then(function(t){t.code===e.$config.API_STATUS.OK&&(e.carTreeData=t.data.motorcades,e.forResetDevTreeFn(e.carTreeData))})},forResetDevTreeFn:function(e){var t=this;e.forEach(function(e){e.children=[].concat(i()(e.vehicles?e.vehicles:[]),i()(e.motorcades?e.motorcades:[])),e.children.length&&t.forResetDevTreeFn(e.children),e.vehicleId?(e.treeId="v_"+e.vehicleId,e.treeName=e.licenseNum):(e.treeId="m_"+e.motorcadeId,e.treeName=e.motorcadeName)})}}},h=(a("NGCT"),a("ZrdR")),m=Object(h.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-wrap"},[a("div",{staticClass:"main"},[e.permsRouterArr.length>0?a("div",{staticClass:"Insurance_title"},[a("h1",{staticClass:"Insurance_box"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_xclwb"}),e._v(" "),a("span",{staticClass:"text-ellipsis"},[e._v(e._s(e.$t("InsurancePage.title")))])]),e._v(" "),e._l(e.permsRouterArr,function(t){return a("div",{key:t.path,staticClass:"item-view",class:{active:e.routerPath===t.path},on:{click:function(a){e.next(t.path)}}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.routerPath===t.path,expression:"routerPath === item.path"}],staticClass:"bg-c-view"}),e._v(" "),a("i",{staticClass:"iconfont",class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.title))])])})],2):e._e(),e._v(" "),e.isShow?a("div",{staticClass:"Insurance_data"},["maintain"===e.routerPath?a("maintain"):e._e(),e._v(" "),"insurance"===e.routerPath?a("insurance"):e._e(),e._v(" "),"yearlyInspection"===e.routerPath?a("yearlyInspection"):e._e(),e._v(" "),"repair"===e.routerPath?a("repair"):e._e(),e._v(" "),"accident"===e.routerPath?a("accident"):e._e()],1):e._e(),e._v(" "),0!==e.permsRouterArr.length||e.$store.state.app.permsDataLoading?e._e():a("notPerm")],1)])},[],!1,null,"52abbc14",null);m.options.__file="InsuranceAdminister.vue";t.default=m.exports},"9k2h":function(e,t,a){},"9uUM":function(e,t,a){},BAZy:function(e,t,a){},Both:function(e,t,a){"use strict";var n=a("nZvi");a.n(n).a},EGpi:function(e,t,a){},EVil:function(e,t,a){"use strict";var n=a("9k2h");a.n(n).a},Lx5L:function(e,t,a){"use strict";var n=a("viqw");a.n(n).a},Lxz9:function(e,t,a){},NGCT:function(e,t,a){"use strict";var n=a("PY5h");a.n(n).a},PY5h:function(e,t,a){},R5fy:function(e,t,a){"use strict";var n=a("9uUM");a.n(n).a},W3aa:function(e,t,a){"use strict";var n=a("ZCNH");a.n(n).a},Wiqz:function(e,t,a){"use strict";a.r(t);var n=a("BHIJ"),i=a("AlM9"),r=a("YelX"),s={components:{TableView:i.a,drawer:n.a},mixins:[r.default],data:function(){return{drawerDisplay:!1,drawerData:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("InsurancePage.licenseNum"),key:"licenseNum",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.companyName"),key:"companyName",type:"text",minWidth:"180"},{title:this.$t("InsurancePage.annualAt"),key:"annualAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.timeoutAt_2"),key:"timeoutAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.price"),key:"price",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.handler"),key:"handler",minWidth:"180",type:"text"},{title:this.$t("operation.operation"),type:"operate",key:"operate",fixed:"right",width:"140",buttons:[]}],buttonControls:[],searchControls:[{type:"input",key:"licenseNum",placeholder:this.$t("view.license_num"),width:"200px"},{type:"treeSelect",key:"companyIds",valueKey:"companyId",placeholder:this.$t("view.searchControl_company"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"sysCompanyNodes",label:"name"},nodeKey:"companyId",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.companyTreeData}],footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("annualCreate")&&this.tableOptions.buttonControls.push({text:this.$t("InsurancePage.form_add_title_1"),type:"primary",round:!1,icon:"el-icon-plus",funcName:"increase"}),this.isPermissionShow("annualExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-download",funcName:"export"}),this.tableOptions.footerButtons=[],this.isPermissionShow("annualDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operation.delete"),type:"danger",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("annualList")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.detail"),icon:"iconfont Jamin_vehicle_ico_xq",type:"text",funcName:"detail"}),e>-1&&this.isPermissionShow("annualUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),icon:"iconfont Jamin_vehicle_icon_bj",type:"text",funcName:"edit"})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={licenseNum:e.licenseNum,companyIds:e.companyIds?JSON.parse(e.companyIds):[]};this.$http.post("/annual/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},edit:function(e){var t=this;this.$http.get("/annual/"+e.annualId).then(function(a){if(a.code===t.$config.API_STATUS.OK){e=a.data;var n=function(e,a,n){t.$refs.drawer.formData.annualAt&&t.$refs.drawer.formData.timeoutAt?new Date(t.$refs.drawer.formData.annualAt).getTime()>new Date(t.$refs.drawer.formData.timeoutAt).getTime()?n(new Error(t.$t("confirm.confirm_time_1"))):n():n()};t.drawerDisplay=!0,t.drawerData={staticData:e,isShow:!0,title:t.$t("InsurancePage.form_editTitle_1"),titleWidth:"120",data:{},defaultData:"",submitAction:"/annual/update/"+e.annualId,btnAlign:"center",formList:[{title:t.$t("InsurancePage.form_vehicleId_1"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",label:e.licenseNum,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:t.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:t.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.annualAt"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"annualAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_annualAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.timeoutAt_2"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"timeoutAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_timeoutAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.price"),type:"input",key:"price",offsetWidth:"320"},{title:t.$t("InsurancePage.form_payer"),type:"input",offsetWidth:"320",key:"payer"},{title:t.$t("InsurancePage.form_handler"),type:"input",offsetWidth:"320",key:"handler"},{title:t.$t("InsurancePage.form_phone"),type:"input",offsetWidth:"320",key:"phone"},{title:t.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:t.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:t.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:t.$store.getters.userData.tokenHead+t.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(e){e.code===t.$config.API_STATUS.OK&&t.$set(t.$refs.drawer.formData,"attachedPhoto",e.data.url)}}],formButton:[{name:t.$t("confirm.determine"),type:"confirm",class:"primary"},{name:t.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:t.$t("confirm.editSuccess")}}}})},detail:function(e){var t=this;this.$http.get("/annual/"+e.annualId).then(function(a){a.code===t.$config.API_STATUS.OK&&(e=a.data)}),this.drawerDisplay=!0,this.drawerData={staticData:e,isShow:!0,title:this.$t("InsurancePage.detail_annual_title"),titleWidth:"120",btnAlign:"center",formList:[{title:this.$t("InsurancePage.detail_annual_licenseNum"),type:"text",key:"licenseNum",offsetWidth:"320"},{title:this.$t("InsurancePage.annualAt"),type:"text",offsetWidth:"320",key:"annualAt"},{title:this.$t("InsurancePage.timeoutAt_2"),type:"text",offsetWidth:"320",key:"timeoutAt"},{title:this.$t("InsurancePage.price"),type:"text",key:"price",offsetWidth:"320"},{title:this.$t("InsurancePage.detail_payer"),type:"text",offsetWidth:"320",key:"payer"},{title:this.$t("InsurancePage.detail_handler"),type:"text",offsetWidth:"320",key:"handler"},{title:this.$t("InsurancePage.detail_phone"),type:"text",offsetWidth:"320",key:"phone"},{title:this.$t("InsurancePage.detail_remark"),type:"text",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.detail_attachedPhoto"),type:"imageView",offsetWidth:"320",key:"attachedPhoto"}]}},increase:function(){var e=this,t=function(t,a,n){e.$refs.drawer.formData.annualAt&&e.$refs.drawer.formData.timeoutAt?new Date(e.$refs.drawer.formData.annualAt).getTime()>new Date(e.$refs.drawer.formData.timeoutAt).getTime()?n(new Error(e.$("confirm.confirm_time_1"))):n():n()};this.drawerDisplay=!0,this.drawerData={isShow:!0,title:this.$t("InsurancePage.form_add_annual_title"),titleWidth:"120",data:{},defaultData:"",submitAction:"/annual/create",btnAlign:"center",formList:[{title:this.$t("InsurancePage.detail_annual_licenseNum"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:this.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.annualAt"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"annualAt",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_annualAt_placeholder"),trigger:"change"},{validator:t,trigger:"change"}]},{title:this.$t("InsurancePage.timeoutAt_2"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"timeoutAt",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_timeoutAt_placeholder"),trigger:"change"},{validator:t,trigger:"change"}]},{title:this.$t("InsurancePage.price"),type:"input",key:"price",offsetWidth:"320"},{title:this.$t("InsurancePage.detail_payer"),type:"input",offsetWidth:"320",key:"payer"},{title:this.$t("InsurancePage.detail_handler"),type:"input",offsetWidth:"320",key:"handler"},{title:this.$t("InsurancePage.detail_phone"),type:"input",offsetWidth:"320",key:"phone"},{title:this.$t("InsurancePage.detail_remark"),type:"input",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.detail_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:this.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:this.$store.getters.userData.tokenHead+this.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(t){t.code===e.$config.API_STATUS.OK&&e.$set(e.$refs.drawer.formData,"attachedPhoto",t.data.url)}}],formButton:[{name:this.$t("confirm.determine"),type:"confirm",class:"primary"},{name:this.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:this.$t("confirm.addSuccess")},confirmSubmitFn:function(e,t){e.price=parseFloat(e.price)}}},export:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,a,n){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(a){t.key===a&&"operate"!==t.key&&(e.fieldMap[a]=t.title)})});var i=e.$refs.table._data.searchParams,r=i.licenseNum,s=i.companyIds;if("confirm"===t){var o={fieldMap:e.fieldMap,licenseNum:r,companyIds:s?JSON.parse(s):[]};e.$http.download("/annual/export?isToken=true",o),n()}else n()}}).catch(function(){})},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning"}).then(function(){var a=[];e.forEach(function(e,t){a[t]=e.annualId}),t.$http.deleteApi("/annual/delete",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},diaClose:function(e){e&&this.$refs.table.initRequestTableData(),this.drawerDisplay=!1},drawerCallback:function(e,t,a,n){this[e.handlerCallback.funcName].call(function(){},t,a,n)}}},o=(a("Both"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"annualId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,"view-table-key":"record",checked:"","column-view":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1),e._v(" "),e.drawerDisplay?a("drawer",{ref:"drawer",attrs:{size:"small","drawer-data":e.drawerData},on:{diaClose:e.diaClose,handlerCallback:e.drawerCallback}}):e._e()],1)},[],!1,null,"c380697a",null);c.options.__file="record.vue";t.default=c.exports},Y4hI:function(e,t,a){"use strict";a.r(t);var n=a("BHIJ"),i=a("AlM9"),r=a("YelX"),s={components:{TableView:i.a,drawer:n.a},mixins:[r.default],data:function(){return{drawerDisplay:!1,drawerData:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("InsurancePage.licenseNum"),key:"licenseNum",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.companyName"),key:"companyName",type:"text",minWidth:"180"},{title:this.$t("InsurancePage.annualAt_1"),key:"annualAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.timeoutAt_2"),key:"timeoutAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.overDayNum"),key:"overDayNum",minWidth:"130",type:"slot",name:"overDayNum"},{title:this.$t("operation.operation"),type:"operate",key:"operate",fixed:"right",width:"160",buttons:[]}],buttonControls:[],searchControls:[{type:"input",key:"licenseNum",placeholder:this.$t("view.license_num"),width:"200px"},{type:"treeSelect",key:"companyIds",valueKey:"companyId",placeholder:this.$t("view.searchControl_company"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"sysCompanyNodes",label:"name"},nodeKey:"companyId",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.companyTreeData}],footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("annualExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-download",funcName:"export"}),this.tableOptions.footerButtons=[],this.isPermissionShow("annualDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operation.delete"),type:"danger",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("annualUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),icon:"iconfont Jamin_vehicle_icon_bj",type:"text",funcName:"edit"})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={licenseNum:e.licenseNum,companyIds:e.companyIds?JSON.parse(e.companyIds):[]};this.$http.post("/annual/list/advance?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},edit:function(e){var t=this;this.$http.get("/annual/"+e.annualId).then(function(a){if(a.code===t.$config.API_STATUS.OK){e=a.data;var n=function(e,a,n){t.$refs.drawer.formData.annualAt&&t.$refs.drawer.formData.timeoutAt?new Date(t.$refs.drawer.formData.annualAt).getTime()>new Date(t.$refs.drawer.formData.timeoutAt).getTime()?n(new Error(t.$t("InsurancePage.form_vehicleId_placeholder"))):n():n()};t.drawerDisplay=!0,t.drawerData={staticData:e,isShow:!0,title:t.$t("InsurancePage.form_editTitle_1"),titleWidth:"120",data:{},defaultData:"",submitAction:"/annual/update/"+e.annualId,btnAlign:"center",formList:[{title:t.$t("InsurancePage.form_vehicleId_1"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",label:e.licenseNum,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:t.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:t.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.annualAt"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"annualAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_annualAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.timeoutAt_2"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"timeoutAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_timeoutAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.price"),type:"input",key:"price",offsetWidth:"320"},{title:t.$t("InsurancePage.form_payer"),type:"input",offsetWidth:"320",key:"payer"},{title:t.$t("InsurancePage.form_handler"),type:"input",offsetWidth:"320",key:"handler"},{title:t.$t("InsurancePage.form_phone"),type:"input",offsetWidth:"320",key:"phone"},{title:t.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:t.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:t.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:t.$store.getters.userData.tokenHead+t.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(e){e.code===t.$config.API_STATUS.OK&&t.$set(t.$refs.drawer.formData,"attachedPhoto",e.data.url)}}],formButton:[{name:t.$t("confirm.determine"),type:"confirm",class:"primary"},{name:t.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:t.$t("confirm.editSuccess")}}}})},export:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,a,n){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(a){t.key===a&&"operate"!==t.key&&(e.fieldMap[a]=t.title)})});var i=e.$refs.table._data.searchParams,r=i.licenseNum,s=i.companyIds;if("confirm"===t){var o={fieldMap:e.fieldMap,licenseNum:r,companyIds:s?JSON.parse(s):[]};e.$http.download("/annual/export?isToken=true",o),n()}else n()}}).catch(function(){})},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning"}).then(function(){var a=[];e.forEach(function(e,t){a[t]=e.annualId}),t.$http.deleteApi("/annual/delete",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},diaClose:function(e){e&&this.$refs.table.initRequestTableData(),this.drawerDisplay=!1},drawerCallback:function(e,t,a,n){this[e.handlerCallback.funcName].call(function(){},t,a,n)}}},o=(a("7eM9"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"annualId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,"view-table-key":"remind",checked:"","column-view":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"}),e._v(" "),a("el-table-column",{attrs:{slot:"overDayNum",label:e.$t("InsurancePage.overDayNum"),align:"center",width:"130"},slot:"overDayNum",scopedSlots:e._u([{key:"default",fn:function(t){return null!==t.row.overDayNum?[t.row.overDayNum>=0?a("span",[e._v("\n          "+e._s(e.$t("common.remaining"))+" "+e._s(t.row.overDayNum)+" "+e._s(e.$t("common.day"))+"\n        ")]):e._e(),e._v(" "),t.row.overDayNum<0?a("span",[e._v("\n          "+e._s(e.$t("common.overdue"))+" "+e._s(Math.abs(t.row.overDayNum))+" "+e._s(e.$t("common.day"))+"\n        ")]):e._e()]:void 0}}])})],1),e._v(" "),e.drawerDisplay?a("drawer",{ref:"drawer",attrs:{size:"small","drawer-data":e.drawerData},on:{diaClose:e.diaClose,handlerCallback:e.drawerCallback}}):e._e()],1)},[],!1,null,"3f51b2de",null);c.options.__file="remind.vue";t.default=c.exports},YUG9:function(e,t,a){"use strict";var n=a("EGpi");a.n(n).a},ZCNH:function(e,t,a){},amn2:function(e,t,a){"use strict";var n=a("Lxz9");a.n(n).a},dYnp:function(e,t,a){},gPle:function(e,t,a){"use strict";a.r(t);var n=a("BHIJ"),i=a("AlM9"),r=a("YelX"),s={components:{TableView:i.a,drawer:n.a},mixins:[r.default],data:function(){return{drawerDisplay:!1,drawerData:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("InsurancePage.licenseNum"),key:"licenseNum",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.companyName"),key:"companyName",type:"text",minWidth:"180"},{title:this.$t("InsurancePage.insurCompany"),key:"insurCompany",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.insurType"),key:"type",type:"text",minWidth:"180"},{title:this.$t("InsurancePage.effectAt_1"),key:"effectAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.timeoutAt_1"),key:"timeoutAt",minWidth:"180",type:"text"},{title:this.$t("InsurancePage.overDayNum"),key:"overDayNum",minWidth:"130",type:"slot",name:"overDayNum"},{title:this.$t("operation.operation"),type:"operate",key:"operate",fixed:"right",width:"160",buttons:[]}],buttonControls:[],searchControls:[{type:"input",key:"licenseNum",placeholder:this.$t("view.license_num"),width:"200px"},{type:"treeSelect",key:"companyIds",valueKey:"companyId",placeholder:this.$t("view.searchControl_company"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"sysCompanyNodes",label:"name"},nodeKey:"companyId",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.companyTreeData},{type:"input",key:"type",placeholder:this.$t("InsurancePage.searchControls_insurType"),width:"200px"}],footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},params:null}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.isPermissionShow("insuranceExport")&&this.tableOptions.buttonControls.push({text:this.$t("InsurancePage.buttonControls_export"),type:"null",round:!1,icon:"el-icon-download",funcName:"export"}),this.isPermissionShow("insuranceDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operateCommon.delete"),type:"danger",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});e>-1&&this.isPermissionShow("insuranceUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),icon:"iconfont Jamin_vehicle_icon_bj",type:"text",funcName:"edit"})},endTime:function(e){this.$refs.drawer.formData.effectAt?new Date(e).getTime()<=new Date(this.$refs.drawer.formData.effectAt).getTime()&&(this.$message.error(this.$t("InsurancePage.form_rule_3")),this.$refs.drawer.formData.timeoutAt=null):(this.$message.error(this.$t("InsurancePage.form_rule_2")),this.$refs.drawer.formData.timeoutAt=null)},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={licenseNum:e.licenseNum,companyIds:e.companyIds?JSON.parse(e.companyIds):[],type:e.type};this.$http.post("/insurance/list/advance?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){t.tableOptions.loading=!1,e.code===t.$config.API_STATUS.OK?(t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total):(t.tableOptions.data=[],t.tableOptions.total=0)}).catch(function(){t.tableOptions.data=[],t.tableOptions.total=0,t.tableOptions.loading=!1}),this.params=e},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},edit:function(e){var t=this;this.$http.get("/insurance/"+e.insurId).then(function(a){if(a.code===t.$config.API_STATUS.OK){e=a.data;var n=function(e,a,n){t.$refs.drawer.formData.effectAt&&t.$refs.drawer.formData.timeoutAt?new Date(t.$refs.drawer.formData.effectAt).getTime()>new Date(t.$refs.drawer.formData.timeoutAt).getTime()?n(new Error(t.$t("confirm.confirm_time_1"))):n():n()};t.drawerDisplay=!0,t.drawerData={staticData:e,isShow:!0,title:t.$t("InsurancePage.form_edit_insur_title"),titleWidth:"120",data:{},defaultData:"",submitAction:"/insurance/update/"+e.insurId,btnAlign:"center",formList:[{title:t.$t("InsurancePage.form_edit_insur_vehicleId"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",label:e.licenseNum,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:t.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:t.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_edit_insur_insurCompany"),type:"input",key:"insurCompany",offsetWidth:"320",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_insurCompany_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_edit_insur_type"),type:"input",key:"type",offsetWidth:"320",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_type_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_edit_insur_insurNum"),type:"input",key:"insurNum",offsetWidth:"320",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_insurNum_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_edit_insur_price"),type:"input",key:"price",offsetWidth:"320",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_price_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_edit_insur_effectAt"),type:"dateSelect",offsetWidth:"320",valueFormat:"yyyy-MM-dd",key:"effectAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_effectAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.form_edit_insur_timeoutAt"),type:"dateSelect",valueFormat:"yyyy-MM-dd",offsetWidth:"320",key:"timeoutAt",handlerCallback:{target:"changeFunction",funcName:"endTime"},rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_timeoutAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.form_edit_insur_advanceNum"),type:"input",key:"advanceNum",offsetWidth:"320",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_insur_advanceNum_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_payer"),type:"input",offsetWidth:"320",key:"payer"},{title:t.$t("InsurancePage.form_handler"),type:"input",offsetWidth:"320",key:"handler"},{title:t.$t("InsurancePage.form_phone"),type:"input",offsetWidth:"320",key:"phone"},{title:t.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:t.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:t.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:t.$store.getters.userData.tokenHead+t.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(e){e.code===t.$config.API_STATUS.OK&&t.$set(t.$refs.drawer.formData,"attachedPhoto",e.data.url)}}],formButton:[{name:t.$t("confirm.determine"),type:"confirm",class:"primary"},{name:t.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:t.$t("confirm.editSuccess")}}}})},export:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,a,n){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(a){t.key===a&&"operate"!==t.key&&(e.fieldMap[a]=t.title)})});var i=e.params,r=i.licenseNum,s=i.companyIds,o=i.type;if("confirm"===t){var c={fieldMap:e.fieldMap,licenseNum:r,companyIds:s?JSON.parse(s):[],type:o};e.tableOptions.total<e.$store.getters.userData.realtimeVideoUrl?e.$http.download("/insurance/export?isToken=true",c):e.$http.post("/insurance/export/async",c),n()}else n()}}).catch(function(){})},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning"}).then(function(){var a=[];e.forEach(function(e,t){a[t]=e.insurId}),t.$http.deleteApi("/insurance/delete",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},diaClose:function(e){e&&this.$refs.table.initRequestTableData(),this.drawerDisplay=!1},drawerCallback:function(e,t,a,n){this[e.handlerCallback.funcName].call(function(){},t,a,n)}}},o=(a("W3aa"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"insurId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,"view-table-key":"renewal",checked:"","column-view":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"}),e._v(" "),a("el-table-column",{attrs:{slot:"overDayNum",label:e.$t("InsurancePage.overDayNum"),align:"center",width:"130"},slot:"overDayNum",scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.overDayNum>=0?a("span",[e._v("\n          "+e._s(e.$t("common.remaining"))+" "+e._s(t.row.overDayNum)+" "+e._s(e.$t("common.day"))+"\n        ")]):e._e(),e._v(" "),t.row.overDayNum<0?a("span",[e._v("\n          "+e._s(e.$t("common.overdue"))+" "+e._s(Math.abs(t.row.overDayNum))+" "+e._s(e.$t("common.day"))+"\n        ")]):e._e()]}}])})],1),e._v(" "),e.drawerDisplay?a("drawer",{ref:"drawer",attrs:{size:"small","drawer-data":e.drawerData},on:{diaClose:e.diaClose,handlerCallback:e.drawerCallback}}):e._e()],1)},[],!1,null,"05a850d4",null);c.options.__file="renewal.vue";t.default=c.exports},jcYt:function(e,t,a){e.exports=a.p+"static/img/not-perm.d97c442.png"},nGKN:function(e,t,a){"use strict";var n=a("ufIt");a.n(n).a},nZvi:function(e,t,a){},pyoC:function(e,t,a){"use strict";a.r(t);var n=a("BHIJ"),i=a("AlM9"),r=a("YelX"),s={components:{TableView:i.a,drawer:n.a},mixins:[r.default],data:function(){return{drawerDisplay:!1,drawerData:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("InsurancePage.licenseNum"),key:"licenseNum",minWidth:"130",type:"text"},{title:this.$t("InsurancePage.companyName"),key:"companyName",type:"text",minWidth:"160"},{title:this.$t("InsurancePage.serviceAt"),key:"serviceAt",minWidth:"160",type:"text"},{title:this.$t("InsurancePage.completeAt"),key:"completeAt",minWidth:"160",type:"text"},{title:this.$t("InsurancePage.serviceCompany"),key:"serviceCompany",minWidth:"130",type:"text"},{title:this.$t("InsurancePage.ws_type"),key:"type",type:"text",minWidth:"130"},{title:this.$t("InsurancePage.reason"),key:"reason",minWidth:"180",type:"text"},{title:this.$t("operation.operation"),type:"operate",key:"operate",fixed:"right",width:"140",buttons:[]}],buttonControls:[],searchControls:[{type:"input",key:"licenseNum",placeholder:this.$t("view.license_num"),width:"200px"},{type:"treeSelect",key:"companyIds",valueKey:"companyId",placeholder:this.$t("view.searchControl_company"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"sysCompanyNodes",label:"name"},nodeKey:"companyId",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.companyTreeData},{type:"input",key:"type",placeholder:this.$t("InsurancePage.ws_type"),width:"200px"}],footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("repairCreate")&&this.tableOptions.buttonControls.push({text:this.$t("InsurancePage.reason"),type:"primary",round:!1,icon:"el-icon-plus",funcName:"increase"}),this.isPermissionShow("repairExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-download",funcName:"export"}),this.tableOptions.footerButtons=[],this.isPermissionShow("repairDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operation.delete"),type:"danger",icon:"el-icon-delete",round:!1,funcName:"delete"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("repairList")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.detail"),icon:"iconfont Jamin_vehicle_ico_xq",type:"text",funcName:"detail"}),e>-1&&this.isPermissionShow("repairUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operation.edit"),icon:"iconfont Jamin_vehicle_icon_bj",type:"text",funcName:"edit"})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={licenseNum:e.licenseNum,companyIds:e.companyIds?JSON.parse(e.companyIds):[],type:e.type};this.$http.post("/repair/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},edit:function(e){var t=this;this.$http.get("/repair/"+e.serviceId).then(function(a){if(a.code===t.$config.API_STATUS.OK){e=a.data;var n=function(e,a,n){t.$refs.drawer.formData.serviceAt&&t.$refs.drawer.formData.completeAt?new Date(t.$refs.drawer.formData.serviceAt).getTime()>new Date(t.$refs.drawer.formData.completeAt).getTime()?n(new Error(t.$t("confirm.confirm_time_1"))):n():n()};t.drawerDisplay=!0,t.drawerData={staticData:e,isShow:!0,title:t.$t("InsurancePage.form_edit_wx_title"),titleWidth:"120",data:{},defaultData:"",submitAction:"/repair/update/"+e.serviceId,btnAlign:"center",formList:[{title:t.$t("InsurancePage.form_edit_wx_licenseNum"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",label:e.licenseNum,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:t.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:t.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:t.$t("InsurancePage.form_edit_wx_serviceAt"),type:"dateSelect",offsetWidth:"320",valueFormat:"yyyy-MM-dd",key:"serviceAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_wx_serviceAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.form_edit_wx_completeAt"),type:"dateSelect",offsetWidth:"320",valueFormat:"yyyy-MM-dd",key:"completeAt",rules:[{required:!0,message:t.$t("InsurancePage.form_edit_wx_completeAt_placeholder"),trigger:"change"},{validator:n,trigger:"change"}]},{title:t.$t("InsurancePage.ws_type"),type:"input",key:"type",offsetWidth:"320"},{title:t.$t("InsurancePage.serviceCompany"),type:"input",key:"serviceCompany",offsetWidth:"320"},{title:t.$t("InsurancePage.price"),type:"input",offsetWidth:"320",key:"price"},{title:t.$t("InsurancePage.form_edit_wx_repairman"),type:"input",offsetWidth:"320",key:"repairman"},{title:t.$t("InsurancePage.reason"),type:"input",offsetWidth:"320",key:"reason"},{title:t.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:t.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:t.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:t.$store.getters.userData.tokenHead+t.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(e){e.code===t.$config.API_STATUS.OK&&t.$set(t.$refs.drawer.formData,"attachedPhoto",e.data.url)}}],formButton:[{name:t.$t("confirm.determine"),type:"confirm",class:"primary"},{name:t.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:t.$t("confirm.editSuccess")}}}})},detail:function(e){var t=this;this.$http.get("/repair/"+e.serviceId).then(function(a){a.code===t.$config.API_STATUS.OK&&(e=a.data)}),this.drawerDisplay=!0,this.drawerData={staticData:e,isShow:!0,title:this.$t("InsurancePage.detail_wx_title"),titleWidth:"120",btnAlign:"center",formList:[{title:this.$t("InsurancePage.form_edit_wx_licenseNum"),type:"text",key:"licenseNum",offsetWidth:"320"},{title:this.$t("InsurancePage.form_edit_wx_serviceAt"),type:"text",offsetWidth:"320",key:"serviceAt"},{title:this.$t("InsurancePage.form_edit_wx_completeAt"),type:"text",offsetWidth:"320",key:"completeAt"},{title:this.$t("InsurancePage.ws_type"),type:"text",key:"type",offsetWidth:"320"},{title:this.$t("InsurancePage.serviceCompany"),type:"text",key:"serviceCompany",offsetWidth:"320"},{title:this.$t("InsurancePage.detail_wx_price"),type:"text",offsetWidth:"320",key:"price"},{title:this.$t("InsurancePage.form_edit_wx_repairman"),type:"text",offsetWidth:"320",key:"repairman"},{title:this.$t("InsurancePage.reason"),type:"text",offsetWidth:"320",key:"reason"},{title:this.$t("InsurancePage.form_description"),type:"text",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.form_attachedPhoto"),type:"imageView",offsetWidth:"320",key:"attachedPhoto"}]}},increase:function(){var e=this,t=function(t,a,n){e.$refs.drawer.formData.serviceAt&&e.$refs.drawer.formData.completeAt?new Date(e.$refs.drawer.formData.serviceAt).getTime()>new Date(e.$refs.drawer.formData.completeAt).getTime()?n(new Error(e.$("confirm.confirm_time_1"))):n():n()};this.drawerDisplay=!0,this.drawerData={isShow:!0,title:this.$t("InsurancePage.form_add_wx_title"),titleWidth:"120",data:{},defaultData:"",submitAction:"/repair/create",btnAlign:"center",formList:[{title:this.$t("InsurancePage.form_edit_wx_licenseNum"),type:"treeSelect",key:"vehicleId",valueKey:"vehicleId",offsetWidth:"320",treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.treeName.indexOf(e)}}},treeDefinedData:this.$parent.$parent.$parent.$parent.carTreeData,rules:[{required:!0,message:this.$t("InsurancePage.form_vehicleId_placeholder"),trigger:"blur"}]},{title:this.$t("InsurancePage.form_edit_wx_serviceAt"),type:"dateSelect",offsetWidth:"320",valueFormat:"yyyy-MM-dd",key:"serviceAt",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_serviceAt_placeholder"),trigger:"change"},{validator:t,trigger:"change"}]},{title:this.$t("InsurancePage.form_edit_wx_completeAt"),type:"dateSelect",offsetWidth:"320",valueFormat:"yyyy-MM-dd",key:"completeAt",rules:[{required:!0,message:this.$t("InsurancePage.form_edit_wx_completeAt_placeholder"),trigger:"change"},{validator:t,trigger:"change"}]},{title:this.$t("InsurancePage.ws_type"),type:"input",key:"type",offsetWidth:"320"},{title:this.$t("InsurancePage.serviceCompany"),type:"input",key:"serviceCompany",offsetWidth:"320"},{title:this.$t("InsurancePage.detail_wx_price"),type:"input",offsetWidth:"320",key:"price"},{title:this.$t("InsurancePage.form_edit_wx_repairman"),type:"input",offsetWidth:"320",key:"repairman"},{title:this.$t("InsurancePage.reason"),type:"input",offsetWidth:"320",key:"reason"},{title:this.$t("InsurancePage.form_description"),type:"input",offsetWidth:"320",key:"remark"},{title:this.$t("InsurancePage.form_attachedPhoto"),type:"imgUpload",offsetWidth:"320",action:this.$config.API_CONFIG.API_ROOT+"/file/upload/attachedPhoto",key:"attachedPhoto",accept:"image/jpeg,image/png",headers:{Authorization:this.$store.getters.userData.tokenHead+this.$store.getters.userData.token},showFileList:!1,beforeUpload:function(e){},onProgress:function(e){},onSuccess:function(t){t.code===e.$config.API_STATUS.OK&&e.$set(e.$refs.drawer.formData,"attachedPhoto",t.data.url)}}],formButton:[{name:this.$t("confirm.determine"),type:"confirm",class:"primary"},{name:this.$t("confirm.cancel"),type:"cancel",class:""}],message:{type:"success",message:this.$t("confirm.addSuccess")},confirmSubmitFn:function(e,t){e.price=parseFloat(e.price)}}},export:function(){var e=this;this.$confirm(this.$t("confirm.export"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(t,a,n){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(a){t.key===a&&"operate"!==t.key&&(e.fieldMap[a]=t.title)})});var i=e.$refs.table._data.searchParams,r=i.licenseNum,s=i.companyIds,o=i.type;if("confirm"===t){var c={fieldMap:e.fieldMap,licenseNum:r,companyIds:s?JSON.parse(s):[],type:o};e.$http.download("/repair/export?isToken=true",c),n()}else n()}}).catch(function(){})},delete:function(e){var t=this;this.$confirm(this.$t("confirm.del"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"warning"}).then(function(){var a=[];e.forEach(function(e,t){a[t]=e.serviceId}),t.$http.deleteApi("/repair/delete",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message({message:e.message,type:"success"}))})})},diaClose:function(e){e&&this.$refs.table.initRequestTableData(),this.drawerDisplay=!1},drawerCallback:function(e,t,a,n){this[e.handlerCallback.funcName].call(function(){},t,a,n)}}},o=(a("nGKN"),a("ZrdR")),c=Object(o.a)(s,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"serviceId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,"view-table-key":"repair",checked:"","column-view":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1),e._v(" "),e.drawerDisplay?a("drawer",{ref:"drawer",attrs:{size:"small","drawer-data":e.drawerData},on:{diaClose:e.diaClose,handlerCallback:e.drawerCallback}}):e._e()],1)},[],!1,null,"3c1c4134",null);c.options.__file="repair.vue";t.default=c.exports},uWEW:function(e,t,a){"use strict";a.r(t);var n=a("pyoC"),i=a("YelX"),r={components:{repair:n.default},mixins:[i.default],data:function(){return{activeName:"repair"}},computed:{},created:function(){},mounted:function(){},methods:{}},s=(a("Lx5L"),a("ZrdR")),o=Object(s.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.isPermissionShow("repairList")?a("el-tab-pane",{attrs:{name:"repair"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_vehicle_icon_ksnj"}),e._v(e._s(e.$t("InsurancePage.right_title_4_1"))+" ")]),e._v(" "),"repair"===e.activeName?a("repair"):e._e()],1):e._e()],1)],1)])},[],!1,null,"0d162504",null);o.options.__file="index.vue";t.default=o.exports},ufIt:function(e,t,a){},viqw:function(e,t,a){},xfox:function(e,t,a){"use strict";var n=a("6Y/C");a.n(n).a},z9bg:function(e,t,a){"use strict";var n=a("dYnp");a.n(n).a}}]);