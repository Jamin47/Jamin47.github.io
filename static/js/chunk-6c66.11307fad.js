(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6c66","Cy+k"],{"/sbf":function(e,t,i){},"21ia":function(e,t,i){e.exports=i.p+"static/img/17_cb_xs.75e5041.png"},"2LiM":function(e,t,i){e.exports=i.p+"static/img/16_jc_xs.ead5176.png"},"9ADt":function(e,t,i){e.exports=i.p+"static/img/01_kc_xs.85c19c4.png"},"APD+":function(e,t,i){"use strict";var a=i("/sbf");i.n(a).a},BcvX:function(e,t,i){"use strict";i.r(t);var a=i("bS4n"),r=i.n(a),o=i("ABCu"),c=i("Cy+k"),n=i("mSNy"),s=i("8t5x"),l={components:{treeView:o.a},mixins:[c.default],data:function(){return{drawerObj:{isShow:!1,title:n.a.t("vehicleAdminister.quickly_add_vehicle"),size:"500px",formLabelWidth:"140px",formWidth:"280px",loading:!1},formData:{createType:3,deviceIds:[],deviceNum:null,licenseNum:null,simNum:null,licenseColor:2,motorcadeId:null,motorcadeName:null,deviceType:1,channelNum:0,channelNames:[],icon:"02_czc_"},rules:{deviceNum:[{required:!0,message:n.a.t("vehicleAdminister.device_num_rule"),trigger:"blur"}],licenseNum:[{required:!0,message:n.a.t("vehicleAdminister.enter_license_plate_number"),trigger:"blur"}],motorcadeId:[{required:!0,message:n.a.t("devicePage.form_rule_message_2"),trigger:"blur"}]},channeObj:{},deviceList:[],deviceType:[],licenseColor:[],devNumList:[],channelTotal:37,deviceNumPopover:!1,devNumListSearchStatus:!1,devNumListSearch:"",motorcadeTreeData:[],motorcadeOption:{motorcadeId:null,name:null,filter:"",treeOption:{defaultProps:{children:"opMotorcadeNodes",label:"name"},nodeKey:"motorcadeId",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}}},iconList:[{name:n.a.t("vehicleAdminister.bus"),value:"01_kc_",iconUrl:i("9ADt")},{name:n.a.t("vehicleAdminister.taxi"),value:"02_czc_",iconUrl:i("yEz2")},{name:n.a.t("vehicleAdminister.school_bus"),value:"03_xc_",iconUrl:i("l+Cu")},{name:n.a.t("vehicleAdminister.truck"),value:"04_hc_",iconUrl:i("j+9R")},{name:n.a.t("vehicleAdminister.container_truck"),value:"05_jzxc_",iconUrl:i("qOkx")},{name:n.a.t("vehicleAdminister.tank_car"),value:"06_gc_",iconUrl:i("YWMK")},{name:n.a.t("vehicleAdminister.tractor_text_1"),value:"07_qyc_",iconUrl:i("lpko")},{name:n.a.t("vehicleAdminister.trailer"),value:"08_gc_",iconUrl:i("bqyo")},{name:n.a.t("vehicleAdminister.flatbed_car"),value:"09_pbc_",iconUrl:i("L+qT")},{name:n.a.t("vehicleAdminister.concrete_mixing_tank_truck"),value:"10_jbgc_",iconUrl:i("aL2/")},{name:n.a.t("vehicleAdminister.dangerous_goods_transport_vehicle"),value:"11_wxpysc_",iconUrl:i("fZjX")},{name:n.a.t("vehicleAdminister.agricultural_vehicles"),value:"12_nyc_",iconUrl:i("p0cv")},{name:n.a.t("vehicleAdminister.tractor_text_2"),value:"13_tlj_",iconUrl:i("iREr")},{name:n.a.t("vehicleAdminister.sanitation_garbage_truck"),value:"14_hwljc_",iconUrl:i("yrqw")},{name:n.a.t("vehicleAdminister.muck_truck"),value:"15_ztc_",iconUrl:i("La+X")},{name:n.a.t("vehicleAdminister.police_car"),value:"16_jc_",iconUrl:i("2LiM")},{name:n.a.t("vehicleAdminister.vessel"),value:"17_cb_",iconUrl:i("21ia")}]}},computed:r()({},Object(s.b)(["elNorms"])),watch:{"motorcadeOption.filter":function(e){this.$refs._motorcade_type_tree.$refs.sonTree.filter(e)},"formData.channelNum":function(e){this.channeObj={};for(var t=[],i=0;i<e;i++)this.$set(this.channeObj,i,"CH"+(i+1)),t.push(this.channeObj[i]);this.formData.channelNames=t}},created:function(){this.getCodesFn(),this.isPermissionShow("vehicleFastCreate")&&this.getMotorcadeTreeDataFn()},methods:{getCodesFn:function(){var e=this;this.$http.get("/dict/list/codes",{dicCodes:"deviceType, licenseColor"}).then(function(t){if(t.code===e.$config.API_STATUS.OK)for(var i in t.data)e[i]=t.data[i].map(function(e){return{value:e.itemName,label:e.itemValue}});e.getDevNumDataFn()})},getDevNumDataFn:function(){var e=this;this.$http.get("/device/list/vehicle/all").then(function(t){t.code===e.$config.API_STATUS.OK&&t.data&&(e.devNumList=t.data.map(function(t){return{deviceNum:t.deviceNum,companyId:t.companyId,companyName:t.companyName,deviceType:t.deviceType,deviceTypeName:e.deviceTypeOfNameFn(t.deviceType)}}))})},deviceTypeOfNameFn:function(e){for(var t="",i=0;i<this.deviceType.length;i++){var a=this.deviceType[i];if(a.value===e){t=a.label;break}}return t},getMotorcadeTreeDataFn:function(){var e=this;this.$http.get("/vehicle/motorcade/treeList").then(function(t){t.code===e.$config.API_STATUS.OK&&(e.motorcadeTreeData=t.data[0].opMotorcadeNodes)})},openFn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;this.formData=this.$options.data().formData,this.motorcadeOption=this.$options.data().motorcadeOption,this.deviceNumPopover=!1,this.devNumListSearchStatus=!1,this.devNumListSearch="",this.deviceList=[],this.formData.createType=t,Array.isArray(e)?(this.deviceList=e,this.formData.deviceIds=e.map(function(e){return e.deviceId})):this.formData.deviceNum=e.deviceNum,1===t&&(e.deviceLicenseNum?this.formData.licenseNum=e.deviceLicenseNum:this.formData.licenseNum=e.deviceNum),this.drawerObj.isShow=!0},motorcadeNodeClick:function(e,t,i){this.$set(this[i],"motorcadeId",e.motorcadeId),this.$set(this[i],"motorcadeName",e.name),this.$set(this.motorcadeOption,"motorcadeId",e.motorcadeId),this.$set(this.motorcadeOption,"name",e.name),this.$refs._motorcade_tree_select.blur()},deviceNumTableRowDblclickFn:function(e){this.formData.deviceNum=e.deviceNum,this.deviceNumPopover=!1},filterDevNumList:function(){var e=this;return this.devNumList.filter(function(t){return!e.devNumListSearch||t.deviceNum.toLowerCase().includes(e.devNumListSearch.toLowerCase())})},submitFn:function(){var e=this;this.$refs._form.validate(function(t){t&&(e.drawerObj.loading=!0,e.$http.post("/vehicle/fastCreate",e.formData).then(function(t){e.drawerObj.loading=!1,t.code===e.$config.API_STATUS.OK&&(e.drawerObj.isShow=!1,e.$message.success(t.message),e.$parent.emitRequestFn&&e.$parent.emitRequestFn())}).catch(function(){e.drawerObj.loading=!1}))})}}},d=(i("APD+"),i("ZrdR")),m=Object(d.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{title:e.drawerObj.title,visible:e.drawerObj.isShow,size:e.drawerObj.size,"wrapper-closable":!1},on:{"update:visible":function(t){e.$set(e.drawerObj,"isShow",t)}}},[i("div",{staticClass:"drawer-body"},[i("el-form",{ref:"_form",attrs:{model:e.formData,rules:e.rules,size:e.elNorms.formSize,"label-width":e.drawerObj.formLabelWidth}},[3===e.formData.createType?i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.equipment_number")+"："}},[i("div",[e._v("已选择未注册设备 "+e._s(e.deviceList.length)+" 个")])]):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:this.$t("vehicleAdminister.equipment_number")+"：",prop:"deviceNum"}},[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size,disabled:!0},model:{value:e.formData.deviceNum,callback:function(t){e.$set(e.formData,"deviceNum",t)},expression:"formData.deviceNum"}},[e._e()],2)],1):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_number")+"：",prop:"licenseNum"}},[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.licenseNum,callback:function(t){e.$set(e.formData,"licenseNum",t)},expression:"formData.licenseNum"}})],1):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:this.$t("vehicleAdminister.sim_number")+"："}},[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.simNum,callback:function(t){e.$set(e.formData,"simNum",t)},expression:"formData.simNum"}})],1):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_color")+"：",prop:"licenseColor"}},[i("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size,filterable:""},model:{value:e.formData.licenseColor,callback:function(t){e.$set(e.formData,"licenseColor",t)},expression:"formData.licenseColor"}},e._l(e.licenseColor,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.fleet")+"：",prop:"motorcadeId"}},[i("el-select",{ref:"_motorcade_tree_select",style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.motorcadeId,callback:function(t){e.$set(e.formData,"motorcadeId",t)},expression:"formData.motorcadeId"}},[i("el-option",{staticClass:"tree-select",attrs:{value:e.formData.motorcadeId,label:e.formData.motorcadeName}},[i("div",{staticClass:"input-query",on:{click:function(e){e.stopPropagation()}}},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.fleet"),"prefix-icon":"el-icon-search"},model:{value:e.motorcadeOption.filter,callback:function(t){e.$set(e.motorcadeOption,"filter","string"==typeof t?t.trim():t)},expression:"motorcadeOption.filter"}})],1),e._v(" "),i("tree-view",{ref:"_motorcade_type_tree",attrs:{"tree-data":e.motorcadeOption.treeOption,"defined-data":e.motorcadeTreeData},on:{"node-click":function(t){e.motorcadeNodeClick(arguments[0],arguments[1],"formData")}},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("devicePage.device_type"),prop:"deviceType"}},[i("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},on:{change:function(t){e.formData.channelNum=0}},model:{value:e.formData.deviceType,callback:function(t){e.$set(e.formData,"deviceType",t)},expression:"formData.deviceType"}},e._l(e.deviceType,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),1===e.formData.deviceType?i("el-form-item",{attrs:{label:e.$t("devicePage.channel_number"),prop:"deviceType"}},[i("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.channelNum,callback:function(t){e.$set(e.formData,"channelNum",t)},expression:"formData.channelNum"}},e._l(e.channelTotal,function(e){return i("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),e._v(" "),e._l(e.channeObj,function(t,a){return i("el-input",{key:a,staticClass:"channel-input",attrs:{size:e.elNorms.size},model:{value:e.channeObj[a],callback:function(t){e.$set(e.channeObj,a,t)},expression:"channeObj[key]"}})})],2):e._e(),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_icon")}},[i("el-radio-group",{staticStyle:{width:"340px"},model:{value:e.formData.icon,callback:function(t){e.$set(e.formData,"icon",t)},expression:"formData.icon"}},e._l(e.iconList,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[i("img",{staticStyle:{height:"28px","vertical-align":"middle"},attrs:{src:e.iconUrl,alt:""}})])}))],1)],1)],1),e._v(" "),i("div",{staticClass:"footer-button"},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle,loading:e.drawerObj.loading,disabled:e.drawerObj.loading},on:{click:e.submitFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerObj.isShow=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)])},[],!1,null,"4745a3e7",null);m.options.__file="vehicleQuicklyAdd.vue";t.default=m.exports},"Cy+k":function(e,t,i){"use strict";i.r(t);var a=i("bS4n"),r=i.n(a),o=i("8t5x");t.default={data:function(){return{permissionList:{deviceList:"/device/list",deviceDetail:"/device/get/**",deviceCreate:"/device/create",deviceUpdate:"/device/update/**",deviceExport:"/device/export",deviceDelete:"/device/delete",vehicleFastCreate:"/vehicle/fastCreate",upgradeList:"/upgrade/list",upgradeListTask:"/upgrade/list/task",upgradeListRecord:"/upgrade/list/record",upgradeUpdate:"/upgrade/update/**",upgradeCreate:"/upgrade/create",upgradeDelete:"/upgrade/delete",upgradePush:"/upgrade/push",resetUpgradePush:"/upgrade/push/**",upgradeTaskPush:"/upgrade/task/push",upgradeTaskFailPush:"/upgrade/task/fail/push",deviceSettings:"/device/settings",deviceControlSetPassword:"/device/control/set/password",deviceControl:"/device/control",deviceControlDiskFormat:"/device/control/disk/format",deviceControlVehicle:"/device/control/vehicle",deviceTerminalText:"/device/terminal/text",deviceTerminalEvents:"/device/terminal/events",deviceTerminalQuestion:"/device/terminal/question",deviceTerminalNews:"/device/terminal/news",deviceTerminalCamera:"/device/terminal/camera",deviceTerminalSoundRecord:"/device/terminal/soundRecord",deviceTerminalVoiceMonitor:"/device/terminal/voiceMonitor",deviceOrderOffline:"/device/order/offline",deviceOrderOfflineExport:"/device/order/offline/export",deviceOrderDelete:"/device/order/delete",deviceOrderHistory:"/device/order/history",deviceOrderHistoryExport:"/device/order/history/export",simList:"/sim/list",simCreate:"/sim/create",simUpdate:"/sim/update/**",simDelete:"/sim/delete",simExport:"/sim/export"}}},computed:r()({},Object(o.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[e])}}}},"L+qT":function(e,t,i){e.exports=i.p+"static/img/09_pbc_xs.063916b.png"},"La+X":function(e,t,i){e.exports=i.p+"static/img/15_ztc_xs.1ec259e.png"},YWMK:function(e,t,i){e.exports=i.p+"static/img/06_gc_xs.aa3ede2.png"},"aL2/":function(e,t,i){e.exports=i.p+"static/img/10_jbgc_xs.2448c10.png"},bqyo:function(e,t,i){e.exports=i.p+"static/img/08_gc_xs.c6fad11.png"},fZjX:function(e,t,i){e.exports=i.p+"static/img/11_wxpysc_xs.343b1b8.png"},iREr:function(e,t,i){e.exports=i.p+"static/img/13_tlj_xs.f78b43e.png"},"j+9R":function(e,t,i){e.exports=i.p+"static/img/04_hc_xs.b203d79.png"},"l+Cu":function(e,t,i){e.exports=i.p+"static/img/03_xc_xs.0163428.png"},lpko:function(e,t,i){e.exports=i.p+"static/img/07_qyc_xs.68f60c4.png"},p0cv:function(e,t,i){e.exports=i.p+"static/img/12_nyc_xs.9d68257.png"},qOkx:function(e,t,i){e.exports=i.p+"static/img/05_jzxc_xs.dca079b.png"},yEz2:function(e,t,i){e.exports=i.p+"static/img/02_czc_xs.f40cc07.png"},yrqw:function(e,t,i){e.exports=i.p+"static/img/14_hwljc_xs.9be384a.png"}}]);