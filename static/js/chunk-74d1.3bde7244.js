(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-74d1"],{"+S+W":function(e,a,t){},"5A9p":function(e,a,t){"use strict";var r=t("+S+W");t.n(r).a},"D/H8":function(e,a,t){"use strict";t.r(a);var r={data:function(){return{elNorms:this.$store.getters.elNorms,handleDrawerObj:{isShow:!1,infoView:!0,operationView:!0,data:null,formData:{solveMethod:0,newsDisplay:[],alarmContent:"",solveDesc:""},newsDisplayConfig:[{key:0,name:"紧急",checkedValue:"10",defaultValue:"00"},{key:1,name:"终端显示器显示",checkedValue:"1",defaultValue:"0"},{key:2,name:"终端TTS播读",checkedValue:"1",defaultValue:"0"},{key:3,name:"广告屏显示",checkedValue:"1",defaultValue:"0"}],rules:{solveMethod:[{required:!0,message:"请选择处理方式",trigger:"change"}],solveDesc:[{required:!0,message:"请输入处理描述",trigger:"blur"}]}}}},methods:{openFn:function(e){this.handleDrawerObj.data=e,this.handleDrawerObj.isShow=!0},itemShow:function(e){this.handleDrawerObj[e]=!this.handleDrawerObj[e]},valueOfNameFn:function(e){var a="";return e&&this.$parent.alarmSelect&&this.$parent.alarmSelect.forEach(function(t){e===t.value&&(a=t.text)}),a},handleSubmit:function(){var e=this;this.$refs.handleForm.validate(function(a){if(!a)return!1;var t="";e.handleDrawerObj.newsDisplayConfig.forEach(function(a){-1!==e.handleDrawerObj.formData.newsDisplay.indexOf(a.key)?t+=a.checkedValue:t+=a.defaultValue}),t+="000";var r={alarmType:e.handleDrawerObj.data.alarmType,phone:e.handleDrawerObj.data.phone,startTime:e.handleDrawerObj.data.startTime,vehicleId:e.handleDrawerObj.data.vehicleId,solveMethod:e.handleDrawerObj.formData.solveMethod,newsDisplay:t,alarmContent:e.handleDrawerObj.formData.alarmContent,solveDesc:e.handleDrawerObj.formData.solveDesc,solveStatus:0,alarmSign:1};if(0===r.solveMethod)e.$http.post("/alarm/realtime/solveAlarm",r).then(function(a){a.code===e.$config.API_STATUS.OK&&(e.$parent.requestSuccessFn&&e.$parent.requestSuccessFn(),e.handleDrawerObj.isShow=!1,e.$message.success("操作成功！"))});else{var l=1===r.solveMethod?"您确认要解除该报警？":"您确认该报警为误报误判？";e.$confirm(l,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.post("/alarm/realtime/solveAlarm",r).then(function(a){a.code===e.$config.API_STATUS.OK&&(e.$parent.requestSuccessFn&&e.$parent.requestSuccessFn(),e.handleDrawerObj.isShow=!1,e.$message.success("操作成功！"))})}).catch(function(){e.$message({type:"info",message:"已取消"})})}})}}},l=(t("5A9p"),t("ZrdR")),s=Object(l.a)(r,function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("el-drawer",{attrs:{title:"报警处理",visible:e.handleDrawerObj.isShow,"wrapper-closable":!1,size:"700px",direction:"rtl"},on:{"update:visible":function(a){e.$set(e.handleDrawerObj,"isShow",a)}}},[e.handleDrawerObj.isShow?t("div",{staticStyle:{margin:"10px 0 120px 0"}},[t("div",{staticClass:"formItem"},[t("div",{staticClass:"formTitle",on:{click:function(a){e.itemShow("infoView")}}},[t("div",[e._v("相关报警信息")]),e._v(" "),e.handleDrawerObj.infoView?t("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v("收起")]):t("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v("展开")])],1),e._v(" "),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.handleDrawerObj.infoView,expression:"handleDrawerObj.infoView"}]},[e.handleDrawerObj.data?t("el-form",{attrs:{size:"mini",model:e.handleDrawerObj.data,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"车牌号码："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.handleDrawerObj.data.licenseNum))])]),e._v(" "),t("el-form-item",{attrs:{label:"所属公司："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.handleDrawerObj.data.companyName||""))])]),e._v(" "),t("el-form-item",{attrs:{label:"报警级别："}},[1===e.handleDrawerObj.data.alarmLevel?t("div",{staticClass:"text-ellipsis d-c"},[e._v("一级报警")]):e._e(),e._v(" "),2===e.handleDrawerObj.data.alarmLevel?t("div",{staticClass:"text-ellipsis d-c"},[e._v("二级报警")]):e._e()]),e._v(" "),t("el-form-item",{attrs:{label:"车辆速度："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.handleDrawerObj.data.alarmSpeed))])]),e._v(" "),t("el-form-item",{attrs:{label:"报警类型："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.valueOfNameFn(e.handleDrawerObj.data.alarmType)))])]),e._v(" "),t("el-form-item",{attrs:{label:"报警时间："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.handleDrawerObj.data.startTime)+" - "+e._s(e.handleDrawerObj.data.endTime))])]),e._v(" "),t("el-form-item",{attrs:{label:"车辆状态："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.handleDrawerObj.data.vehicleStauts))])]),e._v(" "),t("el-form-item",{attrs:{label:"报警位置："}},[t("div",{staticClass:"text-ellipsis"},[e._v(e._s(e.handleDrawerObj.data.location))])])],1):e._e()],1)])],1),e._v(" "),t("div",{staticClass:"formItem"},[t("div",{staticClass:"formTitle",on:{click:function(a){e.itemShow("operationView")}}},[t("div",[e._v("报警处理")]),e._v(" "),e.handleDrawerObj.operationView?t("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v("收起")]):t("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v("展开")])],1),e._v(" "),t("el-collapse-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.handleDrawerObj.operationView,expression:"handleDrawerObj.operationView"}]},[t("el-form",{ref:"handleForm",staticClass:"demo-form-inline",attrs:{size:e.elNorms.fromSize,model:e.handleDrawerObj.formData,rules:e.handleDrawerObj.rules,"label-width":"130px"}},[t("el-form-item",{attrs:{label:"处理方式：",prop:"solveMethod"}},[t("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.handleDrawerObj.formData.solveMethod,callback:function(a){e.$set(e.handleDrawerObj.formData,"solveMethod",a)},expression:"handleDrawerObj.formData.solveMethod"}},[t("el-radio",{attrs:{label:0}},[e._v("文本消息")]),e._v(" "),t("el-radio",{attrs:{label:1}},[e._v("解除报警")]),e._v(" "),t("el-radio",{attrs:{label:2}},[e._v("误报误判")])],1)],1),e._v(" "),0===e.handleDrawerObj.formData.solveMethod?t("el-form-item",{attrs:{label:"消息展示："}},[t("el-checkbox-group",{attrs:{size:e.elNorms.size},model:{value:e.handleDrawerObj.formData.newsDisplay,callback:function(a){e.$set(e.handleDrawerObj.formData,"newsDisplay",a)},expression:"handleDrawerObj.formData.newsDisplay"}},[t("el-checkbox",{attrs:{label:0}},[e._v("紧急")]),e._v(" "),t("el-checkbox",{attrs:{label:1}},[e._v("终端显示器显示")]),e._v(" "),t("el-checkbox",{attrs:{label:2}},[e._v("终端TTS播读")]),e._v(" "),t("el-checkbox",{attrs:{label:3}},[e._v("广告屏显示")])],1)],1):e._e(),e._v(" "),0===e.handleDrawerObj.formData.solveMethod?t("el-form-item",{attrs:{label:"消息内容："}},[t("el-input",{staticStyle:{width:"540px"},attrs:{type:"textarea",rows:5,size:e.elNorms.size,maxlength:"2000",placeholder:"请输入发送内容，内容为空时不下发消息"},model:{value:e.handleDrawerObj.formData.alarmContent,callback:function(a){e.$set(e.handleDrawerObj.formData,"alarmContent","string"==typeof a?a.trim():a)},expression:"handleDrawerObj.formData.alarmContent"}})],1):e._e(),e._v(" "),0===e.handleDrawerObj.formData.solveMethod?t("el-form-item",{attrs:{label:"处理描述：",prop:"solveDesc"}},[t("el-input",{staticStyle:{width:"540px"},attrs:{type:"textarea",rows:5,size:e.elNorms.size,maxlength:"2000","show-word-limit":"",placeholder:"请输入处理描述，内容不超过2000字"},model:{value:e.handleDrawerObj.formData.solveDesc,callback:function(a){e.$set(e.handleDrawerObj.formData,"solveDesc","string"==typeof a?a.trim():a)},expression:"handleDrawerObj.formData.solveDesc"}})],1):e._e()],1)],1)])],1),e._v(" "),t("div",{staticClass:"footBtn",staticStyle:{width:"700px"}},[t("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.handleSubmit}},[e._v("确定")]),e._v(" "),t("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(a){e.handleDrawerObj.isShow=!1}}},[e._v("取消")])],1)]):e._e()])},[],!1,null,"4ae3a762",null);s.options.__file="handle-drawer.vue";a.default=s.exports}}]);