(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5da3","chunk-49e5","Cili"],{Cili:function(e,t,a){"use strict";a.r(t);var r=a("bS4n"),i=a.n(r),l=a("8t5x");t.default={data:function(){return{permissionList:{alarmPreviewTodayRisk:"/alarm/preview/today/risk",alarmPreviewYesterdayScore:"/alarm/preview/yesterday/score",alarmPreviewTodayType:"/alarm/preview/today/type",alarmPreviewTodayLocation:"/alarm/preview/today/location",alarmPreviewTodayAnalyze:"/alarm/preview/today/analyze",alarmPreviewTodayHandle:"/alarm/preview/today/handle",alarmPreviewTodayVehicle:"/alarm/preview/today/vehicle",alarmRealtimeList:"/alarm/realtime/list",alarmRealtimeExport:"/alarm/realtime/export",alarmRealtimeAgg:"alarm/realtime/agg",alarmSummaryTypeList:"/alarm/summary/type/list/**",alarmRealtimeListCommonDetail:"alarm/realtime/list/common/detail",alarmPopUpSettingCreateOrUpdate:"/alarmPopUp/setting/createOrUpdate",alarmRealtimeSolveAlarm:"/alarm/realtime/solveAlarm",alarmSettingList:"/alarm/setting/list",alarmSettingUpdate:"/alarm/setting/update/**",alarmSettingDelete:"/alarm/setting/delete",alarmSettingCreate:"/alarm/setting/create",alarmStatisticsListVehicle:"/alarm/statistics/list/vehicle",alarmStatisticsExportVehicle:"/alarm/statistics/export/vehicle",alarmStatisticsListCompany:"/alarm/statistics/list/company",alarmStatisticsExportCompany:"/alarm/statistics/export/company"}}},computed:i()({},Object(l.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[e])}}}},DtAb:function(e,t,a){"use strict";a.r(t);var r=a("bS4n"),i=a.n(r),l=a("ABCu"),s=a("8t5x"),n={name:"SecuritySetDrawer",components:{treeView:l.a},data:function(){var e=function(e,t,a){if(""===t)a(new Error("请输入触发规则"));else try{var r=Number(t);"ruleTime"===e.fullField&&(r>0&&r<=600?a():a(new Error("触发时间请输入1-600数字"))),"ruleCount"===e.fullField&&(r>0&&r<=10?a():a(new Error("触发次数请输入1-10数字")))}catch(e){a(new Error("输入正确的数字格式"))}};return{itemStyle:"width: 352px;",drawerObj:{isShow:!1,isAdd:!0,title:"添加主动安全报警设置",editData:null,attachData:{motorcadeId:null},formData:{alarmType:"",ruleTime:"",ruleCount:"",riskLevel:null,deduction:"",childEffect:0,reminder:0,status:1,autoHandler:1,handlerType:0,newsDisplay:[],alarmContent:"",solveDesc:""},rules:{alarmType:[{required:!0,message:"请选择报警类型",trigger:"change"}],ruleTime:[{required:!0,message:"请输入触发规则",trigger:"blur"},{validator:e,trigger:"blur"}],ruleCount:[{required:!0,message:"请输入触发规则",trigger:"blur"},{validator:e,trigger:"blur"}],riskLevel:[{required:!0,message:"请选择风险等级",trigger:"change"}],deduction:[{required:!0,message:"请输入扣分规则",trigger:"blur"},{validator:function(e,t,a){if(""===t)a(new Error("请输入扣分规则"));else try{var r=Number(t);r>0&&r<=10?a():a(new Error("输入1-10数字"))}catch(e){a(new Error("输入1-10数字"))}},trigger:"blur"}],childEffect:[{required:!0,message:"请选择下属客户",trigger:"change"}],reminder:[{required:!0,message:"请选择弹框提示",trigger:"change"}],status:[{required:!0,message:"请设置状态",trigger:"change"}],autoHandler:[{required:!0,message:"请选择是否自动处理",trigger:"change"}],handlerType:[{required:!0,message:"请选择处理方式",trigger:"change"}],solveDesc:[{required:!0,message:"请输入处理描述",trigger:"blur"}]}},alarmTree:[],activeAlarmType:{label:"",value:null},treeOption:{defaultProps:{children:"children",label:"typeName"},nodeKey:"typeCode",defaultExpandAll:!1,expandClickNode:!1}}},computed:i()({},Object(s.b)(["elNorms"])),created:function(){this.getSelectDataFn()},methods:{getSelectDataFn:function(){var e=this;this.$http.get("/alarm/setting/type/list",{alarmType:1}).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.alarmTree=t.data)})},openFn:function(e,t){var a=this;if(this.drawerObj.attachData.motorcadeId=t.motorcadeId,"add"===e&&(this.drawerObj.isAdd=!0,this.drawerObj.title="添加主动安全报警设置",this.drawerObj.formData=this.$options.data().drawerObj.formData),"edit"===e){for(var r in this.drawerObj.isAdd=!1,this.drawerObj.title="编辑主动安全报警设置",this.drawerObj.editData=t,this.drawerObj.formData){var i=t[r];void 0!==i&&null!==i&&(this.drawerObj.formData[r]=i)}t.alarmType&&this.$nextTick(function(){var e=a.$refs.tree.$refs.sonTree.getNode(t.alarmType);e.data&&(a.activeAlarmType={label:e.data[a.treeOption.defaultProps.label],value:e.data[a.treeOption.nodeKey]})})}this.drawerObj.isShow=!0},nodeClick:function(e,t){0!==e.parentId&&(this.drawerObj.formData.alarmType=e[this.treeOption.nodeKey],this.activeAlarmType={label:e[this.treeOption.defaultProps.label],value:e[this.treeOption.nodeKey]})},submit:function(){var e=this;this.$refs.handleForm.validate(function(t){if(!t)return!1;var a=e.drawerObj.formData;a.motorcadeId=e.drawerObj.attachData.motorcadeId,e.drawerObj.isAdd?e.$http.post("/alarm/setting/create",a).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$message.success("添加成功！"),e.drawerObj.isShow=!1,e.$parent.refreshFn&&e.$parent.refreshFn())}):e.$http.post("/alarm/setting/update/"+e.drawerObj.editData.settingId,a).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$message.success("编辑成功！"),e.drawerObj.isShow=!1,e.$parent.refreshFn&&e.$parent.refreshFn())})})}}},o=(a("MVXZ"),a("ZrdR")),d=Object(o.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:e.drawerObj.title,visible:e.drawerObj.isShow,"wrapper-closable":!1,size:"600px",direction:"rtl"},on:{"update:visible":function(t){e.$set(e.drawerObj,"isShow",t)}}},[e.drawerObj.isShow?a("div",{staticClass:"drawer-body",staticStyle:{"margin-bottom":"120px"}},[a("el-form",{ref:"handleForm",attrs:{size:e.elNorms.fromSize,model:e.drawerObj.formData,rules:e.drawerObj.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"报警类型：",prop:"alarmType"}},[a("el-select",{style:e.itemStyle,attrs:{size:e.elNorms.size,placeholder:"请选择"},model:{value:e.drawerObj.formData.alarmType,callback:function(t){e.$set(e.drawerObj.formData,"alarmType",t)},expression:"drawerObj.formData.alarmType"}},[a("el-option",{staticClass:"tree-select",attrs:{value:e.activeAlarmType.value,label:e.activeAlarmType.label}},[a("tree-view",{ref:"tree",attrs:{"tree-data":e.treeOption,"defined-data":e.alarmTree},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{staticClass:"special-form-item",attrs:{label:"触发规则：",required:""}},[a("el-form-item",{attrs:{prop:"ruleTime"}},[a("el-input",{staticStyle:{width:"170px"},attrs:{size:e.elNorms.size,placeholder:"输入1-600数字"},model:{value:e.drawerObj.formData.ruleTime,callback:function(t){e.$set(e.drawerObj.formData,"ruleTime",t)},expression:"drawerObj.formData.ruleTime"}},[a("template",{slot:"append"},[e._v("秒内,")])],2)],1),e._v(" "),a("el-form-item",{attrs:{prop:"ruleCount"}},[a("el-input",{staticClass:"init-input",staticStyle:{width:"185px"},attrs:{size:e.elNorms.size,placeholder:"输入1-10数字"},model:{value:e.drawerObj.formData.ruleCount,callback:function(t){e.$set(e.drawerObj.formData,"ruleCount",t)},expression:"drawerObj.formData.ruleCount"}},[a("template",{slot:"prepend"},[e._v("报警")]),e._v(" "),a("template",{slot:"append"},[e._v("次")])],2)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"风险等级：",prop:"riskLevel"}},[a("el-select",{style:e.itemStyle,attrs:{size:e.elNorms.size,placeholder:"请选择"},model:{value:e.drawerObj.formData.riskLevel,callback:function(t){e.$set(e.drawerObj.formData,"riskLevel",t)},expression:"drawerObj.formData.riskLevel"}},[a("el-option",{attrs:{label:"高风险",value:2}}),e._v(" "),a("el-option",{attrs:{label:"中风险",value:1}}),e._v(" "),a("el-option",{attrs:{label:"低风险",value:0}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"扣分系统：",prop:"deduction"}},[a("el-input",{style:e.itemStyle,attrs:{size:e.elNorms.size,placeholder:"输入1-10数字"},model:{value:e.drawerObj.formData.deduction,callback:function(t){e.$set(e.drawerObj.formData,"deduction",t)},expression:"drawerObj.formData.deduction"}},[a("template",{slot:"append"},[e._v("分")])],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"下属客户：",prop:"childEffect"}},[a("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.drawerObj.formData.childEffect,callback:function(t){e.$set(e.drawerObj.formData,"childEffect",t)},expression:"drawerObj.formData.childEffect"}},[a("el-radio",{attrs:{label:1}},[e._v("生效")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("不生效")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"弹框提醒：",prop:"reminder"}},[a("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.drawerObj.formData.reminder,callback:function(t){e.$set(e.drawerObj.formData,"reminder",t)},expression:"drawerObj.formData.reminder"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"设置状态：",prop:"status"}},[a("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.drawerObj.formData.status,callback:function(t){e.$set(e.drawerObj.formData,"status",t)},expression:"drawerObj.formData.status"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"自动处理：",prop:"autoHandler"}},[a("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.drawerObj.formData.autoHandler,callback:function(t){e.$set(e.drawerObj.formData,"autoHandler",t)},expression:"drawerObj.formData.autoHandler"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"处理方式：",prop:"handlerType"}},[a("el-radio-group",{attrs:{size:e.elNorms.size},model:{value:e.drawerObj.formData.handlerType,callback:function(t){e.$set(e.drawerObj.formData,"handlerType",t)},expression:"drawerObj.formData.handlerType"}},[a("el-radio",{attrs:{label:0}},[e._v("文本消息")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("解除报警")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("误报误判")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.drawerObj.formData.handlerType,expression:"drawerObj.formData.handlerType === 0"}],attrs:{label:"消息展示："}},[a("el-checkbox-group",{attrs:{size:e.elNorms.size},model:{value:e.drawerObj.formData.newsDisplay,callback:function(t){e.$set(e.drawerObj.formData,"newsDisplay",t)},expression:"drawerObj.formData.newsDisplay"}},[a("el-checkbox",{attrs:{label:0}},[e._v("紧急")]),e._v(" "),a("el-checkbox",{attrs:{label:1}},[e._v("终端显示器显示")]),e._v(" "),a("el-checkbox",{attrs:{label:2}},[e._v("终端TTS播读")]),e._v(" "),a("el-checkbox",{attrs:{label:3}},[e._v("广告屏显示")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===e.drawerObj.formData.handlerType,expression:"drawerObj.formData.handlerType === 0"}],attrs:{label:"消息内容："}},[a("el-input",{attrs:{type:"textarea",rows:5,size:e.elNorms.size,placeholder:"请输入发送内容，内容为空时不下发消息"},model:{value:e.drawerObj.formData.alarmContent,callback:function(t){e.$set(e.drawerObj.formData,"alarmContent","string"==typeof t?t.trim():t)},expression:"drawerObj.formData.alarmContent"}})],1),e._v(" "),0===e.drawerObj.formData.handlerType?a("el-form-item",{attrs:{label:"处理描述",prop:"solveDesc"}},[a("el-input",{attrs:{type:"textarea",rows:5,size:e.elNorms.size,maxlength:"2000","show-word-limit":"",placeholder:"请输入处理描述，内容不超过2000字"},model:{value:e.drawerObj.formData.solveDesc,callback:function(t){e.$set(e.drawerObj.formData,"solveDesc","string"==typeof t?t.trim():t)},expression:"drawerObj.formData.solveDesc"}})],1):e._e()],1),e._v(" "),a("div",{staticClass:"footer-button"},[a("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.submit}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerObj.isShow=!1}}},[e._v("取消")])],1)],1):e._e()])},[],!1,null,"65c8175e",null);d.options.__file="security-set-drawer.vue";t.default=d.exports},GhjC:function(e,t,a){"use strict";var r=a("KwyM");a.n(r).a},Hdah:function(e,t,a){"use strict";a.r(t);var r=a("bS4n"),i=a.n(r),l=a("ABCu"),s=a("AlM9"),n=a("DtAb"),o=a("XVnh"),d=a("Cili"),m=a("8t5x"),c={name:"VehicleAdminister",components:{treeView:l.a,TableView:s.a,addDrawer:n.default,notPerm:o.a},mixins:[d.default],data:function(){return{alias:{pageSize:"pageSize",pageNum:"pageNum"},activeMenu:{motorcadeId:null,name:""},isTree:!0,isTable:!0,filterText:"",resTreeData:null,resetData:{companyId:"companyId",type:"type",value:"motorcadeId",label:"name",children:"opMotorcadeNodes"},treeData:{extendData:{},checkOriginName:"",treeQuery:{type:"get",action:"/vehicle/motorcade/treeList/alarmSet",list:null},defaultProps:{children:"opMotorcadeNodes",label:"name",isLeaf:"lezy"},nodeKey:"motorcadeId",currentNodeKey:1,defaultExpandAll:!0,expandClickNode:!1,indent:16,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:this.$t("alarmSet.serial_number")},{title:this.$t("securityCommon.alarm_type"),key:"alarmType",type:"tagText",minWidth:"160",tags:[]},{title:this.$t("alarmSet.risk_level"),type:"tagText",minWidth:"130",key:"riskLevel",tags:[{text:this.$t("alarmSet.high_risk"),value:2,option:{type:"danger"}},{text:this.$t("alarmSet.medium_risk"),value:1,option:{type:"warning"}},{text:this.$t("alarmSet.low_risk"),value:0}]},{title:this.$t("securityCommon.fleet_company"),key:"motorcadeName",minWidth:"130",type:"text"},{title:this.$t("alarmSet.pop_up"),type:"tagText",minWidth:"100",key:"reminder",tags:[{text:this.$t("alarmSet.yes"),value:1},{text:this.$t("alarmSet.no"),value:0,option:{type:"danger"}}]},{title:this.$t("alarmSet.rule_settings"),key:"ruleCount",minWidth:"130",type:"slot",name:"ruleCount"},{title:this.$t("alarmSet.score_deduction_coefficient"),key:"deduction",minWidth:"130",type:"text"},{title:this.$t("alarmSet.status"),type:"tagText",key:"status",minWidth:"130",tags:[{value:1,text:this.$t("alarmSet.enable")},{value:0,text:this.$t("alarmSet.disable"),option:{type:"danger"}}]},{title:this.$t("alarmSet.automatic_processing"),type:"tagText",key:"autoHandler",minWidth:"130",tags:[{text:this.$t("alarmSet.yes"),value:1},{text:this.$t("alarmSet.no"),value:0,option:{type:"danger"}}]},{title:this.$t("alarmSet.update_time"),key:"updateTime",minWidth:"180",type:"text"},{title:this.$t("securityCommon.operation"),key:"operate",type:"operate",fixed:"right",width:"120",buttons:[],mode:"default",dropdownType:"primary"}],buttonControls:[],searchControls:[{type:"treeSelect",key:"alarmType",valueKey:"typeCode",placeholder:this.$t("securityCommon.alarm_type"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"children",label:"typeName"},nodeKey:"typeCode",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(e,t){return!e||-1!==t.typeName.indexOf(e)}}},treeDefinedData:[]},{type:"select",key:"riskLevel",placeholder:this.$t("alarmSet.risk_level"),width:"120px",clearable:!0,options:[{name:this.$t("alarmSet.high_risk"),value:2},{name:this.$t("alarmSet.medium_risk"),value:1},{name:this.$t("alarmSet.low_risk"),value:0}]},{type:"select",key:"handlerType",placeholder:this.$t("alarmSet.processing_method"),width:"120px",clearable:!0,options:[{name:this.$t("alarmSet.manual"),value:0},{name:this.$t("alarmSet.automatic"),value:1}]},{type:"select",key:"status",placeholder:this.$t("alarmSet.enabled_status"),width:"120px",clearable:!0,options:[{name:this.$t("alarmSet.disable"),value:0},{name:this.$t("alarmSet.enable"),value:1}]}],searchMode:"immediate",footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:i()({},Object(m.b)(["elNorms","userData"])),watch:{filterText:function(e){this.$refs.tree.$refs.sonTree.filter(e)}},created:function(){this.getSelectDataFn()},methods:{handlePermissionShow:function(){var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("alarmSettingUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("alarmSet.edit"),size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_bj",funcName:"editFn"}),e>-1&&this.isPermissionShow("alarmSettingDelete")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("alarmSet.delete"),size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_shanchu1",funcName:"removeFn"}),this.tableOptions.buttonControls=[],this.isPermissionShow("alarmSettingCreate")&&this.tableOptions.buttonControls.push({text:this.$t("alarmSet.add"),size:"mini",round:!1,icon:"el-icon-plus",funcName:"addFn"}),this.tableOptions.footerButtons=[],this.isPermissionShow("alarmSettingUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("alarmSet.enable"),size:"mini",icon:"el-icon-circle-check",round:!1,funcName:"hiddenFn"}),this.isPermissionShow("alarmSettingUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("alarmSet.disable"),type:"danger",size:"mini",icon:"el-icon-remove-outline",round:!1,funcName:"displayFn"}),this.isPermissionShow("alarmSettingDelete")&&this.tableOptions.footerButtons.push({text:this.$t("alarmSet.delete"),type:"danger",size:"mini",icon:"el-icon-delete",round:!1,funcName:"removeFn"})},getSelectDataFn:function(){var e=this;this.$http.get("/alarm/setting/type/list",{alarmType:1}).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.searchControls[0].treeDefinedData=t.data,e.alarmSelect=[],t.data.forEach(function(t){e.alarmSelect.push({text:t.typeName,value:t.typeCode}),t.children.forEach(function(t){e.alarmSelect.push({text:t.typeName,value:t.typeCode})})}),e.tableOptions.columns[1].tags=e.alarmSelect,e.isTable=!1,e.$nextTick(function(){e.isTable=!0}))})},getTreeData:function(e){this.activeMenu={motorcadeId:e[0].motorcadeId,name:e[0].name},this.$refs.table.initRequestTableData()},nodeClick:function(e,t){e.children&&e.children.length||(this.activeMenu={motorcadeId:e.motorcadeId,name:e.name}),this.$refs.table.internalCurrentPage=1,this.$refs.table.initRequestTableData()},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var a={motorcadeId:this.activeMenu.motorcadeId,alarmType:e.alarmType?JSON.parse(e.alarmType):[],riskLevel:e.riskLevel,handlerType:e.handlerType,status:e.status};this.$http.post("/alarm/setting/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,a).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,a){this[t.funcName].call(function(){},e,t,a)},hiddenFn:function(e){var t=this;e.length?this.$confirm(this.$t("alarmSet.is_enable_rule"),this.$t("securityCommon.prompt"),{confirmButtonText:this.$t("securityCommon.ok"),cancelButtonText:this.$t("securityCommon.cancel"),type:"warning"}).then(function(){var a=e.map(function(e){return e.settingId});t.$http.deleteApi("/alarm/setting/status",{status:1,ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message.success(t.$t("alarmSet.enabled")+"！"))})}):this.$message.warning(this.$t("alarmSet.select_operated_data"))},displayFn:function(e){var t=this;e.length?this.$confirm(this.$t("alarmSet.is_disable_rule"),this.$t("securityCommon.prompt"),{confirmButtonText:this.$t("securityCommon.ok"),cancelButtonText:this.$t("securityCommon.cancel"),type:"warning"}).then(function(){var a=e.map(function(e){return e.settingId});t.$http.deleteApi("/alarm/setting/status",{status:0,ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message.success(t.$t("alarmSet.disabled")+"！"))})}):this.$message.warning(this.$t("alarmSet.select_operated_data"))},removeFn:function(e){var t=this,a=Array.isArray(e);!a||e.length?this.$confirm(this.$t("alarmSet.is_delete_rule"),this.$t("securityCommon.prompt"),{confirmButtonText:this.$t("securityCommon.ok"),cancelButtonText:this.$t("securityCommon.cancel"),type:"warning"}).then(function(){var r=a?e.map(function(e){return e.settingId}):[e.settingId];t.$http.deleteApi("/alarm/setting/delete",{ids:r.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.initRequestTableData(),t.$message.success(t.$t("alarmSet.disabled")+"！"))})}):this.$message.warning(this.$t("alarmSet.select_operated_data"))},addFn:function(){if(null===this.activeMenu.motorcadeId)return this.$message.warning(this.$t("alarmSet.add_fleet")),!1;this.$refs._add_drawer.openFn("add",this.activeMenu)},editFn:function(e){this.$refs._add_drawer.openFn("edit",e)},refreshFn:function(){this.$refs.table.initRequestTableData()}}},u=(a("GhjC"),a("ZrdR")),p=Object(u.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-wrap"},[e.isPermissionShow("alarmSettingList")?a("div",{staticClass:"page-body"},[a("div",{staticClass:"con-left"},[a("div",{staticClass:"input-query"},[a("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("alarmSet.search_fleet_name"),"prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}})],1),e._v(" "),a("div",{staticClass:"body-tree init-tree"},[e.isTree?a("tree-view",{ref:"tree",attrs:{"tree-data":e.treeData},on:{treeDataFn:e.getTreeData,"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"left-title",style:t.data.data.motorcadeId===e.activeMenu.motorcadeId?"color: var(--main-primary);":""},[null===t.data.data.parentId?a("i",{staticClass:"iconfont Jamin_location_icon_dn"}):1===t.data.data.isCompany?a("i",{staticClass:"iconfont Jamin_location_icon_gs"}):a("i",{staticClass:"iconfont Jamin_location_icon_cd"}),e._v("\n              "+e._s(t.data.data.name)+"\n            ")])])}}])}):e._e()],1)]),e._v(" "),a("div",{staticClass:"con-right"},[a("div",{staticClass:"right-header"},[e._v("\n        "+e._s(e.activeMenu.name)+"\n      ")]),e._v(" "),a("transition",{attrs:{name:"opacity"}},[a("div",{staticClass:"opacity_table"},[e.isTable?a("table-view",{ref:"table",attrs:{center:"","id-key":"settingId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-shadow":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"}),e._v(" "),a("el-table-column",{attrs:{slot:"ruleCount",label:e.$t("alarmSet.rule_settings"),align:"center",width:"130"},slot:"ruleCount",scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.ruleTime&&t.row.ruleCount?a("div",[e._v(e._s(t.row.ruleTime)+e._s(e.$t("alarmSet.seconds"))+" "+e._s(t.row.ruleCount)+e._s(e.$t("alarmSet.times")))]):e._e()]}}])})],1):e._e()],1)])],1)]):e._e(),e._v(" "),e.isPermissionShow("alarmSettingList")||e.$store.state.app.permsDataLoading?e._e():a("notPerm"),e._v(" "),a("add-drawer",{ref:"_add_drawer"})],1)},[],!1,null,"02b6ada1",null);p.options.__file="security-set.vue";t.default=p.exports},KwyM:function(e,t,a){},Lg8V:function(e,t,a){},MVXZ:function(e,t,a){"use strict";var r=a("Lg8V");a.n(r).a},jcYt:function(e,t,a){e.exports=a.p+"static/img/not-perm.d97c442.png"}}]);