(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-52df"],{LHga:function(e,t,i){},MxYX:function(e,t,i){"use strict";var a=i("LHga");i.n(a).a},paOg:function(e,t,i){"use strict";i.r(t);var a=i("omC7"),s=i.n(a),o=i("bS4n"),l=i.n(o),n=i("ABCu"),r=i("kDn8"),c=i("AlM9"),d=i("8t5x"),p={name:"VehicleAdminister",components:{treeView:n.a,dialogDesign:r.a,TableView:c.a},data:function(){var e=this;return{vehicleIcon:[{title:"大货车",icon:"Jamin_icon_dahuoche"},{title:"车",icon:"Jamin_icon_che"},{title:"轮船",icon:"Jamin_icon_lunchuan"},{title:"电车",icon:"Jamin_icon_dianche"},{title:"面包车",icon:"Jamin_icon_mianbaoche"},{title:"汽车",icon:"Jamin_icon_qiche"},{title:"运输车",icon:"Jamin_icon_yunshuche"},{title:"货车",icon:"Jamin_icon_huoche"}],deviceArr:[],simArr:[],driverArr:[],fieldMap:{},fileLists:[],fileList:[],upData:{},api:"",vehicleId:"",password:{licenseNum:"",vehicleName:"",pass:"",checkPass:"",vehicleId:null},passwordRules:{pass:[{validator:function(t,i,a){""===i?a(new Error("请输入密码")):(""!==e.password.checkPass&&e.$refs.password.validateField("checkPass"),a())},trigger:"blur"}],checkPass:[{validator:function(t,i,a){""===i?a(new Error("请再次输入密码")):i!==e.password.pass?a(new Error("两次输入密码不一致!")):a()},trigger:"blur"}]},dialogVisible:!1,upLoadData:{Authorization:null,motorcadeId:null},upLoadRole:{companyId:[{required:!0,message:"请选择车队/公司",trigger:"change"}]},opVehicleVO:{licenseNum:null,vehicleName:null,licenseColor:null,vehicleColor:null,vehicleType:null,brand:null,motorcadeId:null,use:null,status:null,approvePerson:null,driverIds:[],approveWeight:null,startAt:null,buyAt:null,endAt:null,scrapAt:null,icon:null},rules:{licenseNum:[{required:!0,message:"请输入车牌号码",trigger:"blur"}],licenseColor:[{required:!0,message:"请输选择车牌颜色",trigger:"change"}],vehicleType:[{required:!0,message:"请选择车辆类型",trigger:"change"}],motorcadeId:[{required:!0,message:"请选择车队",trigger:"change"}],status:[{required:!0,message:"请选择车辆状态",trigger:"change"}],startAt:[{required:!0,message:"请选择服务开始日",trigger:"change"}],endAt:[{required:!0,message:"请选择服务结束日",trigger:"change"}],icon:[{required:!0,message:"请选择车辆图标",trigger:"change"}]},equipmentVO:{deviceId:"",installDate:"",simId:""},rules1:{deviceId:[{required:!0,message:"请选择设备",trigger:"change"}],installDate:[{required:!0,message:"请输选择安装日期",trigger:"change"}]},opDrivingLicenseVO:{drivingNum:null,model:null,engineNum:null,vin:null,timeoutAt:null,advanceNum:null,photoFront:null,photoBack:null},opTransportLicenseVO:{transportNum:null,busScope:null,timeoutAt:null,advanceNum:null,photo:null},item:!0,item1:!0,item2:!0,item3:!0,drawerDisplay:!1,direction:"rtl",drawerTitle:"",drawerWidth:"720px",alias:{pageSize:"pageSize",pageNum:"pageNum"},motorcadeId:"",activeMenu:{motorcadeId:null,name:""},companyId:null,parentId:0,isTree:!0,isTable:!0,filterText:"",resTreeData:null,resetData:{companyId:"companyId",type:"type",value:"motorcadeId",label:"name",children:"opMotorcadeNodes"},resetMenus:[],licenseColor:[],vehicleType:[],treeData:{extendData:{},checkOriginName:"",treeQuery:{type:"get",action:"/vehicle/motorcade/treeList",list:null},defaultProps:{children:"opMotorcadeNodes",label:"name",isLeaf:"lezy"},emptyText:"暂无数据",nodeKey:"motorcadeId",currentNodeKey:1,defaultExpandAll:!0,expandClickNode:!1,indent:16,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}},draggable:{isDraggable:!1,allowDrap:function(e,t,i){return!0},allowDrop:function(e,t,i){return e.data.type===t.data.type?"inner"!==i:(1!==e.data.type||0!==t.data.type)&&(0!==e.data.type||1!==t.data.type)}}},params:{},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:"车辆号码",key:"licenseNum",minWidth:"130",type:"text"},{title:"车牌颜色",type:"tagText",minWidth:"130",key:"licenseColor",tags:[]},{title:"车队/公司",key:"motorcadeName",minWidth:"130",type:"text"},{title:"设备号",key:"deviceNum",minWidth:"130",type:"text"},{title:"SIM号码",key:"simNum",minWidth:"150",type:"text"},{title:"驾驶员",key:"driverName",minWidth:"130",type:"text"},{title:"状态",type:"tagText",key:"status",minWidth:"130",tags:[{value:1,text:"正常"},{value:2,text:"停用",option:{type:"warning"}},{value:3,text:"维修",option:{type:"info"}},{value:4,text:"欠费",option:{type:"danger"}}]},{title:"入网时间",key:"startAt",minWidth:"180",type:"text"},{title:"服务到期时间",key:"endAt",minWidth:"180",type:"text"},{title:"操作",key:"operate",type:"operate",fixed:"right",width:"160",buttons:[{size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_bj",funcName:"editRole"},{size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_gxh",funcName:"reset"}],mode:"default",dropdownType:"primary"}],buttonControls:[{text:"添加车辆",size:"mini",round:!1,icon:"el-icon-plus",funcName:"addVehicle"},{text:"批量导入",size:"mini",type:"null",icon:"el-icon-folder-opened",round:!1,funcName:"batchExport"},{text:"导出记录",size:"mini",type:"null",round:!1,icon:"el-icon-download",funcName:"exportRecord"}],searchControls:[{type:"selectInput",key:["inputKey","selectKey"],inputKey:"inputKey",selectKey:"selectKey",selectDefaultValue:"licenseNum",selectPlaceholder:"请输入",width:"340px",selectWidth:"130px",clearable:!0,options:[{name:"车牌号码",value:"licenseNum"},{name:"设备号",value:"deviceNum"},{name:"SIM号码",value:"simNum"}]},{type:"input",key:"driverName",placeholder:"驾驶员",width:"200px",size:"small"},{type:"select",key:"status",placeholder:"请选择状态",width:"200px",clearable:!0,options:[{name:"正常",value:1},{name:"停用",value:2},{name:"维修",value:3},{name:"欠费",value:4}]}],searchMode:"immediate",footerButtons:[{text:"启用",size:"mini",icon:"el-icon-circle-check",round:!1,funcName:"hiddenRole"},{text:"禁用",type:"danger",size:"mini",icon:"el-icon-remove-outline",round:!1,funcName:"displayRole"},{text:"删除",type:"danger",size:"mini",icon:"el-icon-delete",round:!1,funcName:"removeRole"}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},dialogDisplay:!1,dialogData:{staticData:null,isDialogDisplay:!0,title:"新增角色",data:"",defaultData:"",mainWidth:"500",titleWidth:"100",btnAlign:"center",formList:[{title:"角色名",type:"input",labelWidth:"100",offsetWidth:"320",key:"input",rules:[{required:!0,message:"请输入角色名",trigger:"blur"}]},{title:"角色组",type:"select",labelWidth:"100",offsetWidth:"320",key:"select",handlerCallback:{target:"blurFunction",funcName:"inputCallback"},options:{type:"default",list:[{name:"角色组一",value:1},{name:"角色组二",value:2},{name:"角色组三",value:3}]},rules:[{required:!0,message:"请选择选择角色组",trigger:"blur"}]},{title:"描述",type:"textarea",offsetWidth:"320",labelWidth:"100",key:"input2"}],formButton:[{name:"确定",type:"confirm",class:"warning",round:!1},{name:"取消",type:"cancel",class:"",round:!1}]}}},computed:l()({},Object(d.b)(["elNorms","userData"])),watch:{filterText:function(e){this.$refs.tree.$refs.sonTree.filter(e)}},created:function(){this.api=this.$config.API_CONFIG.API_ROOT,this.upData={Authorization:this.userData.tokenHead+this.userData.token}},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.table.searchParams.selectKey="licenseNum"})},methods:{resetFn:function(){this.opVehicleVO=this.$options.data().opVehicleVO,this.equipmentVO=this.$options.data().equipmentVO,this.opDrivingLicenseVO=this.$options.data().opDrivingLicenseVO,this.opTransportLicenseVO=this.$options.data().opTransportLicenseVO,this.fileList=this.$options.data().fileList},jump:function(e){this.$router.push({name:e,params:{open:!0}})},endTime:function(e){this.opVehicleVO.startAt?new Date(e).getTime()<=new Date(this.opVehicleVO.startAt).getTime()&&(this.$message.error("结束时间不得小于开始时间"),this.opVehicleVO.endAt=null):(this.$message.error("请先选择开始时间"),this.opVehicleVO.endAt=null)},dialogClose:function(){this.upLoadData.motorcadeId=null,this.fileList=[]},uploadSubmit:function(){return!!this.submitForm("upLoad")&&(this.$refs.upload.uploadFiles.length?null===this.upLoadData.motorcadeId?(this.$message({type:"warning",message:"请选择所属公司!"}),!1):void this.$refs.upload.submit():(this.$message({type:"warning",message:"请选择将要上传的文件！"}),!1))},successUpload:function(e,t,i){e.code===this.$config.API_STATUS.OK?(this.$message({type:"success",message:"上传成功！"}),this.dialogVisible=!1,this.$refs.upload.clearFiles()):(this.$refs.upload.clearFiles(),this.$message.error(e.message)),this.$refs.table.emitRequestTableData()},beforeUpload:function(e){return this.upLoadData.Authorization=this.$store.getters.userData.tokenHead+this.$store.getters.userData.token,!0},diaClose:function(e){var t=this;this.treeData.currentNodeKey=this.activeMenu.motorcadeId,e&&(this.isTree=!1,this.$nextTick(function(){t.isTree=!0})),this.dialogDisplay=!1},dialogCallback:function(e,t,i){this[e.handlerCallback.funcName].call(function(){},e,t,i)},addMenu:function(e){"click"===e.type&&(e={}),this.dialogData={staticData:{parentId:e.motorcadeId,companyId:e.companyId},isClickClose:!1,isDialogDisplay:!0,title:"添加车队",data:{},defaultData:{},mainWidth:"500",titleWidth:"100",submitAction:"/vehicle/motorcade/create",btnAlign:"center",formList:[{title:"上级车队",type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenus},rules:[{required:!0,message:"请选择上级菜单",trigger:"blur"}],handlerCallback:{target:"changeFunction",funcName:"cascaderChange"}},{title:"车队名称",type:"input",offsetWidth:"320",key:"name",rules:[{required:!0,message:"请输入菜单名称",trigger:"blur"}]}],message:{message:"车队添加成功！",type:"success"},formButton:[{name:"提交",type:"confirm",class:"primary",round:!1},{name:"取消",type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},editMenu:function(e){var t=e.companyId,i=e.motorcadeId;delete e.list,0===e.parentId&&(e.parentId="0");this.dialogData={isClickClose:!1,staticData:e,isDialogDisplay:!0,title:"编辑菜单",data:{},defaultData:{companyId:t,motorcadeId:i},mainWidth:"500",titleWidth:"100",submitAction:"/vehicle/motorcade/update",btnAlign:"center",formList:[{title:"上级菜单",type:"cascader",labelWidth:"100",offsetWidth:"320",key:"parentId",props:{checkStrictly:!0,emitPath:!1},options:{type:"default",list:this.resetMenus},rules:[{required:!0,message:"请选择上级车队",trigger:"blur"},{validator:function(t,i,a){e.motorcadeId===i?a(new Error("不能设置自己为自己的子菜单！")):a()},trigger:"change"}],handlerCallback:{target:"changeFunction",funcName:"cascaderChange"}},{title:"车队名称",type:"input",offsetWidth:"320",key:"name",rules:[{required:!0,message:"请输入车队名称",trigger:"blur"}]}],message:{message:"菜单编辑成功！",type:"success"},formButton:[{name:"提交",type:"confirm",class:"primary",round:!1},{name:"取消",type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},handleCommand:function(e){this[e.funcName].call(function(){},e.data,e.node,e.funcName)},removeTree:function(e){var t=this;if(1===e.motorcadeId)return this.$message.error("公司不可删除！"),!1;this.$confirm("此操作将永久删除该车队及车队下的车辆, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.get("/vehicle/motorcade/delete/"+e.motorcadeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$message({type:"success",message:"删除成功!"}),t.isTree=!1,t.$nextTick(function(){t.isTree=!0}))})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getTreeData:function(e){this.activeMenu={motorcadeId:e[0].motorcadeId,name:e[0].name};var t=JSON.parse(s()(e));this.resTreeData={companyId:0,motorcadeId:0,name:"车辆监控中心",opMotorcadeNodes:t},t.unshift({name:"无",motorcadeId:-1}),this.resetDataFn(t,!1),this.$refs.table.emitRequestTableData()},nodeClick:function(e,t){e.children&&e.children.length||(this.activeMenu={motorcadeId:e.motorcadeId,name:e.name},this.parentId=e.parentId),this.motorcadeId=e.motorcadeId,this.$refs.table.emitRequestTableData()},addVehicle:function(){var e=this;this.resetFn(),this.newDriver(),this.newDevice(),this.drawerWidth="720px",this.drawerTitle="添加车辆",this.drawerDisplay=!0,this.opVehicleVO=this.$options.data().opVehicleVO,this.equipmentVO=this.$options.data().equipmentVO,this.opDrivingLicenseVO=this.$options.data().opDrivingLicenseVO,this.opTransportLicenseVO=this.$options.data().opTransportLicenseVO,this.$nextTick(function(){e.$refs.ruleForm.resetFields(),e.$refs.ruleForm1.resetFields()})},batchExport:function(){this.drawerWidth="500px",this.drawerTitle="批量导入",this.dialogVisible=!0},exportRecord:function(){var e=this;this.$confirm("确认导出记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1,beforeClose:function(t,i,a){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(i){t.key===i&&"operate"!==t.key&&(e.fieldMap[i]=t.title)})});var s=e.$refs.table._data.searchParams,o=s.driverName,l=s.status,n=s.selectKey,r=s.inputKey;if("confirm"===t){var c={fieldMap:e.fieldMap,driverName:o,status:l};n&&(c[n]=r),e.$http.download("/vehicle/export?isToken=true",c).then(function(e){}),a()}else a()}}).catch(function(){})},editRole:function(e){var t=this;this.resetFn(),this.drawerWidth="720px",this.drawerTitle="编辑车辆",this.drawerDisplay=!0,this.$nextTick(function(){t.$refs.ruleForm.resetFields(),t.$refs.ruleForm1.resetFields()}),this.vehicleId=e.vehicleId,this.oldDriver(this.vehicleId),this.oldDevice(this.vehicleId),this.$http.get("/vehicle/"+e.vehicleId).then(function(e){if(e.code===t.$config.API_STATUS.OK){var i=e.data,a=i.equipmentVO,s=i.opDrivingLicenseVO,o=i.opTransportLicenseVO,l=i.opVehicleVO;l&&(t.opVehicleVO=l),a&&(t.equipmentVO=a),s&&(t.opDrivingLicenseVO=s,s.photoFront&&(t.fileList[0]=[{name:"正面照",url:s.photoFront,type:"photoFront"}]),s.photoBack&&(t.fileList[1]=[{name:"反面照",url:s.photoBack,type:"photoBack"}])),o&&(t.opTransportLicenseVO=o,o.photo&&(t.fileList[2]=[{name:"运输证照",url:o.photo,type:"photo"}]))}})},reset:function(e){var t=this;this.drawerWidth="500px",this.drawerTitle="车辆密码",this.drawerDisplay=!0,this.$nextTick(function(){t.$refs.password.resetFields()}),this.password.licenseNum=e.licenseNum,this.password.motorcadeName=e.motorcadeName,this.password.vehicleId=e.vehicleId,this.password.pass="",this.password.checkPass=""},passwordFn:function(e){var t=this;this.submitForm(e)&&this.$http.post("/vehicle/password/"+this.password.vehicleId,{password:this.password.checkPass}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.drawerDisplay=!1,t.$refs.table.emitRequestTableData(),t.$message({type:"success",message:e.message}))})},displayRole:function(e){var t=this;if(e.length<1)return this.$message.error("请选择将要禁用的车辆！"),!1;this.$confirm("是否禁用车辆?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.vehicleId}),t.$http.deleteApi("/vehicle/status",{status:2,ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.emitRequestTableData(),t.$message({type:"success",message:"操作成功！"}))})}).catch(function(){t.$message({type:"info",message:"已取消"})})},hiddenRole:function(e){var t=this;if(e.length<1)return this.$message.error("请选择将要启用的车辆！"),!1;this.$confirm("是否启用车辆?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.vehicleId}),t.$http.deleteApi("/vehicle/status",{status:1,ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.emitRequestTableData(),t.$message({type:"success",message:"操作成功！"}))})}).catch(function(){t.$message({type:"info",message:"已取消"})})},removeRole:function(e){var t=this;this.$confirm("是否删除车辆?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.vehicleId}),t.$http.deleteApi("/vehicle/delete",{ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.emitRequestTableData(),t.$message({type:"success",message:"操作成功！"}))})}).catch(function(){t.$message({type:"info",message:"已取消"})})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={motorcadeId:this.motorcadeId,status:e.status,driverName:e.driverName};e.selectKey&&(i[e.selectKey]=e.inputKey),this.$http.post("/vehicle/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,e.data.total&&(t.tableOptions.total=e.data.total))}),this.$http.get("/dict/list/codes",{dicCodes:"licenseColor,vehicleType"}).then(function(e){if(e.code===t.$config.API_STATUS.OK){e.data.licenseColor.forEach(function(e,i){t.licenseColor[i]={value:e.itemName,label:e.itemValue},t.tableOptions.columns[2].tags[i]={value:e.itemName,text:e.itemValue}});var i=s()(e.data.vehicleType).replace(/itemName/g,"value").replace(/itemValue/g,"label").replace(/,"sysDictionaryItems":null/g,"").replace(/sysDictionaryItems/g,"children");t.vehicleType=JSON.parse(i)}})},newDriver:function(){var e=this;this.$http.get("/driver/list/all").then(function(t){e.driverArr=[],t.code===e.$config.API_STATUS.OK&&t.data.forEach(function(t,i){e.$set(e.driverArr,i,{value:t.driverId,label:t.username})})})},oldDriver:function(e){var t=this;this.$http.get("/driver/list/all").then(function(e){t.driverArr=[],e.code===t.$config.API_STATUS.OK&&e.data.forEach(function(e,i){t.$set(t.driverArr,i,{value:e.driverId,label:e.username})})})},newDevice:function(){var e=this;this.$http.get("/device/list/vehicle/all").then(function(t){e.deviceArr=[],e.simArr=[],t.code===e.$config.API_STATUS.OK&&t.data.forEach(function(t,i){var a={value:t.deviceId,label:t.deviceNum};t.simId&&(a.simId=t.simId,a.simNum=t.simNum,e.simArr.push({value:t.simId,label:t.simNum})),e.$set(e.deviceArr,i,a)})})},oldDevice:function(e){var t=this;this.$http.get("/device/list/vehicle/all/"+e).then(function(e){t.deviceArr=[],t.simArr=[],e.code===t.$config.API_STATUS.OK&&e.data.forEach(function(e,i){var a={value:e.deviceId,label:e.deviceNum};e.simId&&(a.simId=e.simId,a.simNum=e.simNum,t.simArr.push({value:e.simId,label:e.simNum})),t.$set(t.deviceArr,i,a)})})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},simFn:function(e){var t=this;e?this.deviceArr.forEach(function(i){i.value===e&&t.$nextTick(function(){t.equipmentVO.simId=i.simId})}):this.equipmentVO.simId=null},showRefresh:function(e){var t=this;this.isTree=!1,this.$nextTick(function(){t.isTree=!0})},resetDataFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.resetData){var a=[];if(e.forEach(function(e){var i=t.initJSON(t.resetData,e);a.push(i)}),!0===i)return a;this.resetMenus=a}},initJSON:function(e,t){var i={};for(var a in e)if("children"===a&&t[e[a]]&&t[e[a]].length>0){var s=this.resetDataFn(t[e[a]],!0);i[a]=s}else"children"!==a&&(i[a]=t[e[a]]);return i},nodeDragEnd:function(e,t,i){var a=this;this.$http.post("/sys/menu/sort",{motorcadeId:e.data.motorcadeId,targetId:t.data.motorcadeId,moveType:i}).then(function(e){e.code,a.$config.API_STATUS,a.isTree=!1,a.$nextTick(function(){a.isTree=!0})}).catch(function(e){a.isTree=!1,a.$nextTick(function(){a.isTree=!0})})},cascaderChange:function(e,t,i){this.companyId=e.options.list[0].companyId,this.$refs._dialog.dialogData.defaultData.companyId=this.companyId,-1===t&&(this.$refs._dialog.dialogData.defaultData.parentId=0),"0"===t&&(this.$refs._dialog.dialogData.defaultData={type:0})},submit:function(){var e=this;if("添加车辆"===this.drawerTitle){if(this.submitForm("ruleForm")&&this.submitForm("ruleForm1")){var t=this.publicData();this.$http.post("/vehicle/create",t).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$refs.table.emitRequestTableData(),e.drawerDisplay=!1,e.$message({message:t.message,type:"success"}))})}}else if("编辑车辆"===this.drawerTitle&&this.submitForm("ruleForm")&&this.submitForm("ruleForm1")){var i=this.publicData();this.$http.post("/vehicle/update/"+this.vehicleId,i).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$refs.table.emitRequestTableData(),e.drawerDisplay=!1,e.$message({message:t.message,type:"success"}))})}},publicData:function(){var e=this;return this.fileList.forEach(function(t){t.length>0&&(e.opDrivingLicenseVO[t[0].type]||void 0!==e.opDrivingLicenseVO[t[0].type]&&(e.opDrivingLicenseVO[t[0].type]=t[0].url),e.opTransportLicenseVO[t[0].type]||void 0!==e.opTransportLicenseVO[t[0].type]&&(e.opTransportLicenseVO[t[0].type]=t[0].url))}),{opVehicleVO:this.opVehicleVO,equipmentVO:this.equipmentVO,opDrivingLicenseVO:this.opDrivingLicenseVO,opTransportLicenseVO:this.opTransportLicenseVO}},vehicleTypeValue:function(e){this.opVehicleVO.vehicleType=e[e.length-1]},motorcadeIdeValue:function(e){this.opVehicleVO.motorcadeId=e[e.length-1],this.upLoadData.motorcadeId=e[e.length-1]},submitForm:function(e){var t=!0;return this.$refs[e].validate(function(e){if(!e)return t=!1}),t},onSuccess:function(e,t,i){"photoFront"===e.data.type?this.$set(this.fileList,0,[{name:"正面照",url:e.data.url,type:e.data.type}]):"photoBack"===e.data.type?this.$set(this.fileList,1,[{name:"反面照",url:e.data.url,type:e.data.type}]):"photo"===e.data.type&&this.$set(this.fileList,2,[{name:"运输证照",url:e.data.url,type:e.data.type}])},handleRemove:function(e,t){return this.$confirm("确定移除 "+e.name+" ? 此操作将永久删除该文件, 是否继续？")},onremove:function(e,t){this.$http.post("/file/delete",{url:e.url}).then(function(e){});var i={opDrivingLicenseVO:{},opTransportLicenseVO:{}};void 0!==this.opDrivingLicenseVO[e.type]&&(i.opDrivingLicenseVO[e.type]="",i.opDrivingLicenseVO.id=this.opDrivingLicenseVO.id),void 0!==this.opTransportLicenseVO[e.type]&&(i.opTransportLicenseVO[e.type]="",i.opTransportLicenseVO.id=this.opTransportLicenseVO.id),this.$http.post("/vehicle/update/"+this.vehicleId,i).then(function(e){})},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 张照片")},itemShow:function(e){this[e]=!this[e]}}},u=(i("MxYX"),i("ZrdR")),m=Object(u.a)(p,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrap"},[i("div",{staticClass:"page-body"},[i("div",{staticClass:"con-left"},[i("div",{staticClass:"input-query"},[i("el-input",{staticStyle:{width:"170px","margin-right":"4px"},attrs:{size:e.elNorms.size,placeholder:"搜索车队名称","prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,circle:e.elNorms.circle,round:e.elNorms.round},on:{click:e.addMenu}},[e._v("新增车队")])],1),e._v(" "),i("div",{staticClass:"body-tree init-tree"},[e.isTree?i("tree-view",{ref:"tree",attrs:{"tree-data":e.treeData},on:{treeDataFn:e.getTreeData,"node-click":e.nodeClick,"node-drag-end":e.nodeDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"left-title text-ellipsis",style:t.data.data.motorcadeId===e.activeMenu.motorcadeId?"color: var(--main-primary);":""},[i("i",{staticClass:"iconfont Jamin_vehicle_icon_xiaowenjian"}),e._v("\n              "+e._s(t.data.data.name)+"\n            ")]),e._v(" "),i("span",{staticClass:"right-edit"},[i("span",[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[null!==t.data.data.motorcadeId?i("i",{staticClass:"el-icon-more"}):e._e()]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"addMenu"}}},[e._v("添加子菜单")]),e._v(" "),0!==t.data.data.parentId?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"editMenu"}}},[e._v("编辑车队")]):e._e(),e._v(" "),0!==t.data.data.parentId?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"removeTree"}}},[e._v("删除车队")]):e._e()],1)],1)],1)])]}}])}):e._e()],1)]),e._v(" "),i("div",{staticClass:"con-right"},[i("div",{staticClass:"right-header"},[e._v("\n        "+e._s(e.activeMenu.name)+"\n      ")]),e._v(" "),i("transition",{attrs:{name:"opacity"}},[i("div",{staticClass:"opacity_table"},[i("table-view",{ref:"table",attrs:{stripe:"",center:"","id-key":"id","is-search":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-border":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:"序号",type:"index",align:"center"},slot:"number"})],1)],1)])],1)]),e._v(" "),e.dialogDisplay?i("dialog-design",{ref:"_dialog",attrs:{size:"mini",color:"warning","dialog-data":e.dialogData},on:{diaClose:e.diaClose,handlerCallback:e.dialogCallback}}):e._e(),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawerDisplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.drawerDisplay=t}}},["添加车辆"===e.drawerTitle||"编辑车辆"===e.drawerTitle?i("div",[i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("基本信息")]),e._v(" "),e.item?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item,expression:"item"}]},[i("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.opVehicleVO,rules:e.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"车牌号码",prop:"licenseNum"}},[i("el-input",{model:{value:e.opVehicleVO.licenseNum,callback:function(t){e.$set(e.opVehicleVO,"licenseNum",t)},expression:"opVehicleVO.licenseNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆名称"}},[i("el-input",{model:{value:e.opVehicleVO.vehicleName,callback:function(t){e.$set(e.opVehicleVO,"vehicleName",t)},expression:"opVehicleVO.vehicleName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车牌颜色",prop:"licenseColor"}},[i("el-select",{staticStyle:{width:"176px"},attrs:{filterable:""},model:{value:e.opVehicleVO.licenseColor,callback:function(t){e.$set(e.opVehicleVO,"licenseColor",t)},expression:"opVehicleVO.licenseColor"}},e._l(e.licenseColor,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆颜色"}},[i("el-input",{model:{value:e.opVehicleVO.vehicleColor,callback:function(t){e.$set(e.opVehicleVO,"vehicleColor",t)},expression:"opVehicleVO.vehicleColor"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆类型",prop:"vehicleType"}},[i("el-cascader",{staticStyle:{width:"176px"},attrs:{options:e.vehicleType,props:{checkStrictly:!0},clearable:"",filterable:""},on:{change:e.vehicleTypeValue},model:{value:e.opVehicleVO.vehicleType,callback:function(t){e.$set(e.opVehicleVO,"vehicleType",t)},expression:"opVehicleVO.vehicleType"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆品牌"}},[i("el-input",{model:{value:e.opVehicleVO.brand,callback:function(t){e.$set(e.opVehicleVO,"brand",t)},expression:"opVehicleVO.brand"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"所属车队",prop:"motorcadeId"}},[i("el-cascader",{staticStyle:{width:"176px"},attrs:{options:e.resetMenus,props:{checkStrictly:!0},clearable:"",filterable:""},on:{change:e.motorcadeIdeValue},model:{value:e.opVehicleVO.motorcadeId,callback:function(t){e.$set(e.opVehicleVO,"motorcadeId",t)},expression:"opVehicleVO.motorcadeId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆用途"}},[i("el-input",{model:{value:e.opVehicleVO.use,callback:function(t){e.$set(e.opVehicleVO,"use",t)},expression:"opVehicleVO.use"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"使用状态",prop:"status"}},[i("el-select",{staticStyle:{width:"176px"},model:{value:e.opVehicleVO.status,callback:function(t){e.$set(e.opVehicleVO,"status",t)},expression:"opVehicleVO.status"}},[i("el-option",{attrs:{label:"正常",value:1}}),e._v(" "),i("el-option",{attrs:{label:"停用",value:2}}),e._v(" "),i("el-option",{attrs:{label:"维修",value:3}}),e._v(" "),i("el-option",{attrs:{label:"欠费",value:4}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"核载人数"}},[i("el-input",{model:{value:e.opVehicleVO.approvePerson,callback:function(t){e.$set(e.opVehicleVO,"approvePerson",t)},expression:"opVehicleVO.approvePerson"}})],1),e._v(" "),i("el-form-item",{staticClass:"formItem",attrs:{label:"绑定驾驶员"}},[i("el-select",{staticStyle:{width:"176px"},attrs:{multiple:"",filterable:""},model:{value:e.opVehicleVO.driverIds,callback:function(t){e.$set(e.opVehicleVO,"driverIds",t)},expression:"opVehicleVO.driverIds"}},e._l(e.driverArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"new",on:{click:function(t){e.jump("driverAdminister")}}},[e._v("\n                  新增\n                ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"核定载重"}},[i("el-input",{model:{value:e.opVehicleVO.approveWeight,callback:function(t){e.$set(e.opVehicleVO,"approveWeight",t)},expression:"opVehicleVO.approveWeight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"服务开始日",prop:"startAt"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.opVehicleVO.startAt,callback:function(t){e.$set(e.opVehicleVO,"startAt",t)},expression:"opVehicleVO.startAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"购买日期"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.opVehicleVO.buyAt,callback:function(t){e.$set(e.opVehicleVO,"buyAt",t)},expression:"opVehicleVO.buyAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"服务结束日",prop:"endAt"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},on:{change:e.endTime},model:{value:e.opVehicleVO.endAt,callback:function(t){e.$set(e.opVehicleVO,"endAt",t)},expression:"opVehicleVO.endAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"强制报废日"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.opVehicleVO.scrapAt,callback:function(t){e.$set(e.opVehicleVO,"scrapAt",t)},expression:"opVehicleVO.scrapAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车辆图标",prop:"icon"}},e._l(e.vehicleIcon,function(t){return i("el-radio",{key:t.title,attrs:{label:t.icon},model:{value:e.opVehicleVO.icon,callback:function(t){e.$set(e.opVehicleVO,"icon",t)},expression:"opVehicleVO.icon"}},[i("i",{staticClass:"iconfont",class:t.icon})])}))],1)],1)])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("设备信息")]),e._v(" "),e.item1?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item1")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item1")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item1,expression:"item1"}]},[i("el-form",{ref:"ruleForm1",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.equipmentVO,rules:e.rules1,"label-width":"130px"}},[i("el-form-item",{staticClass:"formItem",attrs:{label:"设备号",prop:"deviceId"}},[i("el-select",{staticStyle:{width:"176px"},attrs:{clearable:"",filterable:""},on:{change:e.simFn},model:{value:e.equipmentVO.deviceId,callback:function(t){e.$set(e.equipmentVO,"deviceId",t)},expression:"equipmentVO.deviceId"}},e._l(e.deviceArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"new",on:{click:function(t){e.jump("deviceAdminister")}}},[e._v("\n                  新增\n                ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"安装日期",prop:"installDate"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.equipmentVO.installDate,callback:function(t){e.$set(e.equipmentVO,"installDate",t)},expression:"equipmentVO.installDate"}})],1),e._v(" "),i("el-form-item",{staticClass:"formItem",attrs:{label:"SIM卡号"}},[i("el-select",{staticStyle:{width:"176px"},attrs:{disabled:"",placeholder:"无"},model:{value:e.equipmentVO.simId,callback:function(t){e.$set(e.equipmentVO,"simId",t)},expression:"equipmentVO.simId"}},e._l(e.simArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"new",on:{click:function(t){e.jump("SIMAdminister")}}},[e._v("\n                  新增\n                ")])],1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("行驶证信息")]),e._v(" "),e.item2?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item2")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item2")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item2,expression:"item2"}]},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.opDrivingLicenseVO,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"行驶号证"}},[i("el-input",{model:{value:e.opDrivingLicenseVO.drivingNum,callback:function(t){e.$set(e.opDrivingLicenseVO,"drivingNum",t)},expression:"opDrivingLicenseVO.drivingNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"品牌型号"}},[i("el-input",{model:{value:e.opDrivingLicenseVO.model,callback:function(t){e.$set(e.opDrivingLicenseVO,"model",t)},expression:"opDrivingLicenseVO.model"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"发动机号"}},[i("el-input",{model:{value:e.opDrivingLicenseVO.engineNum,callback:function(t){e.$set(e.opDrivingLicenseVO,"engineNum",t)},expression:"opDrivingLicenseVO.engineNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"车架号"}},[i("el-input",{model:{value:e.opDrivingLicenseVO.vin,callback:function(t){e.$set(e.opDrivingLicenseVO,"vin",t)},expression:"opDrivingLicenseVO.vin"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"到期日期"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.opDrivingLicenseVO.timeoutAt,callback:function(t){e.$set(e.opDrivingLicenseVO,"timeoutAt",t)},expression:"opDrivingLicenseVO.timeoutAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"提前提醒天数"}},[i("el-input",{model:{value:e.opDrivingLicenseVO.advanceNum,callback:function(t){e.$set(e.opDrivingLicenseVO,"advanceNum",t)},expression:"opDrivingLicenseVO.advanceNum"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"行驶证照片(正面)"}},[i("el-upload",{ref:"photoFront",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/photoFront","on-success":e.onSuccess,"on-remove":e.onremove,"before-remove":e.handleRemove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[0],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传正面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"行驶证照片(反面)"}},[i("el-upload",{ref:"photoBack",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/photoBack","on-success":e.onSuccess,"before-remove":e.handleRemove,accept:".png,.jpg","on-remove":e.onremove,"on-exceed":e.handleExceed,"file-list":e.fileList[1],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传反面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("运输证信息")]),e._v(" "),e.item3?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item3")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item3")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item3,expression:"item3"}]},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.opTransportLicenseVO,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"运输证号"}},[i("el-input",{model:{value:e.opTransportLicenseVO.transportNum,callback:function(t){e.$set(e.opTransportLicenseVO,"transportNum",t)},expression:"opTransportLicenseVO.transportNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"经营范围"}},[i("el-input",{model:{value:e.opTransportLicenseVO.busScope,callback:function(t){e.$set(e.opTransportLicenseVO,"busScope",t)},expression:"opTransportLicenseVO.busScope"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"到期日期"}},[i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.opTransportLicenseVO.timeoutAt,callback:function(t){e.$set(e.opTransportLicenseVO,"timeoutAt",t)},expression:"opTransportLicenseVO.timeoutAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"提前提醒天数"}},[i("el-input",{model:{value:e.opTransportLicenseVO.advanceNum,callback:function(t){e.$set(e.opTransportLicenseVO,"advanceNum",t)},expression:"opTransportLicenseVO.advanceNum"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"720px"},attrs:{label:"运输证照片"}},[i("el-upload",{ref:"photo",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/photo","on-success":e.onSuccess,"before-remove":e.handleRemove,"on-remove":e.onremove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[2],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"footBtn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.drawerDisplay=!1}}},[e._v("取消")])],1)]):e._e(),e._v(" "),"车辆密码"===e.drawerTitle?i("div",[i("el-form",{ref:"password",staticClass:"demo-ruleForm",attrs:{model:e.password,"status-icon":"",rules:e.passwordRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"车牌号码"}},[e._v("\n          "+e._s(e.password.licenseNum)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:"车队/公司"}},[e._v("\n          "+e._s(e.password.motorcadeName)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:"密码",prop:"pass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.password.pass,callback:function(t){e.$set(e.password,"pass",t)},expression:"password.pass"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"确认密码",prop:"checkPass"}},[i("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.password.checkPass,callback:function(t){e.$set(e.password,"checkPass",t)},expression:"password.checkPass"}})],1)],1),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"500px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.passwordFn("password")}}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.drawerDisplay=!1}}},[e._v("取消")])],1)],1):e._e()]),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.dialogVisible,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},["批量导入"===e.drawerTitle?i("div",[i("el-form",{ref:"upLoad",staticStyle:{"margin-top":"10px"},attrs:{model:e.upLoadData,rules:e.upLoadRole,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"所属车队",prop:"motorcadeId"}},[i("el-cascader",{staticStyle:{width:"356px"},attrs:{options:e.resetMenus,props:{checkStrictly:!0},clearable:"",filterable:""},on:{change:e.motorcadeIdeValue},model:{value:e.upLoadData.motorcadeId,callback:function(t){e.$set(e.upLoadData,"motorcadeId",t)},expression:"upLoadData.motorcadeId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"上传文件"}},[i("div",{staticClass:"uploadDialogClass"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.$config.API_CONFIG.API_ROOT+"/vehicle/import/"+e.upLoadData.motorcadeId,name:"file",headers:e.upData,"on-success":e.successUpload,"before-upload":e.beforeUpload,"auto-upload":!1,accept:".excel,.xlsx,.xls",multiple:"","file-list":e.fileLists,limit:1}},[i("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击选取文件")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只支持Excel文件，大小5M以内")])],1),e._v(" "),i("a",{staticClass:"upload-click-span",attrs:{href:"http://cipas2-oss.oss-cn-shenzhen.aliyuncs.com/upload/20191121/18ef538f9ff04e93b0dbaf847759722d.xls"},on:{click:function(e){e.stopPropagation()}}},[e._v("下载模板文件")])],1)])],1),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"500px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.uploadSubmit}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")])],1)],1):e._e()])],1)},[],!1,null,"f74dbf64",null);m.options.__file="vehicleAdminister.vue";t.default=m.exports}}]);