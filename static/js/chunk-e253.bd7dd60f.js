(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e253"],{"21ia":function(e,t,a){e.exports=a.p+"static/img/17_cb_xs.75e5041.png"},"2LiM":function(e,t,a){e.exports=a.p+"static/img/16_jc_xs.ead5176.png"},"9ADt":function(e,t,a){e.exports=a.p+"static/img/01_kc_xs.85c19c4.png"},Eejq:function(e,t,a){},"L+qT":function(e,t,a){e.exports=a.p+"static/img/09_pbc_xs.063916b.png"},"La+X":function(e,t,a){e.exports=a.p+"static/img/15_ztc_xs.1ec259e.png"},Syyn:function(e,t,a){"use strict";a.r(t);var i=a("bS4n"),r=a.n(i),o=a("ABCu"),n=a("mSNy"),c=a("8t5x"),l={components:{treeView:o.a},data:function(){var e=this;return{drawerObj:{isShow:!1,title:n.a.t("vehicleAdminister.quickly_add_vehicle"),size:"500px",formLabelWidth:"140px",formWidth:"280px",loading:!1},formData:{createType:1,deviceNum:null,licenseNum:null,simNum:null,licenseColor:2,motorcadeId:null,motorcadeName:null,deviceType:1,channelNum:0,channelNames:[],icon:"02_czc_",startNumber:null,endNumber:null},rules:{deviceNum:[{required:!0,validator:function(t,a,i){if(1===e.formData.createType)a?i():i(new Error(n.a.t("devicePage.device_num_rule")));else if(a&&e.formData.startNumber&&e.formData.endNumber){var r=new RegExp(/^\d+$/);r.test(e.formData.startNumber)&&r.test(e.formData.endNumber)?i():i(new Error(n.a.t("devicePage.device_num_tip_2")))}else i(new Error(n.a.t("devicePage.device_num_rule")))},trigger:"blur"}],licenseNum:[{required:!0,message:n.a.t("vehicleAdminister.enter_license_plate_number"),trigger:"blur"}],motorcadeId:[{required:!0,message:n.a.t("devicePage.form_rule_message_2"),trigger:"blur"}]},channeObj:{},deviceType:[],devNumList:[],channelTotal:37,deviceNumPopover:!1,devNumListSearchStatus:!1,devNumListSearch:"",motorcadeOption:{motorcadeId:null,name:null,filter:"",treeOption:{defaultProps:{children:"opMotorcadeNodes",label:"name"},nodeKey:"motorcadeId",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}}},iconList:[{name:n.a.t("vehicleAdminister.bus"),value:"01_kc_",iconUrl:a("9ADt")},{name:n.a.t("vehicleAdminister.taxi"),value:"02_czc_",iconUrl:a("yEz2")},{name:n.a.t("vehicleAdminister.school_bus"),value:"03_xc_",iconUrl:a("l+Cu")},{name:n.a.t("vehicleAdminister.truck"),value:"04_hc_",iconUrl:a("j+9R")},{name:n.a.t("vehicleAdminister.container_truck"),value:"05_jzxc_",iconUrl:a("qOkx")},{name:n.a.t("vehicleAdminister.tank_car"),value:"06_gc_",iconUrl:a("YWMK")},{name:n.a.t("vehicleAdminister.tractor_text_1"),value:"07_qyc_",iconUrl:a("lpko")},{name:n.a.t("vehicleAdminister.trailer"),value:"08_gc_",iconUrl:a("bqyo")},{name:n.a.t("vehicleAdminister.flatbed_car"),value:"09_pbc_",iconUrl:a("L+qT")},{name:n.a.t("vehicleAdminister.concrete_mixing_tank_truck"),value:"10_jbgc_",iconUrl:a("aL2/")},{name:n.a.t("vehicleAdminister.dangerous_goods_transport_vehicle"),value:"11_wxpysc_",iconUrl:a("fZjX")},{name:n.a.t("vehicleAdminister.agricultural_vehicles"),value:"12_nyc_",iconUrl:a("p0cv")},{name:n.a.t("vehicleAdminister.tractor_text_2"),value:"13_tlj_",iconUrl:a("iREr")},{name:n.a.t("vehicleAdminister.sanitation_garbage_truck"),value:"14_hwljc_",iconUrl:a("yrqw")},{name:n.a.t("vehicleAdminister.muck_truck"),value:"15_ztc_",iconUrl:a("La+X")},{name:n.a.t("vehicleAdminister.police_car"),value:"16_jc_",iconUrl:a("2LiM")},{name:n.a.t("vehicleAdminister.vessel"),value:"17_cb_",iconUrl:a("21ia")}]}},computed:r()({},Object(c.b)(["elNorms"])),watch:{"motorcadeOption.filter":function(e){this.$refs._motorcade_type_tree.$refs.sonTree.filter(e)},"formData.channelNum":function(e){this.channeObj={};for(var t=[],a=0;a<e;a++)this.$set(this.channeObj,a,"CH"+(a+1)),t.push(this.channeObj[a]);this.formData.channelNames=t}},created:function(){this.getCodesFn()},methods:{getCodesFn:function(){var e=this;this.$http.get("/dict/list/codes",{dicCodes:"deviceType"}).then(function(t){if(t.code===e.$config.API_STATUS.OK)for(var a in t.data)e[a]=t.data[a].map(function(e){return{value:e.itemName,label:e.itemValue}});e.getDevNumDataFn()})},getDevNumDataFn:function(){var e=this;this.$http.get("/device/list/vehicle/all").then(function(t){t.code===e.$config.API_STATUS.OK&&t.data&&(e.devNumList=t.data.map(function(t){return{deviceNum:t.deviceNum,companyId:t.companyId,companyName:t.companyName,deviceType:t.deviceType,deviceTypeName:e.deviceTypeOfNameFn(t.deviceType)}}))})},deviceTypeOfNameFn:function(e){for(var t="",a=0;a<this.deviceType.length;a++){var i=this.deviceType[a];if(i.value===e){t=i.label;break}}return t},openFn:function(){this.formData=this.$options.data().formData,this.motorcadeOption=this.$options.data().motorcadeOption,this.deviceNumPopover=!1,this.devNumListSearchStatus=!1,this.devNumListSearch="",this.drawerObj.isShow=!0},motorcadeNodeClick:function(e,t,a){this.$set(this[a],"motorcadeId",e.motorcadeId),this.$set(this[a],"motorcadeName",e.name),this.$set(this.motorcadeOption,"motorcadeId",e.motorcadeId),this.$set(this.motorcadeOption,"name",e.name),this.$refs._motorcade_tree_select.blur()},deviceNumTableRowDblclickFn:function(e){this.formData.deviceNum=e.deviceNum,this.formData.simNum=e.simNum,this.deviceNumPopover=!1},filterDevNumList:function(){var e=this;return this.devNumList.filter(function(t){return!e.devNumListSearch||t.deviceNum.toLowerCase().includes(e.devNumListSearch.toLowerCase())})},opacityTypeChangeFn:function(){this.$refs._form.clearValidate()},submitFn:function(){var e=this;this.$refs._form.validate(function(t){t&&(e.drawerObj.loading=!0,e.$http.post("/vehicle/fastCreate",e.formData).then(function(t){e.drawerObj.loading=!1,t.code===e.$config.API_STATUS.OK&&(e.drawerObj.isShow=!1,e.$message.success(t.message),e.devNumList=e.devNumList.filter(function(t){return e.formData.deviceNum!==t.deviceNum}),e.$parent.refreshTableFn&&e.$parent.refreshTableFn())}).catch(function(){e.drawerObj.loading=!1}))})}}},s=(a("r0m4"),a("ZrdR")),m=Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-drawer",{attrs:{title:e.drawerObj.title,visible:e.drawerObj.isShow,size:e.drawerObj.size,"wrapper-closable":!1},on:{"update:visible":function(t){e.$set(e.drawerObj,"isShow",t)}}},[a("div",{staticClass:"drawer-body"},[a("el-form",{ref:"_form",attrs:{model:e.formData,rules:e.rules,size:e.elNorms.formSize,"label-width":e.drawerObj.formLabelWidth}},[a("el-form-item",{attrs:{label:e.$t("devicePage.opacity_type")+"：",prop:"createType"}},[a("el-radio-group",{on:{change:e.opacityTypeChangeFn},model:{value:e.formData.createType,callback:function(t){e.$set(e.formData,"createType",t)},expression:"formData.createType"}},[a("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("devicePage.opacity_type_1")))]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("devicePage.opacity_type_2")))])],1)],1),e._v(" "),1===e.formData.createType?a("el-form-item",{attrs:{label:this.$t("vehicleAdminister.equipment_number")+"：",prop:"deviceNum"}},[a("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.deviceNum,callback:function(t){e.$set(e.formData,"deviceNum",t)},expression:"formData.deviceNum"}},[a("template",{slot:"append"},[a("el-popover",{attrs:{placement:"bottom-end",width:"500",offset:80},model:{value:e.deviceNumPopover,callback:function(t){e.deviceNumPopover=t},expression:"deviceNumPopover"}},[a("el-table",{attrs:{data:e.filterDevNumList(),height:300,size:"mini"},on:{"row-click":e.deviceNumTableRowDblclickFn}},[a("el-table-column",{attrs:{property:"deviceNum",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[!1===e.devNumListSearchStatus?a("div",{attrs:{"init-data":t.row}},[e._v(e._s(e.$t("devicePage.device_num"))),a("i",{staticClass:"el-icon-search device-search-icon",on:{click:function(t){e.devNumListSearchStatus=!0}}})]):a("div",{staticClass:"device-search-view"},[a("el-input",{attrs:{size:"mini"},model:{value:e.devNumListSearch,callback:function(t){e.devNumListSearch=t},expression:"devNumListSearch"}}),e._v(" "),a("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.devNumListSearch="",e.devNumListSearchStatus=!1}}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{property:"deviceTypeName",label:e.$t("devicePage.template_type"),align:"center"}}),e._v(" "),a("el-table-column",{attrs:{property:"companyName",label:e.$t("devicePage.company_name"),align:"center"}})],1),e._v(" "),a("div",{staticClass:"device-num-icon",attrs:{slot:"reference"},on:{click:function(t){e.deviceNumPopover=!0}},slot:"reference"},[a("i",{staticClass:"el-icon-arrow-down"})])],1)],1)],2)],1):e._e(),e._v(" "),2===e.formData.createType?a("el-form-item",{attrs:{label:this.$t("vehicleAdminister.equipment_number")+"：",prop:"deviceNum"}},[a("div",[a("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.deviceNum,callback:function(t){e.$set(e.formData,"deviceNum","string"==typeof t?t.trim():t)},expression:"formData.deviceNum"}},[a("template",{slot:"prepend"},[e._v(e._s(e.$t("devicePage.prefix_number")))])],2)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{style:"width: 190px;",attrs:{size:e.elNorms.size,maxlength:"4"},model:{value:e.formData.startNumber,callback:function(t){e.$set(e.formData,"startNumber","string"==typeof t?t.trim():t)},expression:"formData.startNumber"}},[a("template",{slot:"prepend"},[e._v(e._s(e.$t("devicePage.append_number")))])],2),e._v(" "),a("span",{staticStyle:{margin:"0 4px"}},[e._v("-")]),e._v(" "),a("el-input",{style:"width: 70px;",attrs:{size:e.elNorms.size,maxlength:"4"},model:{value:e.formData.endNumber,callback:function(t){e.$set(e.formData,"endNumber","string"==typeof t?t.trim():t)},expression:"formData.endNumber"}})],1),e._v(" "),a("div",{staticClass:"device-num-tip"},[e._v(e._s(e.$t("devicePage.device_num_tip")))])]):e._e(),e._v(" "),1===e.formData.createType?a("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_number")+"：",prop:"licenseNum"}},[a("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.licenseNum,callback:function(t){e.$set(e.formData,"licenseNum",t)},expression:"formData.licenseNum"}})],1):e._e(),e._v(" "),1===e.formData.createType?a("el-form-item",{attrs:{label:this.$t("vehicleAdminister.sim_number")+"："}},[a("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.simNum,callback:function(t){e.$set(e.formData,"simNum",t)},expression:"formData.simNum"}})],1):e._e(),e._v(" "),1===e.formData.createType?a("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_color")+"：",prop:"licenseColor"}},[a("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size,filterable:""},model:{value:e.formData.licenseColor,callback:function(t){e.$set(e.formData,"licenseColor",t)},expression:"formData.licenseColor"}},e._l(e.$parent.licenseColor,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("vehicleAdminister.fleet")+"：",prop:"motorcadeId"}},[a("el-select",{ref:"_motorcade_tree_select",style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.motorcadeId,callback:function(t){e.$set(e.formData,"motorcadeId",t)},expression:"formData.motorcadeId"}},[a("el-option",{staticClass:"tree-select",attrs:{value:e.formData.motorcadeId,label:e.formData.motorcadeName}},[a("div",{staticClass:"input-query",on:{click:function(e){e.stopPropagation()}}},[a("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.fleet"),"prefix-icon":"el-icon-search"},model:{value:e.motorcadeOption.filter,callback:function(t){e.$set(e.motorcadeOption,"filter","string"==typeof t?t.trim():t)},expression:"motorcadeOption.filter"}})],1),e._v(" "),a("tree-view",{ref:"_motorcade_type_tree",attrs:{"tree-data":e.motorcadeOption.treeOption,"defined-data":e.$parent.treeSelectData},on:{"node-click":function(t){e.motorcadeNodeClick(arguments[0],arguments[1],"formData")}},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:e.$t("devicePage.device_type"),prop:"deviceType"}},[a("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},on:{change:function(t){e.formData.channelNum=0}},model:{value:e.formData.deviceType,callback:function(t){e.$set(e.formData,"deviceType",t)},expression:"formData.deviceType"}},e._l(e.deviceType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),1===e.formData.deviceType?a("el-form-item",{attrs:{label:e.$t("devicePage.channel_number"),prop:"deviceType"}},[a("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.channelNum,callback:function(t){e.$set(e.formData,"channelNum",t)},expression:"formData.channelNum"}},e._l(e.channelTotal,function(e){return a("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),e._v(" "),e._l(e.channeObj,function(t,i){return a("el-input",{key:i,staticClass:"channel-input",attrs:{size:e.elNorms.size},model:{value:e.channeObj[i],callback:function(t){e.$set(e.channeObj,i,t)},expression:"channeObj[key]"}})})],2):e._e(),e._v(" "),a("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_icon")}},[a("el-radio-group",{staticStyle:{width:"340px"},model:{value:e.formData.icon,callback:function(t){e.$set(e.formData,"icon",t)},expression:"formData.icon"}},e._l(e.iconList,function(e){return a("el-radio",{key:e.value,attrs:{label:e.value}},[a("img",{staticStyle:{height:"28px","vertical-align":"middle"},attrs:{src:e.iconUrl,alt:""}})])}))],1)],1)],1),e._v(" "),a("div",{staticClass:"footer-button"},[a("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle,loading:e.drawerObj.loading,disabled:e.drawerObj.loading},on:{click:e.submitFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),a("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerObj.isShow=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)])},[],!1,null,"68439e51",null);m.options.__file="vehicleQuicklyAdd.vue";t.default=m.exports},YWMK:function(e,t,a){e.exports=a.p+"static/img/06_gc_xs.aa3ede2.png"},"aL2/":function(e,t,a){e.exports=a.p+"static/img/10_jbgc_xs.2448c10.png"},bqyo:function(e,t,a){e.exports=a.p+"static/img/08_gc_xs.c6fad11.png"},fZjX:function(e,t,a){e.exports=a.p+"static/img/11_wxpysc_xs.343b1b8.png"},iREr:function(e,t,a){e.exports=a.p+"static/img/13_tlj_xs.f78b43e.png"},"j+9R":function(e,t,a){e.exports=a.p+"static/img/04_hc_xs.b203d79.png"},"l+Cu":function(e,t,a){e.exports=a.p+"static/img/03_xc_xs.0163428.png"},lpko:function(e,t,a){e.exports=a.p+"static/img/07_qyc_xs.68f60c4.png"},p0cv:function(e,t,a){e.exports=a.p+"static/img/12_nyc_xs.9d68257.png"},qOkx:function(e,t,a){e.exports=a.p+"static/img/05_jzxc_xs.dca079b.png"},r0m4:function(e,t,a){"use strict";var i=a("Eejq");a.n(i).a},yEz2:function(e,t,a){e.exports=a.p+"static/img/02_czc_xs.f40cc07.png"},yrqw:function(e,t,a){e.exports=a.p+"static/img/14_hwljc_xs.9be384a.png"}}]);