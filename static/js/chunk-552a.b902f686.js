(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-552a","NVOe"],{Gq3p:function(e,t,i){},NVOe:function(e,t,i){"use strict";i.r(t);var o=i("bS4n"),a=i.n(o),n=i("8t5x");t.default={data:function(){return{permissionList:{userList:"/user/list",userCreate:"/user/create",userExport:"/user/export",userUpdate:"/user/update/**",userVehicle:"/user/vehicle/**",userReset:"/user/reset/**",userStatus:"/user/status",userDelete:"/user/delete",userListOnline:"/user/list/online",userOffline:"/user/offline/**/**",roleTreeList:"/role/treeList",roleCreate:"/role/create",roleUpdate:"/role/update",roleDelete:"/role/delete",roleAllocMenuAndPerm:"/role/allocMenuAndPerm",roleUpdateUserRole:"/role/updateUserRole",logListOperate:"/log/list/operate",logOperateExport:"/log/operate/export",logListLogin:"/log/list/login",logLoginExport:"/log/login/export",logListEquipment:"/log/list/equipment",logEquipmentExport:"/log/equipment/export"}}},computed:a()({},Object(n.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[e])}}}},mAiG:function(e,t,i){"use strict";i.r(t);var o=i("AlM9"),a=i("NVOe"),n={components:{TableView:o.a},mixins:[a.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.device_name"),key:"name",type:"text"},{title:this.$t("logPage.region"),key:"address",type:"text"},{title:this.$t("logPage.execution_event"),key:"event",type:"text"},{title:this.$t("view.start_time"),key:"startTime",type:"text"},{title:this.$t("view.end_time"),key:"endTime",type:"text"},{title:this.$t("logPage.execution_record"),key:"record",type:"text"},{title:this.$t("logPage.operation_result"),type:"tag",key:"status",tags:[{value:1,text:this.$t("logPage.operation_result_true")},{value:0,text:this.$t("logPage.operation_result_false"),option:{type:"danger"}}]}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px"},{type:"input",key:"name",placeholder:this.$t("logPage.device_name"),width:"160px"},{type:"select",key:"status",width:"160px",placeholder:this.$t("logPage.operation_result"),clearable:!0,options:[{name:this.$t("logPage.operation_result_true"),value:1},{name:this.$t("logPage.operation_result_false"),value:0}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logEquipmentExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",size:"small",round:!1,funcName:"export"})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={startTime:e.loginTime[0],endTime:e.loginTime[1],name:e.name,event:e.event};this.$http.post("/log/list/equipment?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total)})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},export:function(){var e=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(t,i,o){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(i){t.key===i&&"operate"!==t.key&&(e.fieldMap[i]=t.title)})});var a=e.$refs.table._data.searchParams,n=a.loginTime,s=a.status,l=a.event,r=a.name;if("confirm"===t){var u={fieldMap:e.fieldMap,startTime:n[0],endTime:n[1],status:s,event:l,name:r};e.$http.download("/log/equipment/export?isToken=true",u),o()}else o()}}).catch(function(){})}}},s=(i("pJco"),i("ZrdR")),l=Object(s.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"equipmentLog"},[i("table-view",{ref:"table",attrs:{center:"","is-search":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,alias:e.alias,"is-shadow":""},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"b23e6568",null);l.options.__file="equipmentLog.vue";t.default=l.exports},pJco:function(e,t,i){"use strict";var o=i("Gq3p");i.n(o).a}}]);