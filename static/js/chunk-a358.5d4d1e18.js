(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-a358","chunk-552a","chunk-67fc","chunk-0c43","NVOe"],{"0m+7":function(t,e,i){"use strict";var a=i("CnU5");i.n(a).a},"1Drk":function(t,e,i){"use strict";i.r(e);var a=i("AlM9"),o=i("NVOe"),n={components:{TableView:a.a},mixins:[o.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.operating_time"),key:"createTime",type:"text"},{title:this.$t("logPage.operation_user"),key:"username",type:"text"},{title:this.$t("logPage.application_terminal"),key:"loginType",type:"tag",tags:[{value:0,text:this.$t("logPage.application_terminal_1")},{value:1,text:this.$t("logPage.application_terminal_2")},{value:2,text:this.$t("logPage.application_terminal_3")},{value:3,text:this.$t("logPage.application_terminal_4")}]},{title:this.$t("logPage.functional_area"),key:"functionArea",type:"text"},{title:this.$t("logPage.operation_type"),key:"operationType",type:"tag",tags:[{value:0,text:this.$t("logPage.operation_type_1")},{value:1,text:this.$t("logPage.operation_type_2")},{value:2,text:this.$t("logPage.operation_type_3")},{value:3,text:this.$t("logPage.operation_type_4")},{value:4,text:this.$t("logPage.operation_type_5")}]},{title:this.$t("logPage.operation_record"),key:"operation",type:"text"},{title:this.$t("logPage.login_ip"),key:"loginIp",type:"text"},{title:this.$t("logPage.operation_result"),type:"tag",key:"status",tags:[{value:1,text:this.$t("logPage.operation_result_true")},{value:0,text:this.$t("logPage.operation_result_false"),option:{type:"dange"}}]}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px"},{type:"input",key:"username",placeholder:this.$t("logPage.operation_user"),width:"160px"},{type:"input",key:"functionArea",width:"160px",placeholder:this.$t("logPage.functional_area")},{type:"select",key:"loginType",placeholder:this.$t("logPage.application_terminal"),width:"160px",clearable:!0,options:[{name:this.$t("logPage.application_terminal_1"),value:0},{name:this.$t("logPage.application_terminal_2"),value:1},{name:this.$t("logPage.application_terminal_3"),value:2},{name:this.$t("logPage.application_terminal_4"),value:3}]},{type:"select",key:"status",width:"160px",placeholder:this.$t("logPage.operation_result"),clearable:!0,options:[{name:this.$t("logPage.operation_result_true"),value:1},{name:this.$t("logPage.operation_result_false"),value:0}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logOperateExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",size:"small",round:!1,funcName:"export"})},getTableData:function(t){var e=this;this.tableOptions.loading=!0;var i={startTime:t.loginTime[0],endTime:t.loginTime[1],loginType:t.loginType,functionArea:t.functionArea,status:t.status,username:t.username};this.$http.post("/log/list/operate?pageNum="+t.pageNum+"&pageSize="+t.pageSize,i).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total,e.tableOptions.loading=!1)})},tableResponseFn:function(t,e,i){this[e.funcName].call(function(){},t,e,i)},export:function(){var t=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(e,i,a){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(i){e.key===i&&"operate"!==e.key&&(t.fieldMap[i]=e.title)})});var o=t.$refs.table._data.searchParams,n=o.loginTime,l=o.username,s=o.method,r=o.loginType,p=o.status;if("confirm"===e){var u={fieldMap:t.fieldMap,startTime:n[0],endTime:n[1],username:l,method:s,loginType:r,status:p};t.$http.download("/log/operate/export?isToken=true",u),a()}else a()}}).catch(function(){})}}},l=(i("L6Ho"),i("ZrdR")),s=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"operationLog"},[i("table-view",{ref:"table",attrs:{center:"","id-key":"id","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"pagination-layout":t.tableOptions.paginationLayout,"search-controls":t.tableOptions.searchControls,"button-controls":t.tableOptions.buttonControls,loading:t.tableOptions.loading,checked:"","is-shadow":"","column-view":"",alias:t.alias},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"4e489c2e",null);s.options.__file="operationLog.vue";e.default=s.exports},"2USO":function(t,e,i){"use strict";i.r(e);var a=i("1Drk"),o=i("yfck"),n=i("mAiG"),l=i("XVnh"),s=i("NVOe"),r={name:"LogManagement",components:{operationLog:a.default,loginLog:o.default,equipmentLog:n.default,notPerm:l.a},mixins:[s.default],data:function(){return{activeName:"operation",isPermission:!1}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.isPermissionShow("logListOperate")?(this.isPermission=!0,this.activeName="operation"):this.isPermissionShow("logListLogin")?(this.isPermission=!0,this.activeName="login"):this.isPermissionShow("logListEquipment")?(this.isPermission=!0,this.activeName="equipment"):this.isPermission=!1}}},p=(i("pJ3+"),i("ZrdR")),u=Object(p.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-wrap"},[t.isPermission?i("div",{staticClass:"main"},[i("el-tabs",{staticClass:"init-tabs",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.isPermissionShow("logListOperate")?i("el-tab-pane",{attrs:{name:"operation"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_system_icon_czrz"}),t._v(" "+t._s(t.$t("logPage.operation_log")))]),t._v(" "),"operation"===t.activeName?i("operationLog"):t._e()],1):t._e(),t._v(" "),t.isPermissionShow("logListLogin")?i("el-tab-pane",{attrs:{name:"login"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_system_icon_dlrz"}),t._v(" "+t._s(t.$t("logPage.login_log")))]),t._v(" "),"login"===t.activeName?i("loginLog"):t._e()],1):t._e(),t._v(" "),t.isPermissionShow("logListEquipment")?i("el-tab-pane",{attrs:{name:"equipment"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_system_icon_sbrz"}),t._v(" "+t._s(t.$t("logPage.device_log")))]),t._v(" "),"equipment"===t.activeName?i("equipmentLog"):t._e()],1):t._e()],1)],1):t._e(),t._v(" "),t.isPermission||t.$store.state.app.permsDataLoading?t._e():i("notPerm")],1)},[],!1,null,"45882fde",null);u.options.__file="logManagement.vue";e.default=u.exports},CnU5:function(t,e,i){},"EA+7":function(t,e,i){},EYRt:function(t,e,i){},Gq3p:function(t,e,i){},L6Ho:function(t,e,i){"use strict";var a=i("EYRt");i.n(a).a},NVOe:function(t,e,i){"use strict";i.r(e);var a=i("bS4n"),o=i.n(a),n=i("8t5x");e.default={data:function(){return{permissionList:{userList:"/user/list",userCreate:"/user/create",userExport:"/user/export",userUpdate:"/user/update/**",userVehicle:"/user/vehicle/**",userReset:"/user/reset/**",userStatus:"/user/status",userDelete:"/user/delete",userListOnline:"/user/list/online",userOffline:"/user/offline/**/**",roleTreeList:"/role/treeList",roleCreate:"/role/create",roleUpdate:"/role/update",roleDelete:"/role/delete",roleAllocMenuAndPerm:"/role/allocMenuAndPerm",roleUpdateUserRole:"/role/updateUserRole",logListOperate:"/log/list/operate",logOperateExport:"/log/operate/export",logListLogin:"/log/list/login",logLoginExport:"/log/login/export",logListEquipment:"/log/list/equipment",logEquipmentExport:"/log/equipment/export"}}},computed:o()({},Object(n.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[t])}}}},jcYt:function(t,e,i){t.exports=i.p+"static/img/not-perm.d97c442.png"},mAiG:function(t,e,i){"use strict";i.r(e);var a=i("AlM9"),o=i("NVOe"),n={components:{TableView:a.a},mixins:[o.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.device_name"),key:"name",type:"text"},{title:this.$t("logPage.region"),key:"address",type:"text"},{title:this.$t("logPage.execution_event"),key:"event",type:"text"},{title:this.$t("view.start_time"),key:"startTime",type:"text"},{title:this.$t("view.end_time"),key:"endTime",type:"text"},{title:this.$t("logPage.execution_record"),key:"record",type:"text"},{title:this.$t("logPage.operation_result"),type:"tag",key:"status",tags:[{value:1,text:this.$t("logPage.operation_result_true")},{value:0,text:this.$t("logPage.operation_result_false"),option:{type:"danger"}}]}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px"},{type:"input",key:"name",placeholder:this.$t("logPage.device_name"),width:"160px"},{type:"select",key:"status",width:"160px",placeholder:this.$t("logPage.operation_result"),clearable:!0,options:[{name:this.$t("logPage.operation_result_true"),value:1},{name:this.$t("logPage.operation_result_false"),value:0}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logEquipmentExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",size:"small",round:!1,funcName:"export"})},getTableData:function(t){var e=this;this.tableOptions.loading=!0;var i={startTime:t.loginTime[0],endTime:t.loginTime[1],name:t.name,event:t.event};this.$http.post("/log/list/equipment?pageNum="+t.pageNum+"&pageSize="+t.pageSize,i).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.loading=!1,e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total)})},tableResponseFn:function(t,e,i){this[e.funcName].call(function(){},t,e,i)},export:function(){var t=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(e,i,a){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(i){e.key===i&&"operate"!==e.key&&(t.fieldMap[i]=e.title)})});var o=t.$refs.table._data.searchParams,n=o.loginTime,l=o.status,s=o.event,r=o.name;if("confirm"===e){var p={fieldMap:t.fieldMap,startTime:n[0],endTime:n[1],status:l,event:s,name:r};t.$http.download("/log/equipment/export?isToken=true",p),a()}else a()}}).catch(function(){})}}},l=(i("pJco"),i("ZrdR")),s=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"equipmentLog"},[i("table-view",{ref:"table",attrs:{center:"","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"button-controls":t.tableOptions.buttonControls,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading,alias:t.alias,"is-shadow":""},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"b23e6568",null);s.options.__file="equipmentLog.vue";e.default=s.exports},"pJ3+":function(t,e,i){"use strict";var a=i("EA+7");i.n(a).a},pJco:function(t,e,i){"use strict";var a=i("Gq3p");i.n(a).a},yfck:function(t,e,i){"use strict";i.r(e);var a=i("AlM9"),o=i("NVOe"),n={components:{TableView:a.a},mixins:[o.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.login_time"),key:"createTime",type:"text"},{title:this.$t("logPage.application_terminal"),key:"loginType",type:"tag",tags:[{value:0,text:this.$t("logPage.application_terminal_1")},{value:1,text:this.$t("logPage.application_terminal_2")},{value:2,text:this.$t("logPage.application_terminal_3")},{value:3,text:this.$t("logPage.application_terminal_4")}]},{title:this.$t("logPage.login_user"),key:"username",type:"text"},{title:this.$t("logPage.login_role"),key:"roleName",type:"text"},{title:this.$t("logPage.login_ip"),key:"loginIp",type:"text"},{title:this.$t("logPage.login_addr"),key:"loginAddr",type:"text"},{title:this.$t("logPage.login_equment"),key:"loginEqument",type:"text",minWidth:"150"}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px",size:"small"},{type:"input",key:"username",placeholder:this.$t("logPage.login_user"),width:"160px",size:"small"},{type:"select",key:"loginType",placeholder:this.$t("logPage.application_terminal"),width:"160px",size:"small",clearable:!0,options:[{name:this.$t("logPage.application_terminal_1"),value:0},{name:this.$t("logPage.application_terminal_2"),value:1},{name:this.$t("logPage.application_terminal_3"),value:2},{name:this.$t("logPage.application_terminal_4"),value:3}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logLoginExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",size:"small",round:!1,funcName:"export"})},getTableData:function(t){var e=this;this.tableOptions.loading=!0;var i={startTime:t.loginTime[0],endTime:t.loginTime[1],loginType:t.loginType,username:t.username};this.$http.post("/log/list/login?pageNum="+t.pageNum+"&pageSize="+t.pageSize,i).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.loading=!1,e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total)})},tableResponseFn:function(t,e,i){this[e.funcName].call(function(){},t,e,i)},export:function(){var t=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(e,i,a){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(i){e.key===i&&"operate"!==e.key&&(t.fieldMap[i]=e.title)})});var o=t.$refs.table._data.searchParams,n=o.loginTime,l=o.username,s=o.loginType;if("confirm"===e){var r={fieldMap:t.fieldMap,startTime:n[0],endTime:n[1],username:l,loginType:s};t.$http.download("/log/login/export?isToken=true",r),a()}else a()}}).catch(function(){})}}},l=(i("0m+7"),i("ZrdR")),s=Object(l.a)(n,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loginLog"},[i("table-view",{ref:"table",attrs:{center:"","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"button-controls":t.tableOptions.buttonControls,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading,alias:t.alias,"is-shadow":""},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"df6c697e",null);s.options.__file="loginLog.vue";e.default=s.exports}}]);