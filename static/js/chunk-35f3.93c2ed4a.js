(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-35f3","chunk-456b","chunk-8eba","chunk-4b00","NVOe"],{"1Drk":function(t,e,a){"use strict";a.r(e);var i=a("AlM9"),o=a("NVOe"),n={components:{TableView:i.a},mixins:[o.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.operating_time"),key:"createTime",type:"text"},{title:this.$t("logPage.operation_user"),key:"username",type:"text"},{title:this.$t("logPage.application_terminal"),key:"loginType",type:"tag",tags:[{value:0,text:this.$t("logPage.application_terminal_1")},{value:1,text:this.$t("logPage.application_terminal_2")},{value:2,text:this.$t("logPage.application_terminal_3")},{value:3,text:this.$t("logPage.application_terminal_4")}]},{title:this.$t("logPage.functional_area"),key:"functionArea",type:"text"},{title:this.$t("logPage.operation_type"),key:"operationType",type:"tag",tags:[{value:0,text:this.$t("logPage.operation_type_1")},{value:1,text:this.$t("logPage.operation_type_2")},{value:2,text:this.$t("logPage.operation_type_3")},{value:3,text:this.$t("logPage.operation_type_4")},{value:4,text:this.$t("logPage.operation_type_5")}]},{title:this.$t("logPage.operation_record"),key:"operation",type:"text"},{title:this.$t("logPage.login_ip"),key:"loginIp",type:"text"},{title:this.$t("logPage.operation_result"),type:"tag",key:"status",tags:[{value:1,text:this.$t("logPage.operation_result_true")},{value:0,text:this.$t("logPage.operation_result_false"),option:{type:"dange"}}]}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px"},{type:"input",key:"username",placeholder:this.$t("logPage.operation_user"),width:"160px"},{type:"input",key:"functionArea",width:"160px",placeholder:this.$t("logPage.functional_area")},{type:"select",key:"loginType",placeholder:this.$t("logPage.application_terminal"),width:"160px",clearable:!0,options:[{name:this.$t("logPage.application_terminal_1"),value:0},{name:this.$t("logPage.application_terminal_2"),value:1},{name:this.$t("logPage.application_terminal_3"),value:2},{name:this.$t("logPage.application_terminal_4"),value:3}]},{type:"select",key:"status",width:"160px",placeholder:this.$t("logPage.operation_result"),clearable:!0,options:[{name:this.$t("logPage.operation_result_true"),value:1},{name:this.$t("logPage.operation_result_false"),value:0}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},params:null}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logOperateExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",funcName:"export",dataStatus:!0})},getTableData:function(t){var e=this;this.tableOptions.loading=!0;var a={startTime:t.loginTime[0],endTime:t.loginTime[1],loginType:t.loginType,functionArea:t.functionArea,status:t.status,username:t.username};this.$http.post("/log/list/operate?pageNum="+t.pageNum+"&pageSize="+t.pageSize,a).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total,e.tableOptions.loading=!1)}),this.params=t},tableResponseFn:function(t,e,a){this[e.funcName].call(function(){},t,e,a)},export:function(){var t=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(e,a,i){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(a){e.key===a&&"operate"!==e.key&&(t.fieldMap[a]=e.title)})});var o=t.params,n=o.loginTime,l=o.username,s=o.method,r=o.loginType,p=o.status;if("confirm"===e){var u={fieldMap:t.fieldMap,startTime:n[0],endTime:n[1],username:l,method:s,loginType:r,status:p};t.tableOptions.total<t.$store.getters.userData.realtimeVideoUrl?t.$http.download("/log/operate/export?isToken=true",u):t.$http.post("/log/operate/export/async",u),i()}else i()}}).catch(function(){})}}},l=(a("7Kth"),a("ZrdR")),s=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"operationLog"},[a("table-view",{ref:"table",attrs:{center:"","id-key":"id","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"pagination-layout":t.tableOptions.paginationLayout,"search-controls":t.tableOptions.searchControls,"button-controls":t.tableOptions.buttonControls,loading:t.tableOptions.loading,checked:"","is-shadow":"","column-view":"",alias:t.alias},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"3b1c909e",null);s.options.__file="operationLog.vue";e.default=s.exports},"2USO":function(t,e,a){"use strict";a.r(e);var i=a("1Drk"),o=a("yfck"),n=a("mAiG"),l=a("XVnh"),s=a("NVOe"),r={name:"LogManagement",components:{operationLog:i.default,loginLog:o.default,equipmentLog:n.default,notPerm:l.a},mixins:[s.default],data:function(){return{activeName:"operation",isPermission:!1}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.isPermissionShow("logListOperate")?(this.isPermission=!0,this.activeName="operation"):this.isPermissionShow("logListLogin")?(this.isPermission=!0,this.activeName="login"):this.isPermissionShow("logListEquipment")?(this.isPermission=!0,this.activeName="equipment"):this.isPermission=!1}}},p=(a("pJ3+"),a("ZrdR")),u=Object(p.a)(r,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrap"},[t.isPermission?a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.isPermissionShow("logListOperate")?a("el-tab-pane",{attrs:{name:"operation"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_system_icon_czrz"}),t._v(" "+t._s(t.$t("logPage.operation_log")))]),t._v(" "),"operation"===t.activeName?a("operationLog"):t._e()],1):t._e(),t._v(" "),t.isPermissionShow("logListLogin")?a("el-tab-pane",{attrs:{name:"login"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_system_icon_dlrz"}),t._v(" "+t._s(t.$t("logPage.login_log")))]),t._v(" "),"login"===t.activeName?a("loginLog"):t._e()],1):t._e(),t._v(" "),t.isPermissionShow("logListEquipment")?a("el-tab-pane",{attrs:{name:"equipment"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_system_icon_sbrz"}),t._v(" "+t._s(t.$t("logPage.device_log")))]),t._v(" "),"equipment"===t.activeName?a("equipmentLog"):t._e()],1):t._e()],1)],1):t._e(),t._v(" "),t.isPermission||t.$store.state.app.permsDataLoading?t._e():a("notPerm")],1)},[],!1,null,"45882fde",null);u.options.__file="logManagement.vue";e.default=u.exports},"7Kth":function(t,e,a){"use strict";var i=a("P0Dd");a.n(i).a},"EA+7":function(t,e,a){},NVOe:function(t,e,a){"use strict";a.r(e);var i=a("bS4n"),o=a.n(i),n=a("8t5x");e.default={data:function(){return{permissionList:{userList:"/user/list",userCreate:"/user/create",userExport:"/user/export",userUpdate:"/user/update/**",userVehicle:"/user/vehicle/**",userReset:"/user/reset/**",userStatus:"/user/status",userDelete:"/user/delete",userListOnline:"/user/list/online",userOffline:"/user/offline/**/**",roleTreeList:"/role/treeList",roleCreate:"/role/create",roleUpdate:"/role/update",roleDelete:"/role/delete",roleAllocMenuAndPerm:"/role/allocMenuAndPerm",roleUpdateUserRole:"/role/updateUserRole",logListOperate:"/log/list/operate",logOperateExport:"/log/operate/export",logListLogin:"/log/list/login",logLoginExport:"/log/login/export",logListEquipment:"/log/list/equipment",logEquipmentExport:"/log/equipment/export"}}},computed:o()({},Object(n.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[t])}}}},P0Dd:function(t,e,a){},QMKx:function(t,e,a){"use strict";var i=a("WRYj");a.n(i).a},Rr62:function(t,e,a){"use strict";var i=a("lDyr");a.n(i).a},WRYj:function(t,e,a){},jcYt:function(t,e,a){t.exports=a.p+"static/img/not-perm.d97c442.png"},lDyr:function(t,e,a){},mAiG:function(t,e,a){"use strict";a.r(e);var i=a("AlM9"),o=a("NVOe"),n={components:{TableView:i.a},mixins:[o.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.device_name"),key:"name",type:"text"},{title:this.$t("logPage.region"),key:"address",type:"text"},{title:this.$t("logPage.execution_event"),key:"event",type:"text"},{title:this.$t("view.start_time"),key:"startTime",type:"text"},{title:this.$t("view.end_time"),key:"endTime",type:"text"},{title:this.$t("logPage.execution_record"),key:"record",type:"text"},{title:this.$t("logPage.operation_result"),type:"tag",key:"status",tags:[{value:1,text:this.$t("logPage.operation_result_true")},{value:0,text:this.$t("logPage.operation_result_false"),option:{type:"danger"}}]}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px"},{type:"input",key:"name",placeholder:this.$t("logPage.device_name"),width:"160px"},{type:"select",key:"status",width:"160px",placeholder:this.$t("logPage.operation_result"),clearable:!0,options:[{name:this.$t("logPage.operation_result_true"),value:1},{name:this.$t("logPage.operation_result_false"),value:0}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},params:null}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logEquipmentExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",funcName:"export",dataStatus:!0})},getTableData:function(t){var e=this;this.tableOptions.loading=!0;var a={startTime:t.loginTime[0],endTime:t.loginTime[1],name:t.name,event:t.event};this.$http.post("/log/list/equipment?pageNum="+t.pageNum+"&pageSize="+t.pageSize,a).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.loading=!1,e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total)})},tableResponseFn:function(t,e,a){this[e.funcName].call(function(){},t,e,a)},export:function(){var t=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(e,a,i){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(a){e.key===a&&"operate"!==e.key&&(t.fieldMap[a]=e.title)})});var o=t.params,n=o.loginTime,l=o.status,s=o.event,r=o.name;if("confirm"===e){var p={fieldMap:t.fieldMap,startTime:n[0],endTime:n[1],status:l,event:s,name:r};t.tableOptions.total<t.$store.getters.userData.realtimeVideoUrl?t.$http.download("/log/equipment/export?isToken=true",p):t.$http.post("/log/equipment/export/async",p),i()}else i()}}).catch(function(){})}}},l=(a("QMKx"),a("ZrdR")),s=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"equipmentLog"},[a("table-view",{ref:"table",attrs:{center:"","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"button-controls":t.tableOptions.buttonControls,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading,alias:t.alias,"is-shadow":""},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"4aa77a16",null);s.options.__file="equipmentLog.vue";e.default=s.exports},"pJ3+":function(t,e,a){"use strict";var i=a("EA+7");a.n(i).a},yfck:function(t,e,a){"use strict";a.r(e);var i=a("AlM9"),o=a("NVOe"),n={components:{TableView:i.a},mixins:[o.default],data:function(){return{fieldMap:{},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("logPage.login_time"),key:"createTime",type:"text"},{title:this.$t("logPage.application_terminal"),key:"loginType",type:"tag",tags:[{value:0,text:this.$t("logPage.application_terminal_1")},{value:1,text:this.$t("logPage.application_terminal_2")},{value:2,text:this.$t("logPage.application_terminal_3")},{value:3,text:this.$t("logPage.application_terminal_4")}]},{title:this.$t("logPage.login_user"),key:"username",type:"text"},{title:this.$t("logPage.login_role"),key:"roleName",type:"text"},{title:this.$t("logPage.login_ip"),key:"loginIp",type:"text"},{title:this.$t("logPage.login_addr"),key:"loginAddr",type:"text"},{title:this.$t("logPage.login_equment"),key:"loginEqument",type:"text",minWidth:"150"}],buttonControls:[],searchControls:[{type:"datetimerange",key:"loginTime",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"340px",size:"small"},{type:"input",key:"username",placeholder:this.$t("logPage.login_user"),width:"160px",size:"small"},{type:"select",key:"loginType",placeholder:this.$t("logPage.application_terminal"),width:"160px",size:"small",clearable:!0,options:[{name:this.$t("logPage.application_terminal_1"),value:0},{name:this.$t("logPage.application_terminal_2"),value:1},{name:this.$t("logPage.application_terminal_3"),value:2},{name:this.$t("logPage.application_terminal_4"),value:3}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},params:null}},computed:{},created:function(){},mounted:function(){},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("logLoginExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",funcName:"export",dataStatus:!0})},getTableData:function(t){var e=this;this.tableOptions.loading=!0;var a={startTime:t.loginTime[0],endTime:t.loginTime[1],loginType:t.loginType,username:t.username};this.$http.post("/log/list/login?pageNum="+t.pageNum+"&pageSize="+t.pageSize,a).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.tableOptions.loading=!1,e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total)}),this.params=t},tableResponseFn:function(t,e,a){this[e.funcName].call(function(){},t,e,a)},export:function(){var t=this;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),type:"primary",closeOnClickModal:!1,beforeClose:function(e,a,i){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(a){e.key===a&&"operate"!==e.key&&(t.fieldMap[a]=e.title)})});var o=t.params,n=o.loginTime,l=o.username,s=o.loginType;if("confirm"===e){var r={fieldMap:t.fieldMap,startTime:n[0],endTime:n[1],username:l,loginType:s};t.tableOptions.total<t.$store.getters.userData.realtimeVideoUrl?t.$http.download("/log/login/export?isToken=true",r):t.$http.post("/log/login/export/async",r),i()}else i()}}).catch(function(){})}}},l=(a("Rr62"),a("ZrdR")),s=Object(l.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginLog"},[a("table-view",{ref:"table",attrs:{center:"","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"button-controls":t.tableOptions.buttonControls,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading,alias:t.alias,"is-shadow":""},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",width:"60"},slot:"number"})],1)],1)},[],!1,null,"2a7246d2",null);s.options.__file="loginLog.vue";e.default=s.exports}}]);