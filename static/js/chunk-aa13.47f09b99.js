(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-aa13","chunk-6343"],{"+rYF":function(t,e,i){"use strict";var s=i("2tSA");i.n(s).a},"/Nqj":function(t,e,i){},"2tSA":function(t,e,i){},"6pvZ":function(t,e,i){},GDh3:function(t,e,i){"use strict";var s=i("/Nqj");i.n(s).a},JUJa:function(t,e,i){"use strict";i.r(e);var s=i("92lZ"),n={components:{VueDragResize:i.n(s).a},props:{componentIndex:{type:Number,default:0}},data:function(){return{echartsPie:null,echartsConfig:{successName:"成功",successNumber:22,failName:"失败",failNumber:8,labelLine:{length:20,length2:10},label:{color:"#FFFFFF",fontSize:14}},timer:null,dragConfig:{isActive:!1,w:300,h:300},dragObj:{width:300,height:300,top:0,left:0}}},mounted:function(){var t=this;this.$nextTick(function(){t.initEchartsFn()})},methods:{initEchartsFn:function(){this.echartsPie=this.$echarts.init(this.$refs._pie),this.echartsPie.setOption({height:"100%",title:{zlevel:0,top:"42%",left:"48%"},tooltip:{trigger:"item",formatter:"{b} <br /> {c}个 {d}%"},series:[{type:"pie",radius:["38%","50%"],label:{formatter:"{b} {c}",normal:{textStyle:{color:this.echartsConfig.label.color,fontSize:this.echartsConfig.label.fontSize+"px"}}},labelLine:{length:this.echartsConfig.labelLine.length,length2:this.echartsConfig.labelLine.length2},data:[{value:this.echartsConfig.failNumber,name:this.echartsConfig.failName},{value:this.echartsConfig.successNumber,name:this.echartsConfig.successName}]}],color:["#FDAA2E","#2694FF"]}),this.echartsPie.resize()},resizeFn:function(t){this.dragObj.width=t.width,this.dragObj.height=t.height;var e=0;e=t.width>t.height?t.height:t.width,this.echartsConfig.labelLine.length=e/10,this.echartsConfig.labelLine.length2=e/20,this.echartsConfig.label.fontSize=e/30>14?e/30:14,this.initEchartsFn(),this.changeEmitFn()},draggFn:function(t){this.dragObj.top=t.top,this.dragObj.left=t.left,this.changeEmitFn()},changeEmitFn:function(){this.$emit("changeFn",this.dragObj,this.componentIndex)}}},a=(i("GDh3"),i("ZrdR")),l=Object(a.a)(n,function(){var t=this.$createElement,e=this._self._c||t;return e("VueDragResize",{attrs:{"is-active":this.dragConfig.isActive,"parent-limitation":!0,w:this.dragConfig.w,h:this.dragConfig.h},on:{resizing:this.resizeFn,dragging:this.draggFn}},[e("div",{ref:"_pie",staticClass:"init-echarts"})])},[],!1,null,"679ea45c",null);l.options.__file="index.vue";e.default=l.exports},Xump:function(t,e,i){"use strict";i.r(e);var s=i("JUJa"),n=i("+ZuU"),a=i("xwRk"),l=window.screen.width,o=window.screen.height,r={name:"ScreenEdit",components:{SketchRule:n.a,pieView:s.default,addPie:a.default},data:function(){return{ruleConfig:{scale:.7,startX:0,startY:0,thick:20,width:0,height:0,lines:{h:[],v:[]}},pieComponents:[]}},computed:{shadow:function(){return{x:0,y:0,width:l,height:o}},canvasStyle:function(){return{width:l+"px",height:o+"px",transform:"scale("+this.ruleConfig.scale+")"}}},mounted:function(){var t=this;this.$refs.screensRef.scrollLeft=this.$refs.containerRef.getBoundingClientRect().width/2,this.$nextTick(function(){t.initSize()})},methods:{handleScroll:function(){var t=document.querySelector("#screens").getBoundingClientRect(),e=document.querySelector("#canvas").getBoundingClientRect(),i=(t.left+this.ruleConfig.thick-e.left)/this.ruleConfig.scale,s=(t.top+this.ruleConfig.thick-e.top)/this.ruleConfig.scale;this.ruleConfig.startX=i>>0,this.ruleConfig.startY=s>>0},handleWheel:function(t){var e=this;if(t.ctrlKey||t.metaKey){t.preventDefault();var i=parseFloat(Math.max(.2,this.ruleConfig.scale-t.deltaY/500).toFixed(2));this.ruleConfig.scale=i}this.$nextTick(function(){e.handleScroll()})},initSize:function(){var t=document.querySelector("#wrapper").getBoundingClientRect();this.ruleConfig.width=t.width-this.ruleConfig.thick-1,this.ruleConfig.height=t.height-this.ruleConfig.thick-1},openPieAddFn:function(){this.$refs._add_pie.openFn()},addPieSuccessFn:function(){this.pieComponents.push({component:"pie-view",view:s.default})},pieChangeFn:function(t,e){}}},c=(i("+rYF"),i("ZrdR")),h=Object(c.a)(r,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"screen-edit-page"},[i("div",{staticClass:"left-module"},[i("p",{staticClass:"module-title"},[t._v("组件库")]),t._v(" "),i("div",{staticClass:"module-view"},[t._m(0),t._v(" "),i("div",{staticClass:"module-item",on:{click:t.openPieAddFn}},[t._m(1),t._v(" "),i("div",{staticClass:"module-item__text"},[t._v("饼状图")])]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6)])]),t._v(" "),i("div",{staticClass:"right-view"},[i("div",{staticClass:"wrapper",attrs:{id:"wrapper"}},[i("SketchRule",{attrs:{thick:t.ruleConfig.thick,scale:t.ruleConfig.scale,width:t.ruleConfig.width,height:t.ruleConfig.height,"start-x":t.ruleConfig.startX,"start-y":t.ruleConfig.startY,"hor-line-arr":t.ruleConfig.lines.h,"ver-line-arr":t.ruleConfig.lines.v,shadow:t.shadow}}),t._v(" "),i("div",{ref:"screensRef",attrs:{id:"screens"},on:{wheel:t.handleWheel,scroll:t.handleScroll}},[i("div",{ref:"containerRef",staticClass:"screen-container"},[i("div",{style:t.canvasStyle,attrs:{id:"canvas"}},t._l(t.pieComponents,function(e,s){return i(e.component,{key:s,tag:"div",attrs:{text:e.view,"component-index":s},on:{changeFn:t.pieChangeFn}})}))])])],1)]),t._v(" "),i("add-pie",{ref:"_add_pie",on:{successFn:t.addPieSuccessFn}})],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item"},[e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-picture"})]),this._v(" "),e("div",{staticClass:"module-item__text"},[this._v("背景图片")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-s-help"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item"},[e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-s-help"})]),this._v(" "),e("div",{staticClass:"module-item__text"},[this._v("环形图")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item"},[e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-s-data"})]),this._v(" "),e("div",{staticClass:"module-item__text"},[this._v("柱状图")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item"},[e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-s-marketing"})]),this._v(" "),e("div",{staticClass:"module-item__text"},[this._v("折线图")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item"},[e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-s-promotion"})]),this._v(" "),e("div",{staticClass:"module-item__text"},[this._v("地图")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"module-item"},[e("div",{staticClass:"module-item__icon"},[e("i",{staticClass:"el-icon-menu"})]),this._v(" "),e("div",{staticClass:"module-item__text"},[this._v("表格")])])}],!1,null,"5b9d61cb",null);h.options.__file="screen-edit.vue";e.default=h.exports},dfsU:function(t,e,i){"use strict";var s=i("6pvZ");i.n(s).a},xwRk:function(t,e,i){"use strict";i.r(e);var s=i("omC7"),n=i.n(s),a={data:function(){return{dialogVisible:!1,elNorms:null,inputStyle:"width: 320px;",formData:{name:"",dataValue:null},rules:{}}},created:function(){this.elNorms=JSON.parse(n()(this.$store.getters.elNorms))},methods:{openFn:function(){this.formData={name:"",dataValue:null},this.dialogVisible=!0},submitFn:function(){this.$emit("successFn",!0),this.dialogVisible=!1}}},l=(i("dfsU"),i("ZrdR")),o=Object(l.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{staticClass:"dark-dialog",attrs:{title:"饼图配置",visible:t.dialogVisible,"modal-append-to-body":!1,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"_form",attrs:{model:t.formData,rules:t.rules,size:t.elNorms.formSize,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"模块标题：",prop:"name"}},[i("el-input",{style:t.inputStyle,attrs:{size:t.elNorms.size},model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"数据源：",prop:"dataValue"}},[i("el-select",{style:t.inputStyle,attrs:{size:t.elNorms.size,placeholder:"请选择数据源"},model:{value:t.formData.dataValue,callback:function(e){t.$set(t.formData,"dataValue",e)},expression:"formData.dataValue"}},[i("el-option",{attrs:{label:"数据源一",value:1}}),t._v(" "),i("el-option",{attrs:{label:"数据源二",value:2}})],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:t.elNorms.size,round:t.elNorms.round,circle:t.elNorms.circle},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submitFn}},[t._v("确 定")])],1)],1)},[],!1,null,null,null);o.options.__file="add-pie.vue";e.default=o.exports}}]);