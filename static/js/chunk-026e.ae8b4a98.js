(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-026e","B8wf"],{B8wf:function(t,e,i){"use strict";i.r(e);var r=i("bS4n"),o=i.n(r),a=i("8t5x");e.default={data:function(){return{permissionList:{positionPassReport:"/position/pass/rate/report",positionLocusReport:"/position/locus/complete/rate/report",positionDriftRateReport:"/position/vehicle/drift/rate/report",positionDriftReport:"/position/vehicle/drift/detail/report",positionHistoryReport:"/position/history/report",mileageCompanyReport:"/mileage/company/report",mileageVehicleReport:"/mileage/vehicle/report",mileageDriverReport:"/mileage/driver/report",mileageDayReport:"/mileage/vehicle/day/report",mileageMontyReport:"/mileage/vehicle/monty/report",alarmCommonList:"/alarm/common/list",onlineRateSummaryReport:"/online/rate/summary/report",onlineRateReport:"/online/rate/report",onlineSummaryReport:"/online/offline/summary/report",onlineDetailReport:"/online/offline/detail/report",onlineAccStatisticsReport:"/online/acc/ignition/statistics/report",onlineAccReport:"/online/acc/ignition/report",reportTemperatureAlarmStatistics:"/report/temperature/alarmStatistics",reportTemperatureList:"/report/temperature/list",reportTemperatureDetailInfo:"/report/temperature/detailInfo",driverSummaryReport:"/driver/login/logout/summary/report",driverDetailReport:"/driver/login/logout/detail/report",driverVehicleSummaryReport:"/driver/vehicle/login/logout/summary/report",driverVehicleDetailReport:"/driver/vehicle/login/logout/detail/report",driverIdReport:"/driver/id/report",positionPassExport:"/position/pass/rate/report/export",positionLocusExport:"/position/locus/complete/rate/report/export",positionDriftRateExport:"/position/vehicle/drift/rate/report/export",positionDriftDetailExport:"/position/vehicle/drift/detail/report/export",positionHistoryExport:"/position/history/report/export",mileageCompanyExport:"/mileage/company/report/export",mileageVehicleExport:"/mileage/vehicle/report/export",mileageDriverExport:"/mileage/driver/report/export",mileageDayExport:"/mileage/vehicle/day/report/export",mileageMontyExport:"/mileage/vehicle/monty/report/export",alarmReportExport:"/alarm/common/report/export",onlineRateSummaryExport:"/online/rate/summary/report/export",onlineRateExport:"/online/rate/report/export",onlineSummaryExport:"/online/offline/summary/report/export",onlineDetailExport:"/online/offline/detail/report/export",onlineAccStatisticsExport:"/online/acc/ignition/statistics/report/export",onlineAccExport:"/online/acc/ignition/report/export",reportTemperatureAlarmStatisticsExport:"/report/temperature/alarmStatistics/export",reportTemperatureListExport:"/report/temperature/list/export",reportTemperatureDetailInfoExport:"/report/temperature/detailInfo/export",driverSummaryExport:"/driver/login/logout/summary/report/export",driverDetailExport:"/driver/login/logout/detail/report/export",driverVehicleSummaryExport:"/driver/vehicle/login/logout/summary/report/export",driverVehicleDetailExport:"/driver/vehicle/login/logout/detail/report/export",driverIdExport:"/driver/id/report/export"}}},computed:o()({},Object(a.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[t])}}}},MZKF:function(t,e,i){"use strict";i.r(e);var r=i("AlM9"),o=i("B8wf"),a={name:"Tof7of1",components:{TableView:r.a},mixins:[o.default],data:function(){return{isTable:!0,tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:this.$t("statisticsReport.vehicle_number"),key:"licenseNum",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.motorcade_name"),key:"motorcadeName",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.type"),key:"loginTypeText",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.recognition_result"),key:"verifyResultText",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.time"),key:"statisticsTime",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.ic_card_reading_result"),key:"readResultText",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.sign_in_driver"),key:"driverName",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.driver_id_number"),key:"driverIcCard",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.qualification_certificate"),key:"driverLicenseNum",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.issuing_authority"),key:"institution",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.certificate_validity"),key:"licenseValidPeriod",type:"text",minWidth:"120px"},{title:this.$t("statisticsReport.reporting_location"),key:"location",type:"text",minWidth:"120px"}],buttonControls:[],searchControls:[{type:"treeSelect",key:"vehicleIds",valueKey:"vehicleId",placeholder:this.$t("statisticsReport.select_vehicle"),width:"200px",clearable:!0,treeOption:{defaultProps:{children:"children",label:"treeName"},nodeKey:"treeId",nodeCode:"iconfont Jamin_vehicle_icon_clgl1",defaultExpandAll:!1,expandClickNode:!1,checkbox:!0,screenFn:{bindFn:function(t,e){return!t||-1!==e.treeName.indexOf(t)}}},treeDefinedData:this.$parent.devTreeData},{type:"daterange",key:"time",startPlaceholder:this.$t("view.start_time"),endPlaceholder:this.$t("view.end_time"),width:"280px"},{type:"select",key:"loginType",placeholder:this.$t("statisticsReport.all_types"),width:"160px",clearable:!0,options:[{name:this.$t("statisticsReport.sign_in"),value:1},{name:this.$t("statisticsReport.return_sign_out"),value:2}]},{type:"select",key:"verifyResult",placeholder:this.$t("statisticsReport.recognition_result"),width:"160px",clearable:!0,options:[{name:this.$t("statisticsReport.success"),value:1},{name:this.$t("statisticsReport.failed"),value:0}]}],searchMode:"immediate",footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},params:null,tableAllData:[],isFirstRequestData:!0}},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("driverIdExport")&&this.tableOptions.buttonControls.push({text:this.$t("operation.export_record"),type:"null",round:!1,icon:"el-icon-document",funcName:"exportRecord",dataStatus:!0})},getTableData:function(t){var e=this;if(t.vehicleIds||this.isFirstRequestData)if(t.vehicleIds)if(t.time){if(this.tableOptions.loading=!0,!this.params||this.params.page===t.page&&this.params.limit===t.limit){this.tableOptions.columns[2].tags=this.$parent.dictObj.licenseColor;var i={vehicleIds:JSON.parse(t.vehicleIds),startTime:t.time?t.time[0]:null,endTime:t.time?t.time[1]:null};t.loginType&&(i.loginType=t.loginType),(t.verifyResult||0===t.verifyResult)&&(i.verifyResult=t.verifyResult);var r={loginType:{1:"登签",2:"退签"},verifyResult:{0:"失败",1:"成功"},readResult:{0:"成功",1:"失败",2:"失败",3:"失败",4:"失败"}};this.$http.post("/driver/id/report",i).then(function(i){e.tableOptions.loading=!1,i.code===e.$config.API_STATUS.OK&&i.data&&(e.tableAllData=(i.data||[]).map(function(t){return t.loginTypeText=r.loginType[t.loginType],t.verifyResultText=r.verifyResult[t.verifyResult],t.readResultText=r.readResult[t.readResult],t}),e.initTableDataFn(t),e.tableOptions.total=i.data.length)}).catch(function(){e.tableOptions.loading=!1})}else this.initTableDataFn(t),this.tableOptions.loading=!1;this.params=t}else this.$message.warning(this.$t("statisticsReport.tip_2"));else this.isFirstRequestData=!1;else this.$message.warning(this.$t("statisticsReport.tip_1"))},initTableDataFn:function(t){var e=(t.page-1)*t.limit,i=t.page*t.limit>this.tableAllData.length?this.tableAllData.length:t.page*t.limit;this.tableOptions.data=this.tableAllData.slice(e,i)},tableResponseFn:function(t,e,i){this[e.funcName].call(function(){},t,e,i)},exportRecord:function(){var t=this,e=this.params,i=e.vehicleIds,r=e.time,o=e.loginType,a=e.verifyResult;this.$confirm(this.$t("confirm.content"),this.$t("confirm.title"),{confirmButtonText:this.$t("confirm.determine"),cancelButtonText:this.$t("confirm.cancel"),closeOnClickModal:!1,beforeClose:function(e,s,n){if(t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(i){e.key===i&&"operate"!==e.key&&(t.fieldMap[i]=e.title)})}),"confirm"===e){var l={fieldMap:t.fieldMap,vehicleIds:JSON.parse(i),startTime:r?r[0]:null,endTime:r?r[1]:null};o&&(l.loginType=o),(a||0===a)&&(l.verifyResult=a),t.tableAllData.length<t.$store.getters.userData.realtimeVideoUrl?t.$http.download("/driver/id/report/export?isToken=true",l):t.$http.post("/driver/id/report/export/async",l),n()}else n()}}).catch(function(){})}}},s=(i("vXPw"),i("ZrdR")),n=Object(s.a)(a,function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isTable?i("table-view",{ref:"table",attrs:{center:"","id-key":"id","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"footer-buttons":t.tableOptions.footerButtons,"button-controls":t.tableOptions.buttonControls,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading,"is-shadow":""},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:t.$t("view.index"),type:"index",align:"center",fixed:"left",width:"60"},slot:"number"})],1):t._e()},[],!1,null,"352759e8",null);n.options.__file="t_7_5.vue";e.default=n.exports},pWq8:function(t,e,i){},vXPw:function(t,e,i){"use strict";var r=i("pWq8");i.n(r).a}}]);