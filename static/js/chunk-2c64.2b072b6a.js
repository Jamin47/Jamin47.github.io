(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2c64","chunk-a79e"],{"3QOl":function(t,e,a){},A4ll:function(t,e,a){"use strict";var n=a("nIjX");a.n(n).a},Untq:function(t,e,a){"use strict";var n=a("3QOl");a.n(n).a},nIjX:function(t,e,a){},pxNs:function(t,e,a){"use strict";a.r(e);var n=a("LehH"),i=a("r97K"),o={name:"UserManagement",components:{userAccount:n.default,onlineUsers:i.default},data:function(){return{activeName:"userAccount"}},computed:{},created:function(){},mounted:function(){},methods:{}},s=(a("A4ll"),a("ZrdR")),l=Object(s.a)(o,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-wrap"},[a("div",{staticClass:"main"},[a("el-tabs",{staticClass:"init-tabs",model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"userAccount"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_system_icon_juese"}),t._v(" 用户账号")]),t._v(" "),"userAccount"===t.activeName?a("userAccount"):t._e()],1),t._v(" "),a("el-tab-pane",{attrs:{name:"onlineUsers"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"iconfont Jamin_system_icon_zaixian"}),t._v(" 在线用户")]),t._v(" "),"onlineUsers"===t.activeName?a("onlineUsers"):t._e()],1)],1)],1)])},[],!1,null,"0120fa49",null);l.options.__file="userManagement.vue";e.default=l.exports},r97K:function(t,e,a){"use strict";a.r(e);var n={components:{TableView:a("AlM9").a},data:function(){return{companyList:[],num:{androidCount:0,iosCount:0,total:0,weChatCount:0,webCount:0},alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:"登录账号",key:"username",minWidth:"160",sort:"custom",type:"text"},{title:"姓名",key:"account",minWidth:"130",type:"text"},{title:"用户角色",key:"roleName",minWidth:"160",type:"text"},{title:"所属客户",key:"companyName",minWidth:"160",type:"text"},{title:"应用终端",key:"appTerminal",minWidth:"130",type:"tag",tags:[{value:0,text:"web客户端"},{value:1,text:"安卓",option:{type:"success"}},{value:2,text:"苹果",option:{type:"warning"}},{value:3,text:"微信小程序",option:{type:"danger"}}]},{title:"登录语言",key:"language",minWidth:"160",type:"text"},{title:"登录时间",key:"loginTime",minWidth:"220",type:"text"},{title:"在线时长",key:"onlineTime",minWidth:"160",type:"text"},{title:"登录IP",key:"ip",minWidth:"160",type:"text"},{title:"操作",type:"operate",fixed:"right",width:"100",buttons:[{text:"强制下线",type:"text",size:"mini",funcName:"forcedOffline"}]}],searchControls:[{type:"input",key:"username",placeholder:"请输入登录账号",width:"200px",size:"small"},{type:"select",key:"companyId",placeholder:"请选择所属客户",width:"200px",size:"small",clearable:!0,options:[{name:"无",value:0}]},{type:"select",key:"applicationTerminal",placeholder:"请选择应用终端",width:"200px",size:"small",clearable:!0,options:[{name:"WEB客户端",value:0},{name:"安卓客户端",value:1},{name:"IOS客户端",value:2},{name:"微信小程序",value:3}]}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:{},created:function(){},mounted:function(){},methods:{getTableData:function(t){var e=this;this.tableOptions.loading=!0,this.$http.post("/user/list/online?pageNum="+t.pageNum+"&pageSize="+t.pageSize,t).then(function(t){if(t.code===e.$config.API_STATUS.OK){e.tableOptions.loading=!1,e.tableOptions.data=t.data.list,e.tableOptions.total=t.data.total;var a=t.data,n=a.androidCount,i=a.iosCount,o=a.total,s=a.weChatCount,l=a.webCount;e.num={androidCount:n,iosCount:i,total:o,weChatCount:s,webCount:l}}}),this.$http.post("/company/list").then(function(t){e.companyList=[],t.code===e.$config.API_STATUS.OK&&t.data.list.forEach(function(t,a){e.companyList.push({name:t.name,value:t.companyId}),e.tableOptions.searchControls[1].options[a]={name:t.name,value:t.companyId}})})},tableResponseFn:function(t,e,a){this[e.funcName].call(function(){},t,e,a)},forcedOffline:function(t){var e=this;this.$confirm("您确定要将该已登录用户，强制下线吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$http.get("/user/offline/"+t.userId+"/"+t.username).then(function(a){a.code===e.$config.API_STATUS.OK&&(e.$refs.table.emitRequestTableData(),e.$message({type:t.message,message:"操作成功!"}))})}).catch(function(){e.$message({type:"info",message:"已取消操作"})})}}},i=(a("Untq"),a("ZrdR")),o=Object(i.a)(n,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"onlineUsers"},[a("table-view",{ref:"table",attrs:{center:"","is-search":!0,data:t.tableOptions.data,total:t.tableOptions.total,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading,alias:t.alias,"is-shadow":""},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[a("el-table-column",{attrs:{slot:"number",label:"序号",type:"index",align:"center"},slot:"number"})],1),t._v(" "),a("div",{staticClass:"application"},[a("span",[t._v(" 在线用户总数:"+t._s(t.num.total)+" ")]),t._v(" "),a("span",[t._v(" WEB客户端:"+t._s(t.num.webCount)+" ")]),t._v(" "),a("span",[t._v(" 安卓客户端:"+t._s(t.num.androidCount)+" ")]),t._v(" "),a("span",[t._v(" 苹果客户端:"+t._s(t.num.iosCount)+" ")]),t._v(" "),a("span",[t._v(" 微信小程序:"+t._s(t.num.weChatCount)+" ")])])],1)},[],!1,null,"2e7f1db0",null);o.options.__file="onlineUsers.vue";e.default=o.exports}}]);