(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6dd6"],{"1jhT":function(t,e,a){},"2QmI":function(t,e,a){t.exports=a.p+"static/img/location_pic_lanchepai@2x.82e389e.png"},"56Dj":function(t,e,a){"use strict";var i=a("1jhT");a.n(i).a},"7/X4":function(t,e,a){t.exports=a.p+"static/img/location_pic_che@2x.5293b3f.png"},"7/Xa":function(t,e,a){"use strict";var i=a("Uhhy");a.n(i).a},FLQv:function(t,e,a){t.exports=a.p+"static/img/location_pic_tingche@2x.394f4ba.png"},"O+et":function(t,e,a){t.exports=a.p+"static/img/monitor_icon_bofang@2x.2ffc4c3.png"},Uhhy:function(t,e,a){},Uuj8:function(t,e,a){"use strict";a.r(e);var i=a("6ZY3"),n=a.n(i),s=a("omC7"),o=a.n(s),c=a("unDg"),l=a.n(c),r=a("cLjf"),d=a.n(r),p=a("hDQ3"),u=a.n(p),h=a("bS4n"),m=a.n(h),f=a("8t5x"),v=a("AlM9"),_={data:function(){return{BMapGL:null,baiduMap:null,markerList:[],activeIndex:0,activeMarker:null,setTime:null,moveStatus:!1}},mounted:function(){this.createBaiduMap()},methods:{createBaiduMap:function(){this.BMapGL=BMapGL,this.baiduMap=new this.BMapGL.Map("baidu-container"),this.baiduMap.centerAndZoom(new this.BMapGL.Point(116.403963,39.915115),5),this.baiduMap.enableScrollWheelZoom(!0),this.baiduMap.setTilt(30);var t=new this.BMapGL.ScaleControl({anchor:BMAP_ANCHOR_BOTTOM_RIGHT,offset:new this.BMapGL.Size(10,10)});this.baiduMap.addControl(t);var e=new this.BMapGL.ZoomControl({anchor:BMAP_ANCHOR_TOP_RIGHT,offset:new this.BMapGL.Size(10,60)});this.baiduMap.addControl(e),this.baiduMapAddEventFn()},createMarkersFn:function(t){var e=this;t.forEach(function(t){e.createMarkerFn(t)}),!0===e.$parent.treeData.checkStatus&&(e.getCenterAndZoom(t),e.$parent.treeData.checkStatus=!1)},createMarkerFn:function(t){var e=this,i=new e.BMapGL.Icon(t.mapIconUrl,new e.BMapGL.Size(30,30)),s=new e.BMapGL.Point(t.longitude,t.latitude),o=new e.BMapGL.Marker(s,{icon:i});e.baiduMap.addOverlay(o),o.addEventListener("click",function(i){e.$http.get("/postion/realtime/vehicleAttentionInfo/"+t.vehicleId).then(function(s){if(s.code===e.$config.API_STATUS.OK&&s.data){t=n()(t,s.data);var o={isShow:!0,top:i.pixel.y,left:i.pixel.x,url:a("mdYb"),playStatus:!1};e.$parent.openCarWindowData=n()(o,t),e.$parent.gpsObj.activeData=t,e.$parent.markerClickFn&&e.$parent.markerClickFn()}})}),o.vehicleId=t.vehicleId,e.markerList.push(o)},openWindowFn:function(){var t=this,e=t.$parent.openCarWindowData,a=t.$parent.gpsObj.activeData;a&&t.markerList.forEach(function(i,n){if(i.vehicleId===a.vehicleId){t.activeIndex=n,t.activeMarker=i;var s=i.domElement.style.left,o=i.domElement.style.top,c=s.slice(0,s.length-2),l=o.slice(0,o.length-2);e.top=Number(l)+15,e.left=Number(c)+15,e.isShow=!0}})},getCenterAndZoom:function(t){var e=[];if(t&&t.length&&(e=t.map(function(t){return{lng:t.longitude,lat:t.latitude}})),this.baiduMap){var a=this.baiduMap.getViewport(e);this.baiduMap.centerAndZoom(a.center,a.zoom-1)}},gpsOfAddressFn:function(t,e,a){new this.BMapGL.Geocoder({extensions_town:!0}).getLocation(new this.BMapGL.Point(t,e),function(t){t&&a(t.address)})},clearMarker:function(){this.baiduMap.clearOverlays(),this.markerList=[]},baiduMapAddEventFn:function(){var t=this;t.baiduMap.addEventListener("moveend",function(e){var a=t.$parent.openCarWindowData,i=t.$parent.gpsObj.activeData,n=t.markerList[t.activeIndex];if(a&&i&&n){var s=""===n.domElement.style.left?0:n.domElement.style.left.slice(0,n.domElement.style.left.length-2),o=""===n.domElement.style.top?0:n.domElement.style.top.slice(0,n.domElement.style.top.length-2);a.top=Number(o)+15,a.left=Number(s)+15}}),t.baiduMap.addEventListener("zoomend",function(e){var a=t.$parent.openCarWindowData,i=t.$parent.gpsObj.activeData,n=t.markerList[t.activeIndex];if(a&&i&&n){var s=""===n.domElement.style.left?0:n.domElement.style.left.slice(0,n.domElement.style.left.length-2),o=""===n.domElement.style.top?0:n.domElement.style.top.slice(0,n.domElement.style.top.length-2);a.top=Number(o)+15,a.left=Number(s)+15}})}}},b=(a("56Dj"),a("ZrdR")),g=Object(b.a)(_,function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"location-baodu-map",attrs:{id:"_location_baodu_map"}},[e("div",{attrs:{id:"baidu-container"}})])}],!1,null,"34aa7d6b",null);g.options.__file="baidu-map.vue";var C=g.exports,w={name:"RTSL",components:{TableView:v.a,baiduMapView:C},data:function(){return{carTreeViewType:"1",carTableViewType:"1",filterText:"",isTree:!1,isTable:!0,isTable_2:!0,timeOut:null,treeData:{defaultProps:{children:"children",label:"treeName",isLeaf:"lezy",disabled:"disabled"},nodeKey:"treeId",lazy:!0,allTreeData:[],defauleExpanded:[],defaultChecked:[],defaultChecked_1:[],defaultChecked_2:[],carCheckedData:[],timeInterval:null,checkStatus:!1},tableOptions:{data:[],total:0,columns:[{title:"车牌号码",key:"licenseNum",type:"text",fixed:"left",minWidth:"150"},{title:"车牌颜色",key:"licenseColor",minWidth:"120",type:"tag",tags:[]},{title:"状态",key:"drivingState",type:"slot",name:"initColumn",minWidth:"120"},{title:"车队/公司",key:"motorcadeName",type:"text",minWidth:"160"},{title:"设备号",key:"deviceNum",type:"text",minWidth:"150"},{title:"今日里程",key:"mileage",type:"text",minWidth:"120"},{title:"行驶速度",key:"speed",type:"text",minWidth:"120"},{title:"定位时间",key:"positioningTime",type:"text",minWidth:"160"},{title:"地理位置",key:"initAddress",type:"text",minWidth:"300"},{title:"",key:"operate",type:"operate",fixed:"right",minWidth:"150",iconButton:[{icon:"iconfont Jamin_location_icon_gb1",funcName:"clearTableFn"},{icon:"iconfont Jamin_location_icon_xiazai1",funcName:"downloadTableFn"}],buttons:[]}],searchControls:[],searchMode:"immediate",footerButtons:[{text:"切换角色",size:"mini",icon:"el-icon-sort",round:!1,funcName:"switchUser"}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},tableOptions_2:{data:[],total:0,columns:[{title:"车牌号码",key:"licenseNum",type:"text",fixed:"left",minWidth:"150"},{title:"车牌颜色",key:"licenseColor",minWidth:"120",type:"tag",tags:[]},{title:"状态",key:"drivingState",type:"slot",name:"initColumn",minWidth:"120"},{title:"车队/公司",key:"motorcadeName",type:"text",minWidth:"160"},{title:"设备号",key:"deviceNum",type:"text",minWidth:"150"},{title:"今日里程",key:"mileage",type:"text",minWidth:"120"},{title:"行驶速度",key:"speed",type:"text",minWidth:"120"},{title:"定位时间",key:"positioningTime",type:"text",minWidth:"160"},{title:"地理位置",key:"initAddress",type:"text",minWidth:"300"},{title:"",key:"operate",type:"operate",fixed:"right",minWidth:"150",iconButton:[{icon:"iconfont Jamin_location_icon_gb1",funcName:"clearTableFn"},{icon:"iconfont Jamin_location_icon_xiazai1",funcName:"downloadTableFn"}],buttons:[]}],searchControls:[],searchMode:"immediate",footerButtons:[{text:"切换角色",size:"mini",icon:"el-icon-sort",round:!1,funcName:"switchUser"}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},viewConfig:{left:!0,bottom:!1},dictObj:{licenseColor:[],drivingState:[]},mapStatisticsData:{vehicleTotal:0,onlineNum:0,offlineNum:0,alertNum:0,allowLazyLoad:!1},gpsObj:{timeOut:null,tableData:[],activeData:null},trackObj:{licenseList:[],activeId:null,tableData:[]},openCarWindowData:{isShow:!1,top:"90",left:"400",url:a("mdYb"),playStatus:!1}}},computed:m()({},Object(f.b)(["elNorms"])),watch:{filterText:function(t){this.$refs._tree&&this.$refs._tree.filter(t)},"treeData.carCheckedData":function(t){var e=this;this.timeOut&&clearTimeout(this.timeOut),this.timeOut=setTimeout(function(){e.getVehicleGpsFn()},200)},"gpsObj.tableData":function(t){var e=this;this.gpsObj.timeOut&&clearTimeout(this.gpsObj.timeOut),this.gpsObj.timeOut=setTimeout(function(){var a=e.$refs._baidu_map_view;a.clearMarker(),t.length&&a.createMarkersFn(t)},200)},"trackObj.activeId":function(t){var e=this.trackObj.licenseList.filter(function(e){return e.vehicleId===t});e.length&&(e[0].initList?this.tableOptions_2.data=e[0].initList:(e[0].initList=[],this.tableOptions_2.data=e[0].initList))}},created:function(){this.getStatisticsFn(),this.getDictFn()},mounted:function(){var t=this;t.treeData.timeInterval=setInterval(function(){t.treeData.carCheckedData.length&&t.getVehicleGpsFn(),t.trackObj.licenseList.length&&t.getTrackFn()},1e4)},beforeDestroy:function(){this.treeData.timeInterval&&clearInterval(this.treeData.timeInterval)},methods:{getStatisticsFn:function(){var t=this;this.$http.get("/postion/realtime/vehicleStatistics").then(function(e){e.code===t.$config.API_STATUS.OK&&(t.mapStatisticsData=e.data,t.mapStatisticsData.allowLazyLoad||(t.treeData.lazy=!1,t.getAllTreeData())),t.isTree=!0})},getDictFn:function(){var t=this;this.$http.get("/dict/list/codes",{dicCodes:"licenseColor, drivingState"}).then(function(e){if(e.code===t.$config.API_STATUS.OK&&e.data){var a=e.data;t.dictObj={licenseColor:a.licenseColor.map(function(t){return{id:t.itemId,value:t.itemName,text:t.itemValue,name:t.itemValue}}),drivingState:a.drivingState.map(function(t){return{id:t.itemId,value:t.itemName,text:t.itemValue,name:t.itemValue}})},t.tableOptions.columns[1].tags=t.dictObj.licenseColor,t.tableOptions_2.columns[1].tags=t.dictObj.licenseColor}})},setTreeData:function(){var t=this;this.treeData.lazy?"1"===this.carTreeViewType?(this.treeData.defaultChecked_2=this.$refs._tree?this.$refs._tree.getCheckedKeys():[],this.treeData.defaultChecked=this.treeData.defaultChecked_1):(this.treeData.defaultChecked_1=this.$refs._tree?this.$refs._tree.getCheckedKeys():[],this.treeData.defaultChecked=this.treeData.defaultChecked_2):this.treeData.defaultChecked=this.treeData.carCheckedData.map(function(t){return t.treeId}),this.treeData.lazy?(this.isTree=!1,this.$nextTick(function(){t.isTree=!0})):this.getAllTreeData()},loadNode:function(t,e){t.level>=1?this.getLazyData(t,e,t.data):this.getStartData(t,e,t.data)},getAllTreeData:function(){var t=this;return u()(d.a.mark(function e(){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("1"!==t.carTreeViewType){e.next=5;break}return e.next=3,t.$http.get("/postion/realtime/vehicleAllTreeList").then(function(e){e.code===t.$config.API_STATUS.OK&&(t.treeData.allTreeData=e.data.motorcades,t.forTreeResetDataFn(t.treeData.allTreeData))});case 3:e.next=7;break;case 5:return e.next=7,t.$http.get("/postion/realtime/attentionList").then(function(e){e.code===t.$config.API_STATUS.OK&&(t.treeData.allTreeData=e.data,t.forTreeResetDataFn(t.treeData.allTreeData))});case 7:t.treeData.allTreeData=[{motorcadeId:"None",motorcadeName:"车辆监控",treeId:"None",treeName:"车辆监控",children:t.treeData.allTreeData,count:t.mapStatisticsData.vehicleTotal,onlineCount:t.mapStatisticsData.onlineNum}];case 8:case"end":return e.stop()}},e,t)}))()},forTreeResetDataFn:function(t){var e=this;t.forEach(function(t){t.vehicleId?(t.treeName=t.licenseNum,t.treeId="v_"+t.vehicleId,t.lezy=!0):(t.treeName=t.motorcadeName,t.treeId="m_"+t.motorcadeId,t.children=[].concat(l()(t.vehicles),l()(t.motorcades)),e.forTreeResetDataFn(t.children))})},getStartData:function(t,e){e([{motorcadeId:"None",motorcadeName:"车辆监控",treeId:"None",treeName:"车辆监控",count:this.mapStatisticsData.vehicleTotal,onlineCount:this.mapStatisticsData.onlineNum}])},getLazyData:function(t,e,a){var i=this;if("1"===this.carTreeViewType){var n="None"===a.treeId?0:a.motorcadeId;this.$http.get("/postion/realtime/vehicleTreeList?id="+n).then(function(t){if(t.code===i.$config.API_STATUS.OK){var a=i.resetTreeData(t.data.opMotorcadeList,t.data.vehicleList);e(a)}})}else this.$http.get("/postion/realtime/attentionList").then(function(t){if(t.code===i.$config.API_STATUS.OK){var a=i.resetTreeData(null,t.data);e(a)}})},resetTreeData:function(t,e){var a=[],i=[];return t&&t.length&&(a=t).forEach(function(t){t.treeName=t.motorcadeName,t.treeId="m_"+t.motorcadeId}),e&&e.length&&(i=e).forEach(function(t){t.treeName=t.licenseNum,t.treeId="v_"+t.vehicleId,t.lezy=!0}),[].concat(l()(i),l()(a))},filterNode:function(t,e){return!t||-1!==e.treeName.indexOf(t)},nodeExpandFn:function(t,e,a){t.treeId&&-1===this.treeData.defauleExpanded.indexOf(t.treeId)&&this.treeData.defauleExpanded.push(t.treeId)},nodeCollapseFn:function(t,e,a){var i=this.treeData.defauleExpanded.indexOf(t.treeId);t.treeId&&-1!==i&&this.treeData.defauleExpanded.splice(i,1)},treeCheckFn:function(t,e){var a=this;return u()(d.a.mark(function t(){var e;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.treeData.checkStatus=!0,a.treeData.lazy||(e=a.$refs._tree.getCheckedNodes(),a.treeData.carCheckedData=e.filter(function(t){return t.vehicleId}));case 2:case"end":return t.stop()}},t,a)}))()},treeChangeFn:function(t,e){var a=this;return u()(d.a.mark(function i(){var n,s,o;return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!a.treeData.lazy){i.next=10;break}if(n=a.$refs._tree.getNode(t),void 0===t.vehicleId){i.next=6;break}e?(s=!0,a.treeData.carCheckedData.forEach(function(e,a){e.vehicleId===t.vehicleId&&(s=!1)}),s&&a.treeData.carCheckedData.push(t)):a.treeData.carCheckedData.forEach(function(e,i){e.vehicleId===t.vehicleId&&a.treeData.carCheckedData.splice(i,1)}),i.next=10;break;case 6:if(n.loaded){i.next=10;break}return o="None"===t.motorcadeId?"":t.motorcadeId,i.next=10,a.$http.get("/postion/list/vehicleIds",{motorcadeId:o}).then(function(t){t.code===a.$config.API_STATUS.OK&&t.data&&t.data.length&&t.data.forEach(function(t){for(var i=!1,n=null,s=a.treeData.carCheckedData.length-1;s>=0;s--){var o=a.treeData.carCheckedData[s];o&&t.vehicleId===o.vehicleId&&(i=!0,n=s)}e?!i&&a.treeData.carCheckedData.push(t):i&&a.treeData.carCheckedData.splice(n,1)})});case 10:case"end":return i.stop()}},i,a)}))()},getVehicleGpsFn:function(){var t=this;return u()(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.treeData.carCheckedData.length){e.next=9;break}return a=t.treeData.carCheckedData.map(function(t){return t.vehicleId}),e.next=4,t.$http.get("/postion/realtime/vehicleGps",{ids:a.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&e.data&&(t.gpsObj.tableData=[],e.data.forEach(function(e){t.treeData.carCheckedData.forEach(function(a){if(e.licenseNum===a.licenseNum){var i=JSON.parse(o()(a));t.gpsObj.tableData.push(n()(i,e))}})}),null===t.gpsObj.activeData&&t.gpsObj.tableData.length&&(t.gpsObj.activeData=t.gpsObj.tableData[0]))});case 4:"1"===t.carTableViewType&&(t.tableOptions.data=JSON.parse(o()(t.gpsObj.tableData))),t.resetAddressFn(t.tableOptions.data),t.resetAddressFn(t.gpsObj.tableData),e.next=12;break;case 9:t.gpsObj.tableData=[],t.gpsObj.activeData=null,"1"===t.carTableViewType&&(t.tableOptions.data=[]);case 12:case"end":return e.stop()}},e,t)}))()},resetAddressFn:function(t){var e=this;t.forEach(function(a,i){e.$refs._baidu_map_view&&e.$refs._baidu_map_view.gpsOfAddressFn&&e.$refs._baidu_map_view.gpsOfAddressFn(a.longitude,a.latitude,function(n){a.initAddress=n,e.switchIcon(a),e.$set(t,i,a)})})},switchIcon:function(t){if(t.onlineStatus)switch(t.drivingState){case 0:t.iconUrl=a("a60Y"),t.mapIconUrl=a("FLQv");break;case 1:t.iconUrl=a("q/SC"),t.mapIconUrl=a("fe2N")}else t.iconUrl=a("7/X4"),t.mapIconUrl=a("7/X4")},handleClickRowChange:function(t){"1"===this.carTableViewType&&(this.gpsObj.activeData=t,this.$refs._baidu_map_view.getCenterAndZoom([t]))},handleCommand:function(t){this[t.funcName].call(function(){},t.data,t.node,t.funcName)},getTableData:function(t){},tableResponseFn:function(t,e,a){this[e.funcName].call(function(){},t,e,a)},clearTableFn:function(){var t=this;"1"===this.carTableViewType?(this.treeData.carCheckedData=[],this.tableOptions.data=[],this.isTable=!1,this.isTree=!1,this.$nextTick(function(){t.isTable=!0,t.isTree=!0})):(this.trackObj.licenseList=[],this.tableOptions_2.data=[],this.carTableViewType="1",this.isTable_2=!1,this.$nextTick(function(){t.isTable_2=!0}))},downloadTableFn:function(){},controlViewFn:function(t){this.viewConfig[t]=!this.viewConfig[t]},windowVideoPlayFn:function(t){document.getElementById(t).play(),this.openCarWindowData.playStatus=!0},windowVideoStopFn:function(t){document.getElementById(t).pause(),this.openCarWindowData.playStatus=!1},cancelWindowFn:function(){this.openCarWindowData},stopWindowFn:function(){return!1},setTableData:function(){this.carTableViewType},getTrackFn:function(){var t=this,e=this;e.trackObj.licenseList.forEach(function(a){e.$http.get("/postion/realtime/vehicleGps/"+a.vehicleId).then(function(e){e.code===t.$config.API_STATUS.OK&&e.data&&(t.switchIcon(e.data),a.initList?a.initList.push(e.data):a.initList=[e.data])})})},switchTrackFn:function(t){this.viewConfig.bottom=!0,this.carTableViewType="2",this.trackObj.activeId=t.vehicleId},addTrackFn:function(t){var e=!0;this.trackObj.licenseList.forEach(function(a){a.vehicleId===t.vehicleId&&(e=!1)}),e&&this.trackObj.licenseList.push(t)},carFollowFn:function(t,e){var a=this;return u()(d.a.mark(function i(){return d.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!e){i.next=5;break}return i.next=3,a.$http.post("/postion/realtime/vehicleAttention/"+t.vehicleId).then(function(t){t.code===a.$config.API_STATUS.OK&&(a.$set(a.openCarWindowData,"hasAttention",!0),a.$message.success("关注成功！"))});case 3:i.next=7;break;case 5:return i.next=7,a.$http.post("/postion/realtime/deleteVehicleAttention/"+t.vehicleId).then(function(t){t.code===a.$config.API_STATUS.OK&&(a.$set(a.openCarWindowData,"hasAttention",!1),a.$message.success("取消关注成功！"))});case 7:a.treeData.lazy&&"2"===a.carTreeViewType&&(a.isTree=!1,a.$nextTick(function(){a.isTree=!0})),a.treeData.lazy||"2"!==a.carTreeViewType||a.getAllTreeData();case 9:case"end":return i.stop()}},i,a)}))()},delTrackFn:function(t,e){this.trackObj.licenseList.splice(e,1),this.trackObj.licenseList.length||(this.carTableViewType="1")}}},D=(a("7/Xa"),Object(b.a)(w,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page-view RTSL-page",on:{mousedown:t.cancelWindowFn}},[i("div",{staticClass:"left-view__tree",class:!t.viewConfig.left&&"left-view__tree-active"},[i("el-tabs",{staticClass:"init-tabs",on:{"tab-click":t.setTreeData},model:{value:t.carTreeViewType,callback:function(e){t.carTreeViewType=e},expression:"carTreeViewType"}},[i("el-tab-pane",{attrs:{name:"1"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_monitor_icon_clcd"}),t._v(" 车辆车队")])]),t._v(" "),i("el-tab-pane",{attrs:{name:"2"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_monitor_icon_gzcl"}),t._v(" 关注车辆")])])],1),t._v(" "),i("div",{staticClass:"input-query"},[i("el-input",{attrs:{size:t.elNorms.size,placeholder:"搜索车队/车辆","prefix-icon":"el-icon-search"},model:{value:t.filterText,callback:function(e){t.filterText="string"==typeof e?e.trim():e},expression:"filterText"}},[i("template",{slot:"append"},[i("i",{staticClass:"el-icon-refresh-right",on:{click:t.setTreeData}})])],2)],1),t._v(" "),i("div",{staticClass:"body-tree init-tree"},[t.isTree?i("el-tree",{ref:"_tree",attrs:{props:t.treeData.defaultProps,data:t.treeData.allTreeData,load:t.loadNode,lazy:t.treeData.lazy,"show-checkbox":"","default-expand-all":!t.treeData.lazy,"icon-class":"el-icon-caret-right","node-key":t.treeData.nodeKey,"expand-on-click-node":!1,"default-expanded-keys":t.treeData.defauleExpanded,"default-checked-keys":t.treeData.defaultChecked,"filter-node-method":t.filterNode},on:{check:t.treeCheckFn,"check-change":t.treeChangeFn,"node-expand":t.nodeExpandFn,"node-collapse":t.nodeCollapseFn},scopedSlots:t._u([{key:"default",fn:function(e){e.node;var a=e.data;return i("span",{staticClass:"custom-tree-node"},[i("span",{staticClass:"left-title text-ellipsis"},[a.vehicleId&&a.online?i("i",{staticClass:"iconfont Jamin_location_icon_che-lv",staticStyle:{color:"var(--main-success)"}}):a.vehicleId?i("i",{staticClass:"iconfont Jamin_location_icon_che-lv",style:!a.onlineStatus&&"color: #999999;"}):i("i",{staticClass:"iconfont Jamin_vehicle_icon_xiaowenjian"}),t._v("\n            "+t._s(a.treeName)+"\n            "),a.count?i("span",[t._v("("+t._s(a.onlineCount)+"/"+t._s(a.count)+")")]):t._e()]),t._v(" "),t._e()])}}])}):t._e()],1)],1),t._v(" "),i("div",{staticClass:"right-view",class:!t.viewConfig.left&&"right-view-active"},[i("div",{staticClass:"right-view__map",class:t.viewConfig.bottom&&"right-view__map-active",attrs:{id:"_map_body_view"}},[i("baidu-map-view",{ref:"_baidu_map_view"}),t._v(" "),i("div",{staticClass:"top-data-view"},[i("div",{staticClass:"view-item"},[i("div",{staticClass:"item-text"},[t._v("车辆总量：")]),t._v(" "),i("div",{staticClass:"item-num"},[t._v(t._s(t.mapStatisticsData.vehicleTotal))])]),t._v(" "),i("div",{staticClass:"item-line"}),t._v(" "),i("div",{staticClass:"view-item s-c"},[i("div",{staticClass:"item-text"},[t._v("在线：")]),t._v(" "),i("div",{staticClass:"item-num"},[t._v(t._s(t.mapStatisticsData.onlineNum))])]),t._v(" "),i("div",{staticClass:"item-line"}),t._v(" "),i("div",{staticClass:"view-item w-c"},[i("div",{staticClass:"item-text"},[t._v("离线：")]),t._v(" "),i("div",{staticClass:"item-num"},[t._v(t._s(t.mapStatisticsData.offlineNum))])]),t._v(" "),i("div",{staticClass:"item-line"}),t._v(" "),i("div",{staticClass:"view-item d-c"},[i("div",{staticClass:"item-text"},[t._v("报警：")]),t._v(" "),i("div",{staticClass:"item-num"},[t._v(t._s(t.mapStatisticsData.alertNum))])])]),t._v(" "),i("div",{staticClass:"left-control control-view",on:{click:function(e){t.controlViewFn("left")}}},[t.viewConfig.left?i("i",{staticClass:"el-icon-arrow-left"}):i("i",{staticClass:"el-icon-arrow-right"})]),t._v(" "),i("div",{staticClass:"bottom-control control-view",on:{click:function(e){t.controlViewFn("bottom")}}},[t.viewConfig.bottom?i("i",{staticClass:"el-icon-arrow-down"}):i("i",{staticClass:"el-icon-arrow-up"})]),t._v(" "),t.openCarWindowData.isShow?i("div",{staticClass:"map-box-window",style:"top: "+t.openCarWindowData.top+"px;left: "+t.openCarWindowData.left+"px;",on:{mousedown:function(e){return e.stopPropagation(),t.stopWindowFn(e)}}},[i("div",{staticClass:"window-title"},[i("div",{staticClass:"title-text"},[t._v("车辆信息")]),t._v(" "),i("div",{staticClass:"title-icon",on:{click:function(e){e.stopPropagation(),t.openCarWindowData=!1}}},[i("i",{staticClass:"el-icon-close"})])]),t._v(" "),i("div",{staticClass:"window-box"},[i("div",{staticClass:"window-info"},[i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-title text-ellipsis"},[t._v("车牌号码：")]),t._v(" "),i("div",{staticClass:"item-img-text"},[t._v(t._s(t.openCarWindowData.licenseNum))]),t._v(" "),1===t.openCarWindowData.licenseColor?i("img",{attrs:{src:a("2QmI"),alt:""}}):t._e(),t._v(" "),2===t.openCarWindowData.licenseColor?i("img",{attrs:{src:a("rSXH"),alt:""}}):t._e(),t._v(" "),9===t.openCarWindowData.licenseColor?i("img",{attrs:{src:a("xAz7"),alt:""}}):t._e()]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-title text-ellipsis"},[t._v("所属车队：")]),t._v(" "),i("span",{staticClass:"item-text"},[t._v(t._s(t.openCarWindowData.motorcadeName))])]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-title text-ellipsis"},[t._v("设备ID号：")]),t._v(" "),i("span",{staticClass:"item-text"},[t._v(t._s(t.openCarWindowData.deviceNum))])]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-title text-ellipsis"},[t._v("今日里程：")]),t._v(" "),i("span",{staticClass:"item-text"},[t._v(t._s(t.openCarWindowData.mileage))])]),t._v(" "),i("div",{staticClass:"info-item"},[i("span",{staticClass:"item-title text-ellipsis"},[t._v("车辆状态：")]),t._v(" "),i("span",{staticClass:"item-text"},[t._v(t._s(t.openCarWindowData.onlineStatus?"在线":"离线")),t.openCarWindowData.onlineStatus?i("span",[t._v("/"+t._s(t.openCarWindowData.drivingState?"行驶":"停车"))]):t._e()])]),t._v(" "),t._m(0)]),t._v(" "),i("div",{staticClass:"window-video"},[i("video",{attrs:{id:"video_1",src:t.openCarWindowData.url,loop:""},on:{click:function(e){e.stopPropagation(),t.stopFn("video_1")}}}),t._v(" "),t.openCarWindowData.playStatus?t._e():i("img",{attrs:{src:a("O+et"),alt:""},on:{click:function(e){e.stopPropagation(),t.windowVideoPlayFn("video_1")}}}),t._v(" "),t.openCarWindowData.playStatus?i("div",{staticClass:"video-stop"},[i("img",{attrs:{src:a("nn/E"),alt:""},on:{click:function(e){e.stopPropagation(),t.windowVideoStopFn("video_1")}}})]):t._e()])]),t._v(" "),i("div",{staticClass:"info-item",staticStyle:{padding:"0 15px"}},[i("span",{staticClass:"item-title"},[t._v("当前位置：")]),t._v(" "),i("span",{staticClass:"item-text"},[t._v(t._s(t.openCarWindowData.initAddress))])]),t._v(" "),i("div",{staticClass:"window-operate"},[i("div",{staticClass:"window-operate__left"},[i("el-button",{attrs:{size:"mini"}},[t._v("视频")]),t._v(" "),i("el-button",{attrs:{size:"mini"}},[t._v("轨迹")]),t._v(" "),i("el-button",{attrs:{size:"mini"}},[t._v("指令")]),t._v(" "),i("el-button",{attrs:{size:"mini"}},[t._v("详情")])],1),t._v(" "),i("div",{staticClass:"window-operate__right"},[i("el-button",{staticStyle:{"margin-left":"65px"},attrs:{size:"mini"},on:{click:function(e){t.addTrackFn(t.openCarWindowData)}}},[t._v("跟踪车辆")]),t._v(" "),t.openCarWindowData.hasAttention?i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.carFollowFn(t.openCarWindowData,!1)}}},[t._v("取消关注")]):i("el-button",{attrs:{size:"mini"},on:{click:function(e){t.carFollowFn(t.openCarWindowData,!0)}}},[t._v("关注")])],1),t._v(" "),i("div",{staticClass:"delta-box"})])]):t._e(),t._v(" "),i("div",{staticClass:"car-track-view"},t._l(t.trackObj.licenseList.slice(0,5),function(e,a){return i("div",{key:a,staticClass:"track-item",class:e.vehicleId===t.trackObj.activeId&&"active-item",on:{click:function(a){t.switchTrackFn(e)}}},[t._v(t._s(e.licenseNum))])}))],1),t._v(" "),i("div",{staticClass:"right-view__table",class:t.viewConfig.bottom&&"right-view__table-active"},[i("div",{staticClass:"table-tabs"},[i("el-tabs",{staticClass:"init-tabs",on:{"tab-click":t.setTableData},model:{value:t.carTableViewType,callback:function(e){t.carTableViewType=e},expression:"carTableViewType"}},[i("el-tab-pane",{attrs:{name:"1"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_location_icon_cldw"}),t._v(" 车辆定位")])]),t._v(" "),t.trackObj.licenseList.length?i("el-tab-pane",{attrs:{name:"2"}},[i("span",{attrs:{slot:"label"},slot:"label"},[i("i",{staticClass:"iconfont Jamin_location_icon_clzz"}),t._v(" 车辆跟踪")])]):t._e()],1)],1),t._v(" "),i("div",{staticClass:"table-content",style:"2"===t.carTableViewType&&"padding-left: 120px;"},[i("div",{staticClass:"table-track-view"},t._l(t.trackObj.licenseList,function(e,a){return i("div",{key:a,staticClass:"track-item",class:e.vehicleId===t.trackObj.activeId&&"active-item",on:{click:function(a){t.switchTrackFn(e)}}},[t._v("\n            "+t._s(e.licenseNum)+"\n            "),i("i",{staticClass:"el-icon-close",on:{click:function(i){i.stopPropagation(),t.delTrackFn(e,a)}}})])})),t._v(" "),t.isTable?i("table-view",{directives:[{name:"show",rawName:"v-show",value:"1"===t.carTableViewType,expression:"carTableViewType === '1'"}],ref:"table",attrs:{"is-search":!1,"column-view":"",data:t.tableOptions.data,total:0,columns:t.tableOptions.columns,"search-controls":t.tableOptions.searchControls,"search-mode":t.tableOptions.searchMode,"button-controls":t.tableOptions.buttonControls,"footer-buttons":t.tableOptions.footerButtons,"pagination-layout":t.tableOptions.paginationLayout,loading:t.tableOptions.loading},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[i("el-table-column",{attrs:{slot:"initColumn",align:"center",width:"150"},slot:"initColumn",scopedSlots:t._u([{key:"header",fn:function(e){return[i("span",{attrs:{scope:e}},[t._v("状态")])]}},{key:"default",fn:function(e){return[i("span",{staticClass:"table-status-icon"},[e.row.iconUrl?i("img",{attrs:{src:e.row.iconUrl,alt:""}}):t._e()])]}}])})],1):t._e(),t._v(" "),t.isTable_2?i("table-view",{directives:[{name:"show",rawName:"v-show",value:"2"===t.carTableViewType,expression:"carTableViewType === '2'"}],ref:"table_2",attrs:{"is-search":!1,"column-view":"",data:t.tableOptions_2.data,total:0,columns:t.tableOptions_2.columns,"search-controls":t.tableOptions_2.searchControls,"search-mode":t.tableOptions_2.searchMode,"button-controls":t.tableOptions_2.buttonControls,"footer-buttons":t.tableOptions_2.footerButtons,"pagination-layout":t.tableOptions_2.paginationLayout,loading:t.tableOptions_2.loading},on:{requestTableData:t.getTableData,handleCallback:t.tableResponseFn}},[i("el-table-column",{attrs:{slot:"initColumn",align:"center",width:"150"},slot:"initColumn",scopedSlots:t._u([{key:"header",fn:function(e){return[i("span",{attrs:{scope:e}},[t._v("状态")])]}},{key:"default",fn:function(e){return[i("span",{staticClass:"table-status-icon"},[e.row.iconUrl?i("img",{attrs:{src:e.row.iconUrl,alt:""}}):t._e()])]}}])})],1):t._e()],1)])])])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"info-item"},[e("span",{staticClass:"item-title text-ellipsis"},[this._v("报警状态：")]),this._v(" "),e("span",{staticClass:"item-text"},[this._v("疲劳驾驶预警")])])}],!1,null,"0c7ef34a",null));D.options.__file="index.vue";e.default=D.exports},a60Y:function(t,e,a){t.exports=a.p+"static/img/location_pic_p@2x.742252f.png"},fe2N:function(t,e,a){t.exports=a.p+"static/img/location_pic_che_zx@2x.194370d.png"},mdYb:function(t,e,a){t.exports=a.p+"static/media/video_1.88a255b.mp4"},"nn/E":function(t,e,a){t.exports=a.p+"static/img/monitor_icon_zanting@2x.0f407cf.png"},"q/SC":function(t,e,a){t.exports=a.p+"static/img/location_pic_l@2x.34fa203.png"},rSXH:function(t,e,a){t.exports=a.p+"static/img/location_pic_huangchepai@2x.71f5abf.png"},xAz7:function(t,e,a){t.exports=a.p+"static/img/location_pic_lvchepai@2x.2520330.png"}}]);