(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6a80","YelX","YelX","chunk-4549","chunk-e253","YelX"],{"/saT":function(e,t,i){"use strict";var s=i("lI05");i.n(s).a},"21ia":function(e,t,i){e.exports=i.p+"static/img/17_cb_xs.75e5041.png"},"2LiM":function(e,t,i){e.exports=i.p+"static/img/16_jc_xs.ead5176.png"},"9ADt":function(e,t,i){e.exports=i.p+"static/img/01_kc_xs.85c19c4.png"},DaD6:function(e,t,i){"use strict";i.r(t);var s=i("bS4n"),a=i.n(s),r=i("ABCu"),l=i("8t5x"),o={components:{treeView:r.a},data:function(){return{drawerObj:{isShow:!1,size:"400px"},vehiclesData:[],motorcadeOption:{motorcadeId:null,name:null,filter:"",treeOption:{defaultProps:{children:"opMotorcadeNodes",label:"name"},nodeKey:"motorcadeId",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}}}}},computed:a()({},Object(l.b)(["elNorms"])),watch:{"motorcadeOption.filter":function(e){this.$refs._tree.$refs.sonTree.filter(e)}},methods:{openFn:function(e){this.vehiclesData=e,this.drawerObj.isShow=!0},nodeClick:function(e){this.motorcadeOption.motorcadeId=e.motorcadeId},submitFn:function(){var e=this;if(this.motorcadeOption.motorcadeId){var t={motorcadeId:this.motorcadeOption.motorcadeId,ids:this.vehiclesData.map(function(e){return e.vehicleId}).join(",")};this.$http.deleteApi("/vehicle/motorcade/updateBatch",t).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.drawerObj.isShow=!1,e.$message.success(e.$t("message.success")),e.$parent.refreshTableFn&&e.$parent.refreshTableFn())})}else this.$message.warning(this.$t("vehicleAdminister.select_fleet"))}}},n=(i("aGyU"),i("ZrdR")),c=Object(n.a)(o,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{title:e.$t("vehicleAdminister.modify_motorcade"),visible:e.drawerObj.isShow,size:e.drawerObj.size,"wrapper-closable":!1},on:{"update:visible":function(t){e.$set(e.drawerObj,"isShow",t)}}},[i("div",{staticClass:"drawer-body"},[i("el-input",{staticClass:"input-query",attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.search_fleet_name"),"prefix-icon":"el-icon-search"},model:{value:e.motorcadeOption.filter,callback:function(t){e.$set(e.motorcadeOption,"filter","string"==typeof t?t.trim():t)},expression:"motorcadeOption.filter"}}),e._v(" "),i("div",{staticClass:"body-tree init-tree"},[i("tree-view",{ref:"_tree",attrs:{"tree-data":e.motorcadeOption.treeOption,"defined-data":e.$parent.treeSelectData},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"left-title text-ellipsis",style:t.data.data.motorcadeId===e.motorcadeOption.motorcadeId?"color: var(--main-primary);":""},[null===t.data.data.motorcadeId?i("i",{staticClass:"iconfont Jamin_location_icon_dn"}):0===t.data.data.parentId?i("i",{staticClass:"iconfont Jamin_location_icon_gs"}):i("i",{staticClass:"iconfont Jamin_location_icon_cd"}),e._v("\n            "+e._s(t.data.data.name)+"\n          ")])]}}])})],1)],1),e._v(" "),i("div",{staticClass:"footer-button"},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.submitFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerObj.isShow=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)])},[],!1,null,"decabd50",null);c.options.__file="modifyTheFleet.vue";t.default=c.exports},Eejq:function(e,t,i){},"L+qT":function(e,t,i){e.exports=i.p+"static/img/09_pbc_xs.063916b.png"},"La+X":function(e,t,i){e.exports=i.p+"static/img/15_ztc_xs.1ec259e.png"},Syyn:function(e,t,i){"use strict";i.r(t);var s=i("bS4n"),a=i.n(s),r=i("ABCu"),l=i("mSNy"),o=i("8t5x"),n={components:{treeView:r.a},data:function(){var e=this;return{drawerObj:{isShow:!1,title:l.a.t("vehicleAdminister.quickly_add_vehicle"),size:"500px",formLabelWidth:"140px",formWidth:"280px",loading:!1},formData:{createType:1,deviceNum:null,licenseNum:null,simNum:null,licenseColor:2,motorcadeId:null,motorcadeName:null,deviceType:1,channelNum:0,channelNames:[],icon:"02_czc_",startNumber:null,endNumber:null},rules:{deviceNum:[{required:!0,validator:function(t,i,s){if(1===e.formData.createType)i?s():s(new Error(l.a.t("devicePage.device_num_rule")));else if(i&&e.formData.startNumber&&e.formData.endNumber){var a=new RegExp(/^\d+$/);a.test(e.formData.startNumber)&&a.test(e.formData.endNumber)?s():s(new Error(l.a.t("devicePage.device_num_tip_2")))}else s(new Error(l.a.t("devicePage.device_num_rule")))},trigger:"blur"}],licenseNum:[{required:!0,message:l.a.t("vehicleAdminister.enter_license_plate_number"),trigger:"blur"}],motorcadeId:[{required:!0,message:l.a.t("devicePage.form_rule_message_2"),trigger:"blur"}]},channeObj:{},deviceType:[],devNumList:[],channelTotal:37,deviceNumPopover:!1,devNumListSearchStatus:!1,devNumListSearch:"",motorcadeOption:{motorcadeId:null,name:null,filter:"",treeOption:{defaultProps:{children:"opMotorcadeNodes",label:"name"},nodeKey:"motorcadeId",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}}},iconList:[{name:l.a.t("vehicleAdminister.bus"),value:"01_kc_",iconUrl:i("9ADt")},{name:l.a.t("vehicleAdminister.taxi"),value:"02_czc_",iconUrl:i("yEz2")},{name:l.a.t("vehicleAdminister.school_bus"),value:"03_xc_",iconUrl:i("l+Cu")},{name:l.a.t("vehicleAdminister.truck"),value:"04_hc_",iconUrl:i("j+9R")},{name:l.a.t("vehicleAdminister.container_truck"),value:"05_jzxc_",iconUrl:i("qOkx")},{name:l.a.t("vehicleAdminister.tank_car"),value:"06_gc_",iconUrl:i("YWMK")},{name:l.a.t("vehicleAdminister.tractor_text_1"),value:"07_qyc_",iconUrl:i("lpko")},{name:l.a.t("vehicleAdminister.trailer"),value:"08_gc_",iconUrl:i("bqyo")},{name:l.a.t("vehicleAdminister.flatbed_car"),value:"09_pbc_",iconUrl:i("L+qT")},{name:l.a.t("vehicleAdminister.concrete_mixing_tank_truck"),value:"10_jbgc_",iconUrl:i("aL2/")},{name:l.a.t("vehicleAdminister.dangerous_goods_transport_vehicle"),value:"11_wxpysc_",iconUrl:i("fZjX")},{name:l.a.t("vehicleAdminister.agricultural_vehicles"),value:"12_nyc_",iconUrl:i("p0cv")},{name:l.a.t("vehicleAdminister.tractor_text_2"),value:"13_tlj_",iconUrl:i("iREr")},{name:l.a.t("vehicleAdminister.sanitation_garbage_truck"),value:"14_hwljc_",iconUrl:i("yrqw")},{name:l.a.t("vehicleAdminister.muck_truck"),value:"15_ztc_",iconUrl:i("La+X")},{name:l.a.t("vehicleAdminister.police_car"),value:"16_jc_",iconUrl:i("2LiM")},{name:l.a.t("vehicleAdminister.vessel"),value:"17_cb_",iconUrl:i("21ia")}]}},computed:a()({},Object(o.b)(["elNorms"])),watch:{"motorcadeOption.filter":function(e){this.$refs._motorcade_type_tree.$refs.sonTree.filter(e)},"formData.channelNum":function(e){this.channeObj={};for(var t=[],i=0;i<e;i++)this.$set(this.channeObj,i,"CH"+(i+1)),t.push(this.channeObj[i]);this.formData.channelNames=t}},created:function(){this.getCodesFn()},methods:{getCodesFn:function(){var e=this;this.$http.get("/dict/list/codes",{dicCodes:"deviceType"}).then(function(t){if(t.code===e.$config.API_STATUS.OK)for(var i in t.data)e[i]=t.data[i].map(function(e){return{value:e.itemName,label:e.itemValue}});e.getDevNumDataFn()})},getDevNumDataFn:function(){var e=this;this.$http.get("/device/list/vehicle/all").then(function(t){t.code===e.$config.API_STATUS.OK&&t.data&&(e.devNumList=t.data.map(function(t){return{deviceNum:t.deviceNum,companyId:t.companyId,companyName:t.companyName,deviceType:t.deviceType,deviceTypeName:e.deviceTypeOfNameFn(t.deviceType)}}))})},deviceTypeOfNameFn:function(e){for(var t="",i=0;i<this.deviceType.length;i++){var s=this.deviceType[i];if(s.value===e){t=s.label;break}}return t},openFn:function(){this.formData=this.$options.data().formData,this.motorcadeOption=this.$options.data().motorcadeOption,this.deviceNumPopover=!1,this.devNumListSearchStatus=!1,this.devNumListSearch="",this.drawerObj.isShow=!0},motorcadeNodeClick:function(e,t,i){this.$set(this[i],"motorcadeId",e.motorcadeId),this.$set(this[i],"motorcadeName",e.name),this.$set(this.motorcadeOption,"motorcadeId",e.motorcadeId),this.$set(this.motorcadeOption,"name",e.name),this.$refs._motorcade_tree_select.blur()},deviceNumTableRowDblclickFn:function(e){this.formData.deviceNum=e.deviceNum,this.formData.simNum=e.simNum,this.deviceNumPopover=!1},filterDevNumList:function(){var e=this;return this.devNumList.filter(function(t){return!e.devNumListSearch||t.deviceNum.toLowerCase().includes(e.devNumListSearch.toLowerCase())})},opacityTypeChangeFn:function(){this.$refs._form.clearValidate()},submitFn:function(){var e=this;this.$refs._form.validate(function(t){t&&(e.drawerObj.loading=!0,e.$http.post("/vehicle/fastCreate",e.formData).then(function(t){e.drawerObj.loading=!1,t.code===e.$config.API_STATUS.OK&&(e.drawerObj.isShow=!1,e.$message.success(t.message),e.devNumList=e.devNumList.filter(function(t){return e.formData.deviceNum!==t.deviceNum}),e.$parent.refreshTableFn&&e.$parent.refreshTableFn())}).catch(function(){e.drawerObj.loading=!1}))})}}},c=(i("r0m4"),i("ZrdR")),d=Object(c.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-drawer",{attrs:{title:e.drawerObj.title,visible:e.drawerObj.isShow,size:e.drawerObj.size,"wrapper-closable":!1},on:{"update:visible":function(t){e.$set(e.drawerObj,"isShow",t)}}},[i("div",{staticClass:"drawer-body"},[i("el-form",{ref:"_form",attrs:{model:e.formData,rules:e.rules,size:e.elNorms.formSize,"label-width":e.drawerObj.formLabelWidth}},[i("el-form-item",{attrs:{label:e.$t("devicePage.opacity_type")+"：",prop:"createType"}},[i("el-radio-group",{on:{change:e.opacityTypeChangeFn},model:{value:e.formData.createType,callback:function(t){e.$set(e.formData,"createType",t)},expression:"formData.createType"}},[i("el-radio",{attrs:{label:1}},[e._v(e._s(e.$t("devicePage.opacity_type_1")))]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v(e._s(e.$t("devicePage.opacity_type_2")))])],1)],1),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:this.$t("vehicleAdminister.equipment_number")+"：",prop:"deviceNum"}},[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.deviceNum,callback:function(t){e.$set(e.formData,"deviceNum",t)},expression:"formData.deviceNum"}},[i("template",{slot:"append"},[i("el-popover",{attrs:{placement:"bottom-end",width:"500",offset:80},model:{value:e.deviceNumPopover,callback:function(t){e.deviceNumPopover=t},expression:"deviceNumPopover"}},[i("el-table",{attrs:{data:e.filterDevNumList(),height:300,size:"mini"},on:{"row-click":e.deviceNumTableRowDblclickFn}},[i("el-table-column",{attrs:{property:"deviceNum",align:"center"},scopedSlots:e._u([{key:"header",fn:function(t){return[!1===e.devNumListSearchStatus?i("div",{attrs:{"init-data":t.row}},[e._v(e._s(e.$t("devicePage.device_num"))),i("i",{staticClass:"el-icon-search device-search-icon",on:{click:function(t){e.devNumListSearchStatus=!0}}})]):i("div",{staticClass:"device-search-view"},[i("el-input",{attrs:{size:"mini"},model:{value:e.devNumListSearch,callback:function(t){e.devNumListSearch=t},expression:"devNumListSearch"}}),e._v(" "),i("i",{staticClass:"el-icon-circle-close",on:{click:function(t){e.devNumListSearch="",e.devNumListSearchStatus=!1}}})],1)]}}])}),e._v(" "),i("el-table-column",{attrs:{property:"deviceTypeName",label:e.$t("devicePage.template_type"),align:"center"}}),e._v(" "),i("el-table-column",{attrs:{property:"companyName",label:e.$t("devicePage.company_name"),align:"center"}})],1),e._v(" "),i("div",{staticClass:"device-num-icon",attrs:{slot:"reference"},on:{click:function(t){e.deviceNumPopover=!0}},slot:"reference"},[i("i",{staticClass:"el-icon-arrow-down"})])],1)],1)],2)],1):e._e(),e._v(" "),2===e.formData.createType?i("el-form-item",{attrs:{label:this.$t("vehicleAdminister.equipment_number")+"：",prop:"deviceNum"}},[i("div",[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.deviceNum,callback:function(t){e.$set(e.formData,"deviceNum","string"==typeof t?t.trim():t)},expression:"formData.deviceNum"}},[i("template",{slot:"prepend"},[e._v(e._s(e.$t("devicePage.prefix_number")))])],2)],1),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[i("el-input",{style:"width: 190px;",attrs:{size:e.elNorms.size,maxlength:"4"},model:{value:e.formData.startNumber,callback:function(t){e.$set(e.formData,"startNumber","string"==typeof t?t.trim():t)},expression:"formData.startNumber"}},[i("template",{slot:"prepend"},[e._v(e._s(e.$t("devicePage.append_number")))])],2),e._v(" "),i("span",{staticStyle:{margin:"0 4px"}},[e._v("-")]),e._v(" "),i("el-input",{style:"width: 70px;",attrs:{size:e.elNorms.size,maxlength:"4"},model:{value:e.formData.endNumber,callback:function(t){e.$set(e.formData,"endNumber","string"==typeof t?t.trim():t)},expression:"formData.endNumber"}})],1),e._v(" "),i("div",{staticClass:"device-num-tip"},[e._v(e._s(e.$t("devicePage.device_num_tip")))])]):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_number")+"：",prop:"licenseNum"}},[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.licenseNum,callback:function(t){e.$set(e.formData,"licenseNum",t)},expression:"formData.licenseNum"}})],1):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:this.$t("vehicleAdminister.sim_number")+"："}},[i("el-input",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.simNum,callback:function(t){e.$set(e.formData,"simNum",t)},expression:"formData.simNum"}})],1):e._e(),e._v(" "),1===e.formData.createType?i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_color")+"：",prop:"licenseColor"}},[i("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size,filterable:""},model:{value:e.formData.licenseColor,callback:function(t){e.$set(e.formData,"licenseColor",t)},expression:"formData.licenseColor"}},e._l(e.$parent.licenseColor,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.fleet")+"：",prop:"motorcadeId"}},[i("el-select",{ref:"_motorcade_tree_select",style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.motorcadeId,callback:function(t){e.$set(e.formData,"motorcadeId",t)},expression:"formData.motorcadeId"}},[i("el-option",{staticClass:"tree-select",attrs:{value:e.formData.motorcadeId,label:e.formData.motorcadeName}},[i("div",{staticClass:"input-query",on:{click:function(e){e.stopPropagation()}}},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.fleet"),"prefix-icon":"el-icon-search"},model:{value:e.motorcadeOption.filter,callback:function(t){e.$set(e.motorcadeOption,"filter","string"==typeof t?t.trim():t)},expression:"motorcadeOption.filter"}})],1),e._v(" "),i("tree-view",{ref:"_motorcade_type_tree",attrs:{"tree-data":e.motorcadeOption.treeOption,"defined-data":e.$parent.treeSelectData},on:{"node-click":function(t){e.motorcadeNodeClick(arguments[0],arguments[1],"formData")}},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("devicePage.device_type"),prop:"deviceType"}},[i("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},on:{change:function(t){e.formData.channelNum=0}},model:{value:e.formData.deviceType,callback:function(t){e.$set(e.formData,"deviceType",t)},expression:"formData.deviceType"}},e._l(e.deviceType,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),1===e.formData.deviceType?i("el-form-item",{attrs:{label:e.$t("devicePage.channel_number"),prop:"deviceType"}},[i("el-select",{style:"width: "+e.drawerObj.formWidth+";",attrs:{size:e.elNorms.size},model:{value:e.formData.channelNum,callback:function(t){e.$set(e.formData,"channelNum",t)},expression:"formData.channelNum"}},e._l(e.channelTotal,function(e){return i("el-option",{key:e-1,attrs:{label:e-1,value:e-1}})})),e._v(" "),e._l(e.channeObj,function(t,s){return i("el-input",{key:s,staticClass:"channel-input",attrs:{size:e.elNorms.size},model:{value:e.channeObj[s],callback:function(t){e.$set(e.channeObj,s,t)},expression:"channeObj[key]"}})})],2):e._e(),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_icon")}},[i("el-radio-group",{staticStyle:{width:"340px"},model:{value:e.formData.icon,callback:function(t){e.$set(e.formData,"icon",t)},expression:"formData.icon"}},e._l(e.iconList,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[i("img",{staticStyle:{height:"28px","vertical-align":"middle"},attrs:{src:e.iconUrl,alt:""}})])}))],1)],1)],1),e._v(" "),i("div",{staticClass:"footer-button"},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle,loading:e.drawerObj.loading,disabled:e.drawerObj.loading},on:{click:e.submitFn}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerObj.isShow=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)])},[],!1,null,"68439e51",null);d.options.__file="vehicleQuicklyAdd.vue";t.default=d.exports},THMs:function(e,t,i){},YWMK:function(e,t,i){e.exports=i.p+"static/img/06_gc_xs.aa3ede2.png"},YelX:function(e,t,i){"use strict";i.r(t);var s=i("bS4n"),a=i.n(s),r=i("8t5x");t.default={data:function(){return{permissionList:{vehicleUpdate:"/vehicle/update/**",vehicleExport:"/vehicle/export",vehicleDelete:"/vehicle/delete",vehicleList:"/vehicle/list",vehicleCreate:"/vehicle/create",vehicleFastCreate:"/vehicle/fastCreate",vehicleMotorcadeCreate:"/vehicle/motorcade/create",vehicleMotorcadeUpdate:"/vehicle/motorcade/update",vehicleMotorcadeDelete:"/vehicle/motorcade/delete/**",companyList:"/company/list",companyCreate:"/company/create",companyExport:"/company/export",companyDetail:"/company/**",companyUpdate:"/company/update/**",companyPersonalization:"/company/personalization/**",companyDelete:"/company/delete",driverList:"/driver/list",driverCreate:"/driver/create",driverDetail:"/driver/get/**",driverUpdate:"/driver/update/**",driverDelete:"/driver/delete",driverExport:"/driver/export",labelList:"/label/list",labelCreate:"/label/create",labelUpdate:"/label/update/**",labelDelete:"/label/delete",labelExport:"/label/export",regionList:"/region/list",regionCreate:"/region/create",regionUpdate:"/region/update/**",regionDelete:"/region/delete",regionExport:"/region/export",routeList:"/route/list",routeCreate:"/route/create",routeUpdate:"/route/update/**",routeDelete:"/route/delete",routeExport:"/route/export",adminList:"/admin/list",adminCreate:"/admin/create",adminUpdate:"/admin/update/**",adminDelete:"/admin/delete",adminExport:"/admin/export",typeCreate:"/ef/type/create",typeUpdate:"/ef/type/update/**",typeDelete:"/ef/type/delete/**",drivingLicenseList:"/driving/license/list",drivingLicenseCreate:"/driving/license/create",drivingLicenseUpdate:"/driving/license/update/**",drivingLicenseDelete:"/driving/license/delete",drivingLicense:"/driving/license/export",transportList:"/transport/list",transportCreate:"/transport/create",transportUpdate:"/transport/update/**",transportDelete:"/transport/delete",transportExport:"/transport/export",maintainList:"/maintain/list",maintainCreate:"/maintain/create",maintainUpdate:"/maintain/update/**",maintainDelete:"/maintain/delete",maintainExport:"/maintain/export",insuranceList:"/insurance/list",insuranceCreate:"/insurance/create",insuranceUpdate:"/insurance/update/**",insuranceDelete:"/insurance/delete",insuranceExport:"/insurance/export",insuranceListAdvance:"/insurance/list/advance",annualList:"/annual/list",annualCreate:"/annual/create",annualUpdate:"/annual/update/**",annualDelete:"/annual/delete",annualExport:"/annual/export",annualListAdvance:"/annual/list/advance",repairList:"/repair/list",repairCreate:"/repair/create",repairUpdate:"/repair/update/**",repairDelete:"/repair/delete",repairExport:"/repair/export",accidentList:"/accident/list",accidentCreate:"/accident/create",accidentUpdate:"/accident/update/**",accidentDelete:"/accident/delete",accidentExport:"/accident/export",simList:"/sim/list",simCreate:"/sim/create",simUpdate:"/sim/update/**",simDelete:"/sim/delete",simExport:"/sim/export"}}},computed:a()({},Object(r.b)(["permsData"]),{isAdministrator:function(){return[-1,-2].includes(Number(this.$store.getters.userData.userType))}}),watch:{permsData:{handler:function(){this.handlePermissionShow&&this.handlePermissionShow()},immediate:!0}},methods:{isPermissionShow:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return!!this.isAdministrator||this.permsData.includes(this.permissionList[e])}}}},aGyU:function(e,t,i){"use strict";var s=i("THMs");i.n(s).a},"aL2/":function(e,t,i){e.exports=i.p+"static/img/10_jbgc_xs.2448c10.png"},bqyo:function(e,t,i){e.exports=i.p+"static/img/08_gc_xs.c6fad11.png"},fZjX:function(e,t,i){e.exports=i.p+"static/img/11_wxpysc_xs.343b1b8.png"},iREr:function(e,t,i){e.exports=i.p+"static/img/13_tlj_xs.f78b43e.png"},"j+9R":function(e,t,i){e.exports=i.p+"static/img/04_hc_xs.b203d79.png"},jcYt:function(e,t,i){e.exports=i.p+"static/img/not-perm.d97c442.png"},"l+Cu":function(e,t,i){e.exports=i.p+"static/img/03_xc_xs.0163428.png"},lI05:function(e,t,i){},lpko:function(e,t,i){e.exports=i.p+"static/img/07_qyc_xs.68f60c4.png"},p0cv:function(e,t,i){e.exports=i.p+"static/img/12_nyc_xs.9d68257.png"},paOg:function(e,t,i){"use strict";i.r(t);var s=i("unDg"),a=i.n(s),r=i("bS4n"),l=i.n(r),o=i("omC7"),n=i.n(o),c=i("ABCu"),d=i("BHIJ"),m=i("AlM9"),p=i("4HbD"),u=i("NV8S"),h=i("Syyn"),v=i("DaD6"),f=i("XVnh"),_=i("YelX"),y=i("8t5x"),b=i("MfIo"),g={licenseNum:null,vehicleName:null,licenseColor:2,vehicleColor:null,vehicleType:null,icon:"02_czc_",brand:null,motorcadeId:null,use:null,status:1,approvePerson:null,driverIds:[],approveWeight:null,startAt:null,buyAt:null,endAt:null,scrapAt:null},$={deviceId:"",installDate:Object(b.d)(new Date,"yyyy-MM-dd HH:mm:ss"),simId:""},A={drivingNum:null,model:null,engineNum:null,vin:null,timeoutAt:null,advanceNum:null,photoFront:null,photoBack:null},N={transportNum:null,busScope:null,timeoutAt:null,advanceNum:null,photo:null},O={name:"VehicleAdminister",components:{treeView:c.a,drawer:d.a,TableView:m.a,driverDrawer:p.default,deviceDrawer:u.default,QuicklyAddVehicle:h.default,ModifyTheFleet:v.default,notPerm:f.a},mixins:[_.default],data:function(){var e=this;return{selectKey:"licenseNum",formItemStyle:"width:176px;",deviceArr:[],simArr:[],driverArr:[],editDriverArr:[],fieldMap:{},fileLists:[],fileList:[],upData:{},api:"",vehicleId:"",password:{licenseNum:"",vehicleName:"",pass:"",checkPass:"",vehicleId:null},passwordRules:{pass:[{required:!0,message:this.$t("vehicleAdminister.enter_confirm_password"),trigger:"blur"},{validator:function(t,i,s){i.length<6||i.length>20?s(new Error(e.$t("vehicleAdminister.length_limit"))):/^[a-z0-9]+$/i.test(i)?s():s(new Error(e.$t("vehicleAdminister.password_limit")))},trigger:"blur"}],checkPass:[{required:!0,message:this.$t("vehicleAdminister.confirm_password"),trigger:"blur"},{validator:function(t,i,s){i!==e.password.pass?s(new Error(e.$t("vehicleAdminister.inconsistent_passwords"))):s()},trigger:"blur"}]},dialogVisible:!1,upLoadData:{Authorization:null,motorcadeId:null},upLoadRole:{companyId:[{required:!0,message:this.$t("vehicleAdminister.select_fleet_company"),trigger:"change"}]},iconList:[{name:this.$t("vehicleAdminister.bus"),value:"01_kc_",iconUrl:i("9ADt")},{name:this.$t("vehicleAdminister.taxi"),value:"02_czc_",iconUrl:i("yEz2")},{name:this.$t("vehicleAdminister.school_bus"),value:"03_xc_",iconUrl:i("l+Cu")},{name:this.$t("vehicleAdminister.truck"),value:"04_hc_",iconUrl:i("j+9R")},{name:this.$t("vehicleAdminister.container_truck"),value:"05_jzxc_",iconUrl:i("qOkx")},{name:this.$t("vehicleAdminister.tank_car"),value:"06_gc_",iconUrl:i("YWMK")},{name:this.$t("vehicleAdminister.tractor_text_1"),value:"07_qyc_",iconUrl:i("lpko")},{name:this.$t("vehicleAdminister.trailer"),value:"08_gc_",iconUrl:i("bqyo")},{name:this.$t("vehicleAdminister.flatbed_car"),value:"09_pbc_",iconUrl:i("L+qT")},{name:this.$t("vehicleAdminister.concrete_mixing_tank_truck"),value:"10_jbgc_",iconUrl:i("aL2/")},{name:this.$t("vehicleAdminister.dangerous_goods_transport_vehicle"),value:"11_wxpysc_",iconUrl:i("fZjX")},{name:this.$t("vehicleAdminister.agricultural_vehicles"),value:"12_nyc_",iconUrl:i("p0cv")},{name:this.$t("vehicleAdminister.tractor_text_2"),value:"13_tlj_",iconUrl:i("iREr")},{name:this.$t("vehicleAdminister.sanitation_garbage_truck"),value:"14_hwljc_",iconUrl:i("yrqw")},{name:this.$t("vehicleAdminister.muck_truck"),value:"15_ztc_",iconUrl:i("La+X")},{name:this.$t("vehicleAdminister.police_car"),value:"16_jc_",iconUrl:i("2LiM")},{name:this.$t("vehicleAdminister.vessel"),value:"17_cb_",iconUrl:i("21ia")}],opVehicleVO:JSON.parse(n()(g)),rules:{licenseNum:[{required:!0,message:this.$t("vehicleAdminister.enter_license_plate_number"),trigger:"blur"}],licenseColor:[{required:!0,message:this.$t("vehicleAdminister.select_license_plate_color"),trigger:"change"}],vehicleType:[{required:!0,message:this.$t("vehicleAdminister.select_vehicle_type"),trigger:"change"}],motorcadeId:[{required:!0,message:this.$t("vehicleAdminister.select_fleet"),trigger:"change"}],status:[{required:!0,message:this.$t("vehicleAdminister.select_vehicle_status"),trigger:"change"}],icon:[{required:!0,message:this.$t("vehicleAdminister.select_vehicle_icon"),trigger:"change"}]},equipmentVO:JSON.parse(n()($)),rules1:{deviceId:[{required:!0,message:this.$t("vehicleAdminister.select_device"),trigger:"change"}],installDate:[{required:!0,message:this.$t("vehicleAdminister.select_installation_date"),trigger:"change"}]},opDrivingLicenseVO:JSON.parse(n()(A)),opTransportLicenseVO:JSON.parse(n()(N)),item:!0,item1:!0,item2:!0,item3:!0,drawerDisplay:!1,direction:"rtl",drawerTitle:"",drawerWidth:"720px",alias:{pageSize:"pageSize",pageNum:"pageNum"},motorcadeId:"",activeMenu:{motorcadeId:null,name:""},companyId:null,parentId:0,isTree:!0,isTable:!0,filterText:"",resTreeData:null,resetMenus:[],licenseColor:[],vehicleType:[],treeSelectData:[],treeData:{extendData:{},checkOriginName:"",treeQuery:{type:"get",action:"/vehicle/motorcade/treeList",list:null},defaultProps:{children:"opMotorcadeNodes",label:"name",isLeaf:"lezy"},nodeKey:"motorcadeId",currentNodeKey:1,defaultExpandAll:!0,expandClickNode:!1,indent:16,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}},draggable:{isDraggable:!1,allowDrap:function(e,t,i){return!0},allowDrop:function(e,t,i){return e.data.type===t.data.type?"inner"!==i:(1!==e.data.type||0!==t.data.type)&&(0!==e.data.type||1!==t.data.type)}}},params:{},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:this.$t("vehicleAdminister.serial_number")},{title:this.$t("vehicleAdminister.vehicle_number"),key:"licenseNum",type:"text"},{title:this.$t("vehicleAdminister.license_plate_color"),type:"tagText",key:"licenseColor",tags:[]},{title:this.$t("vehicleAdminister.fleet_company"),key:"motorcadeName",type:"text"},{title:this.$t("vehicleAdminister.equipment_number"),key:"deviceNum",type:"text"},{title:this.$t("vehicleAdminister.sim_number"),key:"simNum",type:"text"},{title:this.$t("vehicleAdminister.driver"),key:"driverName",type:"text"},{title:this.$t("vehicleAdminister.online_status"),type:"tagText",key:"onlineStatus",tags:[{value:1,text:this.$t("vehicleAdminister.online"),option:{type:"success"}},{value:0,text:this.$t("vehicleAdminister.offline"),option:{type:"danger"}}]},{title:this.$t("vehicleAdminister.vehicle_status"),type:"tagText",key:"status",tags:[{value:1,text:this.$t("vehicleAdminister.normal")},{value:2,text:this.$t("vehicleAdminister.disable_text_1"),option:{type:"warning"}},{value:3,text:this.$t("vehicleAdminister.repair"),option:{type:"info"}},{value:4,text:this.$t("vehicleAdminister.arrears"),option:{type:"danger"}}]},{title:this.$t("vehicleAdminister.network_access_time"),key:"installDate",type:"text"},{title:this.$t("vehicleAdminister.service_expiration_time"),key:"endAt",type:"text"},{title:this.$t("operateCommon.operation"),key:"operate",type:"operate",fixed:"right",width:"120",buttons:[],mode:"default",dropdownType:"primary"}],buttonControls:[],searchControls:[{type:"selectInput",key:["inputKey","selectKey"],inputKey:"inputKey",selectKey:"selectKey",selectDefaultValue:"licenseNum",selectPlaceholder:this.$t("vehicleAdminister.please_enter"),width:"220px",selectWidth:"100px",clearable:!0,options:[{name:this.$t("vehicleAdminister.license_plate_number"),value:"licenseNum"},{name:this.$t("vehicleAdminister.equipment_number"),value:"deviceNum"},{name:this.$t("vehicleAdminister.sim_number"),value:"simNum"}]},{type:"input",key:"driverName",placeholder:this.$t("vehicleAdminister.driver"),width:"120px",size:"small"},{type:"select",key:"status",placeholder:this.$t("vehicleAdminister.vehicle_status"),width:"120px",clearable:!0,options:[{name:this.$t("vehicleAdminister.normal"),value:1},{name:this.$t("vehicleAdminister.disable_text_1"),value:2},{name:this.$t("vehicleAdminister.repair"),value:3},{name:this.$t("vehicleAdminister.arrears"),value:4}]},{type:"select",key:"onlineStatus",placeholder:this.$t("vehicleAdminister.online_status"),width:"120px",clearable:!0,options:[{name:this.$t("vehicleAdminister.offline"),value:0},{name:this.$t("vehicleAdminister.online"),value:1}]}],searchMode:"immediate",footerButtons:[],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1},dialogDisplay:!1,dialogData:{staticData:null,isDialogDisplay:!0,title:this.$t("vehicleAdminister.new_role"),data:"",defaultData:"",mainWidth:"500",titleWidth:"100",btnAlign:"center",formList:[{title:this.$t("vehicleAdminister.role_name"),type:"input",labelWidth:"100",offsetWidth:"320",key:"input",rules:[{required:!0,message:this.$t("vehicleAdminister.enter_role_name"),trigger:"blur"}]},{title:this.$t("vehicleAdminister.role_group"),type:"select",labelWidth:"100",offsetWidth:"320",key:"select",handlerCallback:{target:"blurFunction",funcName:"inputCallback"},options:{type:"default",list:[{name:this.$t("vehicleAdminister.role_group_1"),value:1},{name:this.$t("vehicleAdminister.role_group_2"),value:2},{name:this.$t("vehicleAdminister.role_group_3"),value:3}]},rules:[{required:!0,message:this.$t("vehicleAdminister.select_role_group"),trigger:"blur"}]},{title:this.$t("vehicleAdminister.description"),type:"textarea",offsetWidth:"320",labelWidth:"100",key:"input2"}],formButton:[{name:this.$t("operateCommon.ok"),type:"confirm",class:"warning",round:!1},{name:this.$t("operateCommon.cancel"),type:"cancel",class:"",round:!1}]},fleetTreeOptions:{defaultProps:{children:"children",label:"label"},nodeKey:"value",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.label.indexOf(e)}}},vehicleTypeOption:{itemName:null,itemValue:null,filter:"",treeOption:{defaultProps:{children:"sysDictionaryItems",label:"itemValue"},nodeKey:"itemName",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.itemValue.indexOf(e)}}}},motorcadeOption:{motorcadeId:null,name:null,filter:"",treeOption:{defaultProps:{children:"opMotorcadeNodes",label:"name"},nodeKey:"motorcadeId",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}}}}},computed:l()({},Object(y.b)(["elNorms","userData"]),{isFleetManagementPermission:function(){return this.isPermissionShow("vehicleMotorcadeCreate")||this.isPermissionShow("vehicleMotorcadeUpdate")||this.isPermissionShow("vehicleMotorcadeDelete")}}),watch:{filterText:function(e){this.$refs.tree.$refs.sonTree.filter(e)},"vehicleTypeOption.filter":function(e){this.$refs._vehicle_type_tree.$refs.sonTree.filter(e)},"motorcadeOption.filter":function(e){this.$refs._motorcade_type_tree.$refs.sonTree.filter(e)}},created:function(){this.api=this.$config.API_CONFIG.API_ROOT,this.upData={Authorization:this.userData.tokenHead+this.userData.token},this.getCodesFn(),this.newDriver(),this.newDevice()},mounted:function(){var e=this;this.$nextTick(function(){e.$refs.table&&(e.$refs.table.searchParams.selectKey="licenseNum")})},methods:{handlePermissionShow:function(){this.tableOptions.buttonControls=[],this.isPermissionShow("vehicleFastCreate")&&this.tableOptions.buttonControls.push({text:this.$t("vehicleAdminister.quickly_add_vehicle"),icon:"el-icon-plus",funcName:"quicklyAddVehicleFn"}),this.isPermissionShow("vehicleCreate")&&this.tableOptions.buttonControls.push({text:this.$t("vehicleAdminister.add_vehicle"),icon:"el-icon-plus",funcName:"addVehicle"}),this.isPermissionShow("vehicleCreate")&&this.tableOptions.buttonControls.push({text:this.$t("vehicleAdminister.batch_import"),type:"null",icon:"el-icon-folder-opened",funcName:"batchExport"}),this.isPermissionShow("vehicleExport")&&this.tableOptions.buttonControls.push({text:this.$t("vehicleAdminister.export_record"),type:"null",icon:"el-icon-download",funcName:"exportRecord"}),this.tableOptions.footerButtons=[],this.isPermissionShow("vehicleUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("vehicleAdminister.modify_motorcade"),icon:"el-icon-edit",funcName:"modifyMotorcadeFn"}),this.isPermissionShow("vehicleUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("vehicleAdminister.enable"),icon:"el-icon-circle-check",funcName:"hiddenRole"}),this.isPermissionShow("vehicleUpdate")&&this.tableOptions.footerButtons.push({text:this.$t("vehicleAdminister.disable_text_2"),type:"danger",icon:"el-icon-remove-outline",funcName:"displayRole"}),this.isPermissionShow("vehicleDelete")&&this.tableOptions.footerButtons.push({text:this.$t("operateCommon.delete"),type:"danger",icon:"el-icon-delete",funcName:"removeRole"});var e=this.tableOptions.columns.findIndex(function(e){return"operate"===e.key});this.tableOptions.columns[e].buttons=[],e>-1&&this.isPermissionShow("vehicleUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("operateCommon.edit"),size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_bj",funcName:"editRole"}),e>-1&&this.isPermissionShow("vehicleUpdate")&&this.tableOptions.columns[e].buttons.push({tipText:this.$t("vehicleAdminister.vehicle_password"),size:"mini",type:"text",icon:"iconfont Jamin_vehicle_icon_chemima",funcName:"reset"})},resetFn:function(){this.opVehicleVO=JSON.parse(n()($)),this.equipmentVO=JSON.parse(n()(g)),this.opDrivingLicenseVO=JSON.parse(n()(A)),this.opTransportLicenseVO=JSON.parse(n()(N)),this.fileList=[]},jump:function(e){this.$router.push({name:e,params:{open:!0}})},endTime:function(e){this.opVehicleVO.startAt&&this.opVehicleVO.endAt&&new Date(this.opVehicleVO.endAt).getTime()<=new Date(this.opVehicleVO.startAt).getTime()&&(this.$message.error(this.$t("vehicleAdminister.end_time_text_tip")),this.opVehicleVO.endAt=null)},dialogClose:function(){this.upLoadData.motorcadeId=null,this.fileList=[]},uploadSubmit:function(){return!!this.submitForm("upLoad")&&(this.$refs.upload.uploadFiles.length?null===this.upLoadData.motorcadeId?(this.$message({type:"warning",message:this.$t("vehicleAdminister.select_company")}),!1):void this.$refs.upload.submit():(this.$message({type:"warning",message:this.$t("vehicleAdminister.select_file_upload")}),!1))},successUpload:function(e,t,i){e.code===this.$config.API_STATUS.OK?(this.$message({type:"success",message:this.$t("vehicleAdminister.upload_succeeded")}),this.dialogVisible=!1,this.$refs.upload.clearFiles()):(this.$refs.upload.clearFiles(),this.$message.error(e.message)),this.refreshTableFn()},beforeUpload:function(e){return this.upLoadData.Authorization=this.$store.getters.userData.tokenHead+this.$store.getters.userData.token,!0},diaClose:function(e){var t=this;this.treeData.currentNodeKey=this.activeMenu.motorcadeId,this.motorcadeOption=this.$data.motorcadeOption,e&&(this.isTree=!1,this.$nextTick(function(){t.isTree=!0})),this.dialogDisplay=!1},dialogCallback:function(e,t,i){this[e.handlerCallback.funcName].call(function(){},e,t,i)},addMenu:function(e){"click"===e.type&&(e={}),this.dialogData={isShow:!0,staticData:{parentId:e.motorcadeId,companyId:e.companyId},title:this.$t("vehicleAdminister.add_fleet"),data:{},defaultData:null,titleWidth:"120",submitAction:"/vehicle/motorcade/create",btnAlign:"center",formList:[{title:this.$t("vehicleAdminister.superior_fleet"),type:"treeSelect",key:"parentId",valueKey:"motorcadeId",offsetWidth:"320",label:e.name?e.name:"",treeOption:{defaultProps:{children:"opMotorcadeNodes",label:"name"},nodeKey:"motorcadeId",defaultExpandAll:!1,expandClickNode:!1,screenFn:{bindFn:function(e,t){return!e||-1!==t.name.indexOf(e)}}},treeDefinedData:this.treeSelectData,rules:[{required:!0,message:this.$t("vehicleAdminister.select_superior_menu"),trigger:"blur"}]},{title:this.$t("vehicleAdminister.fleet_name"),type:"input",offsetWidth:"320",key:"name",rules:[{required:!0,message:this.$t("vehicleAdminister.enter_fleet_name"),trigger:"blur"}]}],message:{message:this.$t("vehicleAdminister.fleet_added_successfully"),type:"success"},formButton:[{name:this.$t("vehicleAdminister.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},editMenu:function(e){var t=e.companyId,i=e.motorcadeId;delete e.list,0===e.parentId&&(e.parentId="0"),this.dialogData={isShow:!0,staticData:e,title:this.$t("vehicleAdminister.edit_menu"),data:{},defaultData:{companyId:t,motorcadeId:i},titleWidth:"120",submitAction:"/vehicle/motorcade/update",btnAlign:"center",formList:[{title:this.$t("vehicleAdminister.fleet_name"),type:"input",offsetWidth:"320",key:"name",rules:[{required:!0,message:this.$t("vehicleAdminister.enter_fleet_name"),trigger:"blur"}]}],message:{message:this.$t("vehicleAdminister.menu_edited_successfully"),type:"success"},formButton:[{name:this.$t("vehicleAdminister.submit"),type:"confirm",class:"primary",round:!1},{name:this.$t("confirm.cancel"),type:"cancel",class:"",round:!1}]},this.dialogDisplay=!0},addDriverFn:function(){this.$refs._driver_drawer.details()},addDeviceFn:function(){this.$refs._device_drawer.details()},handleCommand:function(e){this[e.funcName].call(function(){},e.data,e.node,e.funcName)},removeTree:function(e){var t=this;if(1===e.motorcadeId)return this.$message.error(this.$t("vehicleAdminister.company_cannot_deleted")),!1;this.$confirm(this.$t("vehicleAdminister.is_delete_fleet"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){t.$http.get("/vehicle/motorcade/delete/"+e.motorcadeId).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$message({type:"success",message:t.$t("vehicleAdminister.deletion_succeeded")}),t.isTree=!1,t.$nextTick(function(){t.isTree=!0}))})}).catch(function(){t.$message({type:"info",message:t.$t("vehicleAdminister.deletion_cancelled")})})},getTreeData:function(e){this.activeMenu={motorcadeId:e[0].motorcadeId,name:e[0].name},this.treeSelectData=e[0].opMotorcadeNodes,this.refreshTableFn()},nodeClick:function(e,t){e.children&&e.children.length||(this.activeMenu={motorcadeId:e.motorcadeId,name:e.name,count:0},this.parentId=e.parentId),this.motorcadeId=e.motorcadeId,this.refreshTableFn()},addVehicle:function(){var e=this;this.resetFn(),this.drawerWidth="720px",this.drawerTitle=this.$t("vehicleAdminister.add_vehicle"),this.drawerDisplay=!0,this.vehicleId="",this.opVehicleVO=JSON.parse(n()(g)),this.equipmentVO=JSON.parse(n()($)),this.opDrivingLicenseVO=JSON.parse(n()(A)),this.opTransportLicenseVO=JSON.parse(n()(N)),this.$nextTick(function(){e.$refs.ruleForm.resetFields(),e.$refs.ruleForm1.resetFields()})},quicklyAddVehicleFn:function(){this.$refs._quickly_add_vehicle.openFn()},batchExport:function(){this.drawerWidth="500px",this.drawerTitle=this.$t("vehicleAdminister.batch_import"),this.dialogVisible=!0},exportRecord:function(e){var t=this;this.$confirm(this.$t("operateCommon.confirm_export_record"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning",closeOnClickModal:!1,beforeClose:function(e,i,s){t.fieldMap={},t.tableOptions.columns.forEach(function(e){t.$refs.table.columnCheckList.forEach(function(i){e.key===i&&"operate"!==e.key&&(t.fieldMap[i]=e.title)})});var a=t.$refs.table._data.searchParams,r=a.driverName,l=a.status,o=a.selectKey,n=a.inputKey,c=a.onlineStatus;if("confirm"===e){var d={fieldMap:t.fieldMap,driverName:r,status:l,motorcadeId:t.activeMenu.motorcadeId,onlineStatus:c};o&&(d[o]=n),t.$http.download("/vehicle/export?isToken=true",d),s()}else s()}}).catch(function(){})},editRole:function(e){var t=this;this.resetFn(),this.drawerWidth="720px",this.drawerTitle=this.$t("vehicleAdminister.edit_vehicle"),this.drawerDisplay=!0,this.$nextTick(function(){t.$refs.ruleForm.resetFields(),t.$refs.ruleForm1.resetFields()}),this.vehicleId=e.vehicleId,this.oldDevice(this.vehicleId),this.$http.get("/vehicle/"+e.vehicleId).then(function(e){if(e.code===t.$config.API_STATUS.OK){var i=e.data,s=i.equipmentVO,r=i.opDrivingLicenseVO,l=i.opTransportLicenseVO,o=i.opVehicleVO;if(t.equipmentVO=s||{deviceId:"",installDate:null,simId:""},o&&(t.opVehicleVO=o,o.opDriverVos)){var n=o.opDriverVos.map(function(e){return{value:e.driverId,label:e.driverName}});t.editDriverArr=[].concat(a()(n),a()(t.driverArr))}r&&(t.opDrivingLicenseVO=r,r.photoFront&&(t.fileList[0]=[{name:t.$t("vehicleAdminister.front_view"),url:r.photoFront,type:"photoFront"}]),r.photoBack&&(t.fileList[1]=[{name:t.$t("vehicleAdminister.reverse_photo"),url:r.photoBack,type:"photoBack"}])),l&&(t.opTransportLicenseVO=l,l.photo&&(t.fileList[2]=[{name:t.$t("vehicleAdminister.transportation_license"),url:l.photo,type:"photo"}]))}})},reset:function(e){var t=this;this.drawerWidth="500px",this.drawerTitle=this.$t("vehicleAdminister.vehicle_password"),this.drawerDisplay=!0,this.$nextTick(function(){t.$refs.password.resetFields()}),this.password.licenseNum=e.licenseNum,this.password.motorcadeName=e.motorcadeName,this.password.vehicleId=e.vehicleId,this.password.pass="",this.password.checkPass=""},passwordFn:function(e){var t=this;this.submitForm(e)&&this.$http.post("/vehicle/password/"+this.password.vehicleId,{password:this.password.checkPass}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.drawerDisplay=!1,t.refreshTableFn(),t.$message({type:"success",message:e.message}))})},displayRole:function(e){var t=this;if(e.length<1)return this.$message.error(this.$t("vehicleAdminister.select_vehicle_disabled")),!1;this.$confirm(this.$t("vehicleAdminister.disable_vehicle"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.vehicleId}),t.$http.deleteApi("/vehicle/status",{status:2,ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.refreshTableFn(),t.$message({type:"success",message:t.$t("confirm.message")}))})}).catch(function(){t.$message({type:"info",message:t.$t("vehicleAdminister.cancelled")})})},hiddenRole:function(e){var t=this;if(e.length<1)return this.$message.error(this.$t("vehicleAdminister.select_vehicle_enabled")),!1;this.$confirm(this.$t("vehicleAdminister.is_enable_vehicle"),this.$t("operateCommon.prompt"),{confirmButtonText:this.$t("operateCommon.ok"),cancelButtonText:this.$t("operateCommon.cancel"),type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.vehicleId}),t.$http.deleteApi("/vehicle/status",{status:1,ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.refreshTableFn(),t.$message({type:"success",message:t.$t("confirm.message")}))})}).catch(function(){t.$message({type:"info",message:t.$t("vehicleAdminister.cancelled")})})},removeRole:function(e){var t=this;this.$confirm(this.$t("vehicleAdminister.is_delete_vehicle"),this.$t("operateCommon.prompt"),{distinguishCancelAndClose:!0,confirmButtonText:this.$t("view.no"),cancelButtonText:this.$t("view.yes"),type:"warning"}).then(function(){var i=e.map(function(e){return e.vehicleId});t.$http.deleteApi("/vehicle/delete",{ids:i.join(","),deleteFlag:0}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.refreshTableFn(),t.$message({type:"success",message:t.$t("confirm.message")}))})}).catch(function(i){if("cancel"===i){var s=e.map(function(e){return e.vehicleId});t.$http.deleteApi("/vehicle/delete",{ids:s.join(","),deleteFlag:1}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.refreshTableFn(),t.$message({type:"success",message:t.$t("confirm.message")}))})}})},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={motorcadeId:this.motorcadeId,status:e.status,driverName:e.driverName,onlineStatus:e.onlineStatus};e.selectKey&&(i[e.selectKey]=e.inputKey),this.$http.post("/vehicle/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.data=e.data.list,t.tableOptions.total=e.data.total,t.activeMenu.count=e.data.total||0),t.tableOptions.loading=!1})},getCodesFn:function(){var e=this;this.$http.get("/dict/list/codes",{dicCodes:"licenseColor, vehicleType"}).then(function(t){t.code===e.$config.API_STATUS.OK&&(t.data.licenseColor.forEach(function(t,i){e.licenseColor[i]={value:t.itemName,label:t.itemValue},e.tableOptions.columns[2].tags[i]={value:t.itemName,text:t.itemValue}}),e.vehicleType=t.data.vehicleType)})},newDriver:function(){var e=this;this.$http.get("/driver/vehicleAdminister/list/all").then(function(t){if(t.code===e.$config.API_STATUS.OK)if(e.driverArr=t.data.map(function(e){return{value:e.driverId,label:e.username}}),e.opVehicleVO.opDriverVos){var i=e.opVehicleVO.opDriverVos.map(function(e){return{value:e.driverId,label:e.driverName}});e.editDriverArr=[].concat(a()(i),a()(e.driverArr))}else e.editDriverArr=JSON.parse(n()(e.driverArr))})},emitRequestFn:function(){this.newDevice(),this.newDriver()},newDevice:function(){var e=this;this.$http.get("/device/list/vehicle/all").then(function(t){e.deviceArr=[],e.simArr=[],t.code===e.$config.API_STATUS.OK&&t.data.forEach(function(t,i){var s={value:t.deviceId,label:t.deviceNum};t.simId&&(s.simId=t.simId,s.simNum=t.simNum,e.simArr.push({value:t.simId,label:t.simNum})),e.$set(e.deviceArr,i,s)})})},oldDevice:function(e){var t=this;this.$http.get("/device/list/vehicle/all/"+e).then(function(e){t.deviceArr=[],t.simArr=[],e.code===t.$config.API_STATUS.OK&&e.data.forEach(function(e,i){var s={value:e.deviceId,label:e.deviceNum};e.simId&&(s.simId=e.simId,s.simNum=e.simNum,t.simArr.push({value:e.simId,label:e.simNum})),t.$set(t.deviceArr,i,s)})})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},simFn:function(e){var t=this;e?this.deviceArr.forEach(function(i){i.value===e&&t.$nextTick(function(){t.equipmentVO.simId=i.simId})}):this.equipmentVO.simId=null},showRefresh:function(e){var t=this;this.isTree=!1,this.$nextTick(function(){t.isTree=!0})},nodeDragEnd:function(e,t,i){var s=this;this.$http.post("/sys/menu/sort",{motorcadeId:e.data.motorcadeId,targetId:t.data.motorcadeId,moveType:i}).then(function(e){e.code,s.$config.API_STATUS,s.isTree=!1,s.$nextTick(function(){s.isTree=!0})}).catch(function(){s.isTree=!1,s.$nextTick(function(){s.isTree=!0})})},cascaderChange:function(e,t,i){this.companyId=i.companyId,this.$refs._drawer.dialogData.defaultData.companyId=this.companyId,-1===t&&(this.$refs._drawer.dialogData.defaultData.parentId=0)},submit:function(){var e=this;if(this.drawerTitle===this.$t("vehicleAdminister.add_vehicle")){if(this.submitForm("ruleForm")&&this.submitForm("ruleForm1")){var t=this.publicData();this.$http.post("/vehicle/create",t).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.refreshTableFn(),e.drawerDisplay=!1,e.$message({message:t.message,type:"success"}))})}}else if(this.drawerTitle===this.$t("vehicleAdminister.edit_vehicle")&&this.submitForm("ruleForm")&&this.submitForm("ruleForm1")){var i=this.publicData();this.$http.post("/vehicle/update/"+this.vehicleId,i).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.refreshTableFn(),e.drawerDisplay=!1,e.$message({message:t.message,type:"success"}))})}},refreshTableFn:function(){this.$refs.table.initRequestTableData()},publicData:function(){var e=this;return this.fileList.forEach(function(t){t.length>0&&(e.opDrivingLicenseVO[t[0].type]||void 0!==e.opDrivingLicenseVO[t[0].type]&&(e.opDrivingLicenseVO[t[0].type]=t[0].url),e.opTransportLicenseVO[t[0].type]||void 0!==e.opTransportLicenseVO[t[0].type]&&(e.opTransportLicenseVO[t[0].type]=t[0].url))}),{opVehicleVO:this.opVehicleVO,equipmentVO:this.equipmentVO,opDrivingLicenseVO:this.opDrivingLicenseVO,opTransportLicenseVO:this.opTransportLicenseVO}},submitForm:function(e){var t=!0;return this.$refs[e].validate(function(e){if(!e)return t=!1}),t},onSuccess:function(e,t,i){"photoFront"===e.data.type?this.$set(this.fileList,0,[{name:this.$t("vehicleAdminister.front_view"),url:e.data.url,type:e.data.type}]):"photoBack"===e.data.type?this.$set(this.fileList,1,[{name:this.$t("vehicleAdminister.reverse_photo"),url:e.data.url,type:e.data.type}]):"photo"===e.data.type&&this.$set(this.fileList,2,[{name:this.$t("vehicleAdminister.transportation_license"),url:e.data.url,type:e.data.type}])},handleRemove:function(e,t){return this.$confirm(this.$t("vehicleAdminister.determine_removal")+" "+e.name+" ? this.$t('vehicleAdminister.is_permanently_delete')")},onremove:function(e,t){this.$http.post("/file/delete",{url:e.url}).then(function(e){});var i={opDrivingLicenseVO:{},opTransportLicenseVO:{}};void 0!==this.opDrivingLicenseVO[e.type]&&(i.opDrivingLicenseVO[e.type]="",i.opDrivingLicenseVO.id=this.opDrivingLicenseVO.id),void 0!==this.opTransportLicenseVO[e.type]&&(i.opTransportLicenseVO[e.type]="",i.opTransportLicenseVO.id=this.opTransportLicenseVO.id),this.$http.post("/vehicle/update/"+this.vehicleId,i).then(function(e){})},handleExceed:function(e,t){this.$message.warning(this.$t("vehicleAdminister.limit_select_photot"))},itemShow:function(e){this[e]=!this[e]},vehicleTypeNodeClick:function(e,t){e.sysDictionaryItems&&e.sysDictionaryItems.length||(this.$set(this.opVehicleVO,"vehicleType",e.itemName),this.$set(this.opVehicleVO,"vehicleTypeName",e.itemValue),this.$refs._vehicle_type_select.blur())},motorcadeNodeClick:function(e,t,i){this.$set(this[i],"motorcadeId",e.motorcadeId),this.$set(this[i],"motorcadeName",e.name),this.$set(this.motorcadeOption,"motorcadeId",e.motorcadeId),this.$set(this.motorcadeOption,"name",e.name),this.$refs._motorcade_tree_select.blur()},motorcadeDrawerCloseFn:function(){this.motorcadeOption.filter="",this.motorcadeOption.name=null,this.motorcadeOption.motorcadeId=null,this.upLoadData.motorcadeId=null},modifyMotorcadeFn:function(e){this.$refs._modify_the_fleet.openFn(e)}}},x=(i("/saT"),i("ZrdR")),w=Object(x.a)(O,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrap"},[e.isPermissionShow("vehicleList")?i("div",{staticClass:"page-body"},[i("div",{staticClass:"con-left"},[i("div",{staticClass:"input-query"},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.search_fleet_name"),"prefix-icon":"el-icon-search"},model:{value:e.filterText,callback:function(t){e.filterText="string"==typeof t?t.trim():t},expression:"filterText"}}),e._v(" "),e.isPermissionShow("vehicleMotorcadeCreate")?i("el-button",{staticStyle:{width:"80px","margin-left":"4px"},attrs:{size:e.elNorms.size,circle:e.elNorms.circle,round:e.elNorms.round,type:"primary"},on:{click:e.addMenu}},[e._v(e._s(e.$t("vehicleAdminister.new_fleet")))]):e._e()],1),e._v(" "),i("div",{staticClass:"body-tree init-tree"},[e.isTree?i("tree-view",{ref:"tree",attrs:{"tree-data":e.treeData},on:{treeDataFn:e.getTreeData,"node-click":e.nodeClick,"node-drag-end":e.nodeDragEnd},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticClass:"left-title text-ellipsis",style:t.data.data.motorcadeId===e.activeMenu.motorcadeId?"color: var(--main-primary);":""},[null===t.data.data.motorcadeId?i("i",{staticClass:"iconfont Jamin_location_icon_dn"}):1===t.data.data.isCompany?i("i",{staticClass:"iconfont Jamin_location_icon_gs"}):i("i",{staticClass:"iconfont Jamin_location_icon_cd"}),e._v("\n              "+e._s(t.data.data.name)+"\n            ")]),e._v(" "),i("span",{staticClass:"right-edit"},[i("span",[i("el-dropdown",{on:{command:e.handleCommand}},[i("span",{staticClass:"el-dropdown-link"},[null!==t.data.data.motorcadeId&&e.isFleetManagementPermission?i("i",{staticClass:"el-icon-more"}):e._e()]),e._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.isPermissionShow("vehicleMotorcadeCreate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"addMenu"}}},[e._v(e._s(e.$t("vehicleAdminister.add_sub_fleet")))]):e._e(),e._v(" "),1!==t.data.data.isCompany&&e.isPermissionShow("vehicleMotorcadeUpdate")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"editMenu"}}},[e._v(e._s(e.$t("vehicleAdminister.edit_fleet")))]):e._e(),e._v(" "),1!==t.data.data.isCompany&&e.isPermissionShow("vehicleMotorcadeDelete")?i("el-dropdown-item",{attrs:{command:{data:t.data.data,node:t.data.node,funcName:"removeTree"}}},[e._v(e._s(e.$t("vehicleAdminister.delete_fleet")))]):e._e()],1)],1)],1)])]}}])}):e._e()],1)]),e._v(" "),i("div",{staticClass:"con-right"},[i("div",{staticClass:"right-header"},[e._v("\n        "+e._s(e.activeMenu.name)+"（"+e._s(e.activeMenu.count)+e._s(e.$t("vehicleAdminister.vehicles"))+"）\n      ")]),e._v(" "),i("transition",{attrs:{name:"opacity"}},[i("div",{staticClass:"opacity_table"},[i("table-view",{ref:"table",attrs:{center:"","id-key":"vehicleId","is-search":!0,"check-memory":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-shadow":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:e.$t("view.index"),type:"index",align:"center"},slot:"number"})],1)],1)])],1)]):e._e(),e._v(" "),e.isPermissionShow("vehicleList")||e.$store.state.app.permsDataLoading?e._e():i("notPerm"),e._v(" "),e.dialogDisplay?i("drawer",{ref:"_drawer",attrs:{"drawer-data":e.dialogData},on:{diaClose:e.diaClose,handlerCallback:e.dialogCallback}}):e._e(),e._v(" "),e.drawerDisplay?i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawerDisplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.drawerDisplay=t},close:e.motorcadeDrawerCloseFn}},[e.drawerTitle===e.$t("vehicleAdminister.add_vehicle")||e.drawerTitle===e.$t("vehicleAdminister.edit_vehicle")?i("div",{staticStyle:{margin:"10px 0 100px 0"}},[i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle",on:{click:function(t){e.itemShow("item")}}},[i("div",[e._v(e._s(e.$t("vehicleAdminister.basic_information")))]),e._v(" "),e.item?i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.show")))]):i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.expand")))])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item,expression:"item"}]},[i("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{size:e.elNorms.fromSize,inline:!0,model:e.opVehicleVO,rules:e.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_number"),prop:"licenseNum"}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.licenseNum,callback:function(t){e.$set(e.opVehicleVO,"licenseNum",t)},expression:"opVehicleVO.licenseNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_name")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.vehicleName,callback:function(t){e.$set(e.opVehicleVO,"vehicleName",t)},expression:"opVehicleVO.vehicleName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_color"),prop:"licenseColor"}},[i("el-select",{style:e.formItemStyle,attrs:{filterable:"",size:e.elNorms.size},model:{value:e.opVehicleVO.licenseColor,callback:function(t){e.$set(e.opVehicleVO,"licenseColor",t)},expression:"opVehicleVO.licenseColor"}},e._l(e.licenseColor,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_color")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.vehicleColor,callback:function(t){e.$set(e.opVehicleVO,"vehicleColor",t)},expression:"opVehicleVO.vehicleColor"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_type"),prop:"vehicleType"}},[i("el-select",{ref:"_vehicle_type_select",staticStyle:{width:"176px"},attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.vehicleType,callback:function(t){e.$set(e.opVehicleVO,"vehicleType",t)},expression:"opVehicleVO.vehicleType"}},[i("el-option",{staticClass:"tree-select",attrs:{value:e.opVehicleVO.vehicleType,label:e.opVehicleVO.vehicleTypeName}},[i("div",{staticClass:"input-query",on:{click:function(e){e.stopPropagation()}}},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.search_name"),"prefix-icon":"el-icon-search"},model:{value:e.vehicleTypeOption.filter,callback:function(t){e.$set(e.vehicleTypeOption,"filter","string"==typeof t?t.trim():t)},expression:"vehicleTypeOption.filter"}})],1),e._v(" "),i("tree-view",{ref:"_vehicle_type_tree",attrs:{"tree-data":e.vehicleTypeOption.treeOption,"defined-data":e.vehicleType},on:{"node-click":e.vehicleTypeNodeClick},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_brand")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.brand,callback:function(t){e.$set(e.opVehicleVO,"brand",t)},expression:"opVehicleVO.brand"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.fleet"),prop:"motorcadeId"}},[i("el-select",{ref:"_motorcade_tree_select",staticStyle:{width:"176px"},attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.motorcadeId,callback:function(t){e.$set(e.opVehicleVO,"motorcadeId",t)},expression:"opVehicleVO.motorcadeId"}},[i("el-option",{staticClass:"tree-select",attrs:{value:e.opVehicleVO.motorcadeId,label:e.opVehicleVO.motorcadeName}},[i("div",{staticClass:"input-query",on:{click:function(e){e.stopPropagation()}}},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.vehicle_purpose"),"prefix-icon":"el-icon-search"},model:{value:e.motorcadeOption.filter,callback:function(t){e.$set(e.motorcadeOption,"filter","string"==typeof t?t.trim():t)},expression:"motorcadeOption.filter"}})],1),e._v(" "),i("tree-view",{ref:"_motorcade_type_tree",attrs:{"tree-data":e.motorcadeOption.treeOption,"defined-data":e.treeSelectData},on:{"node-click":function(t){e.motorcadeNodeClick(arguments[0],arguments[1],"opVehicleVO")}},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_purpose")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.use,callback:function(t){e.$set(e.opVehicleVO,"use",t)},expression:"opVehicleVO.use"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.usage_status"),prop:"status"}},[i("el-select",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.status,callback:function(t){e.$set(e.opVehicleVO,"status",t)},expression:"opVehicleVO.status"}},[i("el-option",{attrs:{label:e.$t("vehicleAdminister.normal"),value:1}}),e._v(" "),i("el-option",{attrs:{label:e.$t("vehicleAdminister.disable_text_1"),value:2}}),e._v(" "),i("el-option",{attrs:{label:e.$t("vehicleAdminister.repair"),value:3}}),e._v(" "),i("el-option",{attrs:{label:e.$t("vehicleAdminister.arrears"),value:4}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.authorized_number_people")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.approvePerson,callback:function(t){e.$set(e.opVehicleVO,"approvePerson",t)},expression:"opVehicleVO.approvePerson"}})],1),e._v(" "),i("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("vehicleAdminister.bind_driver")}},[i("el-select",{style:e.formItemStyle,attrs:{multiple:"",filterable:"",size:e.elNorms.size},model:{value:e.opVehicleVO.driverIds,callback:function(t){e.$set(e.opVehicleVO,"driverIds",t)},expression:"opVehicleVO.driverIds"}},e._l(e.editDriverArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"new",on:{click:e.addDriverFn}},[e._v("\n                  新增\n                ")])],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.approved_load")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opVehicleVO.approveWeight,callback:function(t){e.$set(e.opVehicleVO,"approveWeight",t)},expression:"opVehicleVO.approveWeight"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.service_start_date"),prop:"startAt"}},[i("el-date-picker",{style:e.formItemStyle,attrs:{type:"date",size:e.elNorms.size,"value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},model:{value:e.opVehicleVO.startAt,callback:function(t){e.$set(e.opVehicleVO,"startAt",t)},expression:"opVehicleVO.startAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.purchase_date")}},[i("el-date-picker",{style:e.formItemStyle,attrs:{type:"date",size:e.elNorms.size,"value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},on:{change:e.endTime},model:{value:e.opVehicleVO.buyAt,callback:function(t){e.$set(e.opVehicleVO,"buyAt",t)},expression:"opVehicleVO.buyAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.service_end_date")}},[i("el-date-picker",{style:e.formItemStyle,attrs:{type:"date",size:e.elNorms.size,"value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},on:{change:e.endTime},model:{value:e.opVehicleVO.endAt,callback:function(t){e.$set(e.opVehicleVO,"endAt",t)},expression:"opVehicleVO.endAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.mandatory_scrap_date")}},[i("el-date-picker",{style:e.formItemStyle,attrs:{type:"date",size:e.elNorms.size,"value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},model:{value:e.opVehicleVO.scrapAt,callback:function(t){e.$set(e.opVehicleVO,"scrapAt",t)},expression:"opVehicleVO.scrapAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.vehicle_icon")}},[i("el-radio-group",{staticStyle:{width:"540px"},model:{value:e.opVehicleVO.icon,callback:function(t){e.$set(e.opVehicleVO,"icon",t)},expression:"opVehicleVO.icon"}},e._l(e.iconList,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[i("img",{staticStyle:{height:"28px","vertical-align":"middle"},attrs:{src:e.iconUrl,alt:""}})])}))],1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle",on:{click:function(t){e.itemShow("item1")}}},[i("div",[e._v(e._s(e.$t("vehicleAdminister.device_information")))]),e._v(" "),e.item1?i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.show")))]):i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.expand")))])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item1,expression:"item1"}]},[i("el-form",{ref:"ruleForm1",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.equipmentVO,size:e.elNorms.formSize,rules:e.rules1,"label-width":"130px"}},[i("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("vehicleAdminister.equipment_number"),prop:"deviceId"}},[i("el-select",{style:e.formItemStyle,attrs:{clearable:"",filterable:"",size:e.elNorms.size},on:{change:e.simFn},model:{value:e.equipmentVO.deviceId,callback:function(t){e.$set(e.equipmentVO,"deviceId",t)},expression:"equipmentVO.deviceId"}},e._l(e.deviceArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"new",on:{click:e.addDeviceFn}},[e._v("\n                  "+e._s(e.$t("vehicleAdminister.add"))+"\n                ")])],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.installation_date"),prop:"installDate"}},[i("el-date-picker",{style:e.formItemStyle,attrs:{type:"date",size:e.elNorms.size,"value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},model:{value:e.equipmentVO.installDate,callback:function(t){e.$set(e.equipmentVO,"installDate",t)},expression:"equipmentVO.installDate"}})],1),e._v(" "),e.drawerTitle===e.$t("vehicleAdminister.edit_vehicle")?i("el-form-item",{staticClass:"formItem",attrs:{label:e.$t("vehicleAdminister.sim_card_number")}},[i("el-select",{style:e.formItemStyle,attrs:{size:e.elNorms.size,disabled:"",placeholder:e.$t("vehicleAdminister.none")},model:{value:e.equipmentVO.simId,callback:function(t){e.$set(e.equipmentVO,"simId",t)},expression:"equipmentVO.simId"}},e._l(e.simArr,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),e._e()],1):e._e()],1)],1)])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle",on:{click:function(t){e.itemShow("item2")}}},[i("div",[e._v(e._s(e.$t("vehicleAdminister.license_information")))]),e._v(" "),e.item2?i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.show")))]):i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.expand")))])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item2,expression:"item2"}]},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.opDrivingLicenseVO,size:e.elNorms.formSize,"label-width":"130px"}},[i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.driving_license_number")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opDrivingLicenseVO.drivingNum,callback:function(t){e.$set(e.opDrivingLicenseVO,"drivingNum",t)},expression:"opDrivingLicenseVO.drivingNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.brand_model")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opDrivingLicenseVO.model,callback:function(t){e.$set(e.opDrivingLicenseVO,"model",t)},expression:"opDrivingLicenseVO.model"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.engine_number")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opDrivingLicenseVO.engineNum,callback:function(t){e.$set(e.opDrivingLicenseVO,"engineNum",t)},expression:"opDrivingLicenseVO.engineNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.frame_number")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opDrivingLicenseVO.vin,callback:function(t){e.$set(e.opDrivingLicenseVO,"vin",t)},expression:"opDrivingLicenseVO.vin"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.expiration_date")}},[i("el-date-picker",{style:e.formItemStyle,attrs:{size:e.elNorms.size,type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},model:{value:e.opDrivingLicenseVO.timeoutAt,callback:function(t){e.$set(e.opDrivingLicenseVO,"timeoutAt",t)},expression:"opDrivingLicenseVO.timeoutAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.days_advance_reminder")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opDrivingLicenseVO.advanceNum,callback:function(t){e.$set(e.opDrivingLicenseVO,"advanceNum",t)},expression:"opDrivingLicenseVO.advanceNum"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:e.$t("vehicleAdminister.photo_driving_license_front")}},[i("el-upload",{ref:"photoFront",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/photoFront","on-success":e.onSuccess,"on-remove":e.onremove,"before-remove":e.handleRemove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[0],"list-type":"picture"}},[i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle,type:"primary"}},[e._v(e._s(e.$t("vehicleAdminister.upload_front")))]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$t("vehicleAdminister.only_jpg_png_files")))])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:e.$t("vehicleAdminister.photo_driving_license_reverse")}},[i("el-upload",{ref:"photoBack",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/photoBack","on-success":e.onSuccess,"before-remove":e.handleRemove,accept:".png,.jpg","on-remove":e.onremove,"on-exceed":e.handleExceed,"file-list":e.fileList[1],"list-type":"picture"}},[i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle,type:"primary"}},[e._v(e._s(e.$t("vehicleAdminister.upload_reverse")))]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$t("vehicleAdminister.only_jpg_png_files")))])],1)],1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle",on:{click:function(t){e.itemShow("item3")}}},[i("div",[e._v(e._s(e.$t("vehicleAdminister.transportation_certificate_information")))]),e._v(" "),e.item3?i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.show")))]):i("el-button",{attrs:{type:"text",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle}},[e._v(e._s(e.$t("vehicleAdminister.expand")))])],1),e._v(" "),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.item3,expression:"item3"}]},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.opTransportLicenseVO,"label-width":"130px"}},[i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.transport_certificate_no")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opTransportLicenseVO.transportNum,callback:function(t){e.$set(e.opTransportLicenseVO,"transportNum",t)},expression:"opTransportLicenseVO.transportNum"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.business_scope")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opTransportLicenseVO.busScope,callback:function(t){e.$set(e.opTransportLicenseVO,"busScope",t)},expression:"opTransportLicenseVO.busScope"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.expiration_date")}},[i("el-date-picker",{style:e.formItemStyle,attrs:{size:e.elNorms.size,type:"date","value-format":"yyyy-MM-dd",placeholder:e.$t("vehicleAdminister.select_date")},model:{value:e.opTransportLicenseVO.timeoutAt,callback:function(t){e.$set(e.opTransportLicenseVO,"timeoutAt",t)},expression:"opTransportLicenseVO.timeoutAt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.days_advance_reminder")}},[i("el-input",{style:e.formItemStyle,attrs:{size:e.elNorms.size},model:{value:e.opTransportLicenseVO.advanceNum,callback:function(t){e.$set(e.opTransportLicenseVO,"advanceNum",t)},expression:"opTransportLicenseVO.advanceNum"}})],1),e._v(" "),i("el-form-item",{staticStyle:{width:"700px"},attrs:{label:e.$t("vehicleAdminister.photo_transportation_certificate")}},[i("el-upload",{ref:"photo",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/photo","on-success":e.onSuccess,"before-remove":e.handleRemove,"on-remove":e.onremove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[2],"list-type":"picture"}},[i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle,type:"primary"}},[e._v(e._s(e.$t("vehicleAdminister.upload_picture")))]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$t("vehicleAdminister.only_jpg_png_files")))])],1)],1)],1)],1)])],1),e._v(" "),i("div",{staticClass:"footBtn"},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.submit}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerDisplay=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)]):e._e(),e._v(" "),e.drawerTitle===e.$t("vehicleAdminister.vehicle_password")?i("div",{staticStyle:{"margin-bottom":"100px"}},[i("el-form",{ref:"password",staticClass:"demo-ruleForm",staticStyle:{"margin-top":"20px"},attrs:{model:e.password,size:e.elNorms.formSize,"status-icon":"",rules:e.passwordRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.license_plate_number")}},[e._v("\n          "+e._s(e.password.licenseNum)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.fleet_company")}},[e._v("\n          "+e._s(e.password.motorcadeName)+"\n        ")]),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.password"),prop:"pass"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{size:e.elNorms.size,type:"password",clearable:""},model:{value:e.password.pass,callback:function(t){e.$set(e.password,"pass",t)},expression:"password.pass"}})],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.confirm_password"),prop:"checkPass"}},[i("el-input",{staticStyle:{width:"320px"},attrs:{size:e.elNorms.size,type:"password",clearable:""},model:{value:e.password.checkPass,callback:function(t){e.$set(e.password,"checkPass",t)},expression:"password.checkPass"}})],1)],1),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"500px"}},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.passwordFn("password")}}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.drawerDisplay=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)],1):e._e()]):e._e(),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.dialogVisible,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.motorcadeDrawerCloseFn}},[e.drawerTitle===e.$t("vehicleAdminister.batch_import")?i("div",[i("el-form",{ref:"upLoad",staticStyle:{"margin-top":"20px"},attrs:{model:e.upLoadData,size:e.elNorms.formSize,rules:e.upLoadRole,"label-width":"120px"}},[i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.fleet"),prop:"motorcadeId"}},[i("el-select",{ref:"_motorcade_tree_select",staticStyle:{width:"336px"},attrs:{size:e.elNorms.size},model:{value:e.upLoadData.motorcadeId,callback:function(t){e.$set(e.upLoadData,"motorcadeId",t)},expression:"upLoadData.motorcadeId"}},[i("el-option",{staticClass:"tree-select",attrs:{value:e.motorcadeOption.motorcadeId,label:e.motorcadeOption.name}},[i("div",{staticClass:"input-query",on:{click:function(e){e.stopPropagation()}}},[i("el-input",{attrs:{size:e.elNorms.size,placeholder:e.$t("vehicleAdminister.search_name"),"prefix-icon":"el-icon-search"},model:{value:e.motorcadeOption.filter,callback:function(t){e.$set(e.motorcadeOption,"filter","string"==typeof t?t.trim():t)},expression:"motorcadeOption.filter"}})],1),e._v(" "),i("tree-view",{ref:"_motorcade_type_tree",attrs:{"tree-data":e.motorcadeOption.treeOption,"defined-data":e.treeSelectData},on:{"node-click":function(t){e.motorcadeNodeClick(arguments[0],arguments[1],"upLoadData")}},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{"font-weight":"400"}},[e._v(e._s(t.data.node.label))])]}}])})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:e.$t("vehicleAdminister.upload_file")}},[i("div",{staticClass:"uploadDialogClass"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.$config.API_CONFIG.API_ROOT+"/vehicle/import/"+e.upLoadData.motorcadeId,name:"file",headers:e.upData,"on-success":e.successUpload,"before-upload":e.beforeUpload,"auto-upload":!1,accept:".excel,.xlsx,.xls",multiple:"","file-list":e.fileLists,limit:1}},[i("el-button",{attrs:{size:e.elNorms.size,type:"primary"}},[e._v(e._s(e.$t("vehicleAdminister.click_select_file")))]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(e._s(e.$t("vehicleAdminister.only_excel_file")))])],1),e._v(" "),i("a",{staticClass:"upload-click-span",attrs:{href:"/static/excel/vehicle-template-CN.xlsx"},on:{click:function(e){e.stopPropagation()}}},[e._v(e._s(e.$t("vehicleAdminister.download_template_file")))])],1)])],1),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"500px"}},[i("el-button",{attrs:{type:"primary",size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:e.uploadSubmit}},[e._v(e._s(e.$t("operateCommon.ok")))]),e._v(" "),i("el-button",{attrs:{size:e.elNorms.size,round:e.elNorms.round,circle:e.elNorms.circle},on:{click:function(t){e.dialogVisible=!1}}},[e._v(e._s(e.$t("operateCommon.cancel")))])],1)],1):e._e()]),e._v(" "),i("driver-drawer",{ref:"_driver_drawer"}),e._v(" "),i("device-drawer",{ref:"_device_drawer"}),e._v(" "),i("QuicklyAddVehicle",{ref:"_quickly_add_vehicle"}),e._v(" "),i("ModifyTheFleet",{ref:"_modify_the_fleet"})],1)},[],!1,null,"c24f2184",null);w.options.__file="vehicleAdminister.vue";t.default=w.exports},qOkx:function(e,t,i){e.exports=i.p+"static/img/05_jzxc_xs.dca079b.png"},r0m4:function(e,t,i){"use strict";var s=i("Eejq");i.n(s).a},yEz2:function(e,t,i){e.exports=i.p+"static/img/02_czc_xs.f40cc07.png"},yrqw:function(e,t,i){e.exports=i.p+"static/img/14_hwljc_xs.9be384a.png"}}]);