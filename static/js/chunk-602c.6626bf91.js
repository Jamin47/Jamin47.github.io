(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-602c"],{"+8LK":function(e,t,i){"use strict";i.r(t);var a=i("omC7"),l=i.n(a),o=i("bS4n"),r=i.n(o),s=i("AlM9"),n=i("8t5x"),d={name:"DriverAdminister",components:{TableView:s.a},data:function(){return{fieldMap:{},resetData:{value:"motorcadeId",label:"name",children:"opMotorcadeNodes"},resetMenus:[],upLoadData:{Authorization:null,companyId:null},upLoadRole:{companyId:[{required:!0,message:"请选择车队/公司",trigger:"change"}]},fileList:[],fileLists:[],upData:{},api:"",driverId:"",drawerWidth:"720px",sex:[{label:"男",value:1},{label:"女",value:0}],vehicleIds:[],allowModel:[],form:{certificateNum:"",username:"",sex:1,phone:"",hometown:"",idCard:"",bornAt:"",issuer:"",living:"",vehicleIds:[],idFront:null,idBack:null,dialogVisible:!1,certPhoto:null},rules:{certificateNum:[{required:!0,message:"请输入资格证号",trigger:"blur"}],username:[{required:!0,message:"请输入姓名",trigger:"blur"}],sex:[{required:!0,message:"请选择性别",trigger:"change"}],phone:[{required:!0,message:"请输入手机号",trigger:"blur"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"}]},form1:{driverLicenseNum:"",drivingIssuer:"",allowModel:"",drivingIssueAt:"",drivingValidAt:"",drivingInvalidAt:"",drivingAdvanceNum:"",drivingFront:null,drivingBack:null},rules1:{driverLicenseNum:[{required:!0,message:"请输入驾驶证号",trigger:"blur"}],allowModel:[{required:!0,message:"请选择准驾车型",trigger:"change"}],drivingValidAt:[{required:!0,message:"请输入有效开始日期",trigger:"blur"}],drivingAdvanceNum:[{required:!0,message:"请输入提前提醒天数",trigger:"blur"}]},form2:{onlineLicenseNum:"",onlineIssuer:"",onlineValidAt:"",onlineInvalidAt:"",onlineAdvanceNum:"",onlineFront:null,onlineBack:null},item:!0,item1:!0,item2:!0,drawerDisplay:!1,direction:"rtl",drawerTitle:"",alias:{pageSize:"pageSize",pageNum:"pageNum"},tableOptions:{data:[],total:0,columns:[{type:"slot",name:"number",title:"序号"},{title:"姓名",key:"username",sort:"custom",type:"text"},{title:"性别",key:"sex",minWidth:"130",type:"tagText",tags:[{value:1,text:"男"},{value:0,text:"女",option:{type:"danger"}}]},{title:"手机号码",key:"phone",minWidth:"130",type:"text"},{title:"驾照类型",key:"allowModel",type:"tagText",minWidth:"130",tags:[]},{title:"驾驶证到期",key:"drivingInvalidAt",minWidth:"130",type:"text"},{title:"提前提醒天数",key:"drivingAdvanceNum",minWidth:"130",type:"text"},{title:"绑定车辆",key:"licenseNum",minWidth:"180",type:"text"},{title:"车队/公司",key:"motorcadeName",minWidth:"130",type:"text"},{title:"创建时间",key:"createTime",type:"text",minWidth:"180"},{title:"操作",type:"operate",key:"operate",fixed:"right",width:"160",buttons:[{icon:"iconfont Jamin_vehicle_ico_xq",type:"text",size:"mini",funcName:"detail"},{icon:"iconfont Jamin_vehicle_icon_bj",type:"text",size:"mini",funcName:"edit"}]}],buttonControls:[{text:"添加司机",type:"primary",size:"small",round:!1,icon:"el-icon-plus",funcName:"details"},{text:"批量导入",size:"mini",round:!1,icon:"el-icon-folder-opened",funcName:"batchExport"},{text:"导出记录",type:"null",size:"small",round:!1,icon:"el-icon-download",funcName:"exportRecord"}],searchControls:[{type:"selectInput",inputKey:"inputKey",selectKey:"selectKey",key:["inputKey","selectKey"],selectPlaceholder:"请选择类型",width:"340px",selectWidth:"130px",clearable:!0,options:[{name:"驾驶员",value:"username"},{name:"身份证号",value:"idCard"},{name:"车牌号码",value:"licenseNum"}]},{type:"select",key:"motorcadeId",placeholder:"所属车队/公司",width:"200px",size:"small",filterable:!0,clearable:!0,options:[]},{type:"select",key:"allowModel",placeholder:"驾照类型",width:"200px",size:"small",clearable:!0,options:[]}],searchMode:"immediate",footerButtons:[{text:"删除",type:"danger",size:"small",icon:"el-icon-delete",round:!1,funcName:"delete"}],paginationLayout:"total, sizes, prev, pager, next, jumper",loading:!1}}},computed:r()({},Object(n.b)(["elNorms","userData"])),created:function(){},mounted:function(){var e=this;this.api=this.$config.API_CONFIG.API_ROOT,this.upData={Authorization:this.userData.tokenHead+this.userData.token},!0===this.$route.params.open&&this.details(),this.$nextTick(function(){e.$refs.table.searchParams.selectKey="username"})},methods:{filterData:function(e,t){return t||0===t?e.filter(function(e){return e.value===t})[0].label:""},resetFn:function(){this.form=this.$options.data().form,this.form1=this.$options.data().form1,this.form2=this.$options.data().form2,this.fileList=this.$options.data().fileList},endTime:function(e){this.form1.drivingValidAt?new Date(e).getTime()<=new Date(this.form1.drivingValidAt).getTime()&&(this.$message.error("结束时间不得小于开始时间"),this.form1.drivingInvalidAt=null):(this.$message.error("请先选择开始时间"),this.form1.drivingInvalidAt=null)},onlineEndTime:function(e){this.form2.onlineValidAt?new Date(e).getTime()<=new Date(this.form2.onlineValidAt).getTime()&&(this.$message.error("结束时间不得小于开始时间"),this.form2.onlineInvalidAt=null):(this.$message.error("请先选择开始时间"),this.form2.onlineInvalidAt=null)},successUpload:function(e,t,i){e.code===this.$config.API_STATUS.OK?(this.$message({type:"success",message:"上传成功！"}),this.dialogVisible=!1,this.$refs.upload.clearFiles()):(this.$refs.upload.clearFiles(),this.$message.error(e.message)),this.$refs.table.emitRequestTableData()},beforeUpload:function(e){return this.upLoadData.Authorization=this.$store.getters.userData.tokenHead+this.$store.getters.userData.token,!0},getTableData:function(e){var t=this;this.tableOptions.loading=!0;var i={motorcadeId:e.motorcadeId,allowModel:e.allowModel,username:""};e.selectKey&&(i[e.selectKey]=e.inputKey),this.$http.post("/driver/list?pageNum="+e.pageNum+"&pageSize="+e.pageSize,i).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.tableOptions.loading=!1,e.data.list&&(t.tableOptions.data=e.data.list),e.data.total&&(t.tableOptions.total=e.data.total))}),this.$http.get("/vehicle/listall").then(function(e){e.code===t.$config.API_STATUS.OK&&e.data.list.forEach(function(e,i){t.vehicleIds[i]={value:e.vehicleId,label:e.licenseNum}})}),this.$http.get("/vehicle/motorcade/list").then(function(e){e.code===t.$config.API_STATUS.OK&&e.data.forEach(function(e,i){t.tableOptions.searchControls[1].options[i]={value:e.motorcadeId,name:e.name}})}),this.$http.get("/dict/list/codes",{dicCodes:"allowModel"}).then(function(e){e.code===t.$config.API_STATUS.OK&&(e.data.allowModel.forEach(function(e,i){t.tableOptions.searchControls[2].options[i]={value:e.itemName,name:e.itemValue},t.tableOptions.columns[4].tags[i]={value:e.itemName,text:e.itemValue}}),t.allowModel=JSON.parse(l()(t.tableOptions.searchControls[2].options).replace(/name/g,"label")))})},tableResponseFn:function(e,t,i){this[t.funcName].call(function(){},e,t,i)},details:function(e){var t=this;this.resetFn(),this.drawerWidth="720px",this.drawerTitle="添加司机",this.drawerDisplay=!0,this.form=this.$options.data().form,this.form1=this.$options.data().form1,this.form2=this.$options.data().form2,this.$nextTick(function(){t.$refs.ruleForm.resetFields(),t.$refs.ruleForm1.resetFields()})},detail:function(e){this.edit(e),this.drawerTitle="司机详情"},edit:function(e){var t=this;this.resetFn(),this.driverId=e.driverId,this.drawerWidth="720px",this.drawerTitle="编辑司机",this.drawerDisplay=!0,this.$nextTick(function(){t.$refs.ruleForm.resetFields(),t.$refs.ruleForm1.resetFields()}),this.$http.get("/driver/"+e.driverId).then(function(e){if(e.code===t.$config.API_STATUS.OK)for(var i in e.data){for(var a in t.form)i===a&&("idFront"===i&&e.data[i]&&(t.fileList[0]=[{name:"身份证(正面)",url:e.data[i],type:"idFront"}]),"idBack"===i&&e.data[i]&&(t.fileList[1]=[{name:"身份证(反面)",url:e.data[i],type:"idBack"}]),"certPhoto"===i&&e.data[i]&&(t.fileList[2]=[{name:"证件照",url:e.data[i],type:"certPhoto"}]),t.form[a]=e.data[i]);for(var l in t.form1)i===l&&("drivingFront"===i&&e.data[i]&&(t.fileList[3]=[{name:"驾驶证(正面)",url:e.data[i],type:"drivingFront"}]),"drivingBack"===i&&e.data[i]&&(t.fileList[4]=[{name:"驾驶证(反面)",url:e.data[i],type:"drivingBack"}]),t.form1[l]=e.data[i]);for(var o in t.form2)i===o&&("onlineFront"===i&&e.data[i]&&(t.fileList[5]=[{name:"资格证(正面)",url:e.data[i],type:"drivingFront"}]),"onlineBack"===i&&e.data[i]&&(t.fileList[6]=[{name:"资格证(反面)",url:e.data[i],type:"drivingBack"}]),t.form2[o]=e.data[i])}})},delete:function(e){var t=this;this.$confirm("是否删除司机?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var i=[];e.forEach(function(e,t){i[t]=e.driverId}),t.$http.deleteApi("/driver/delete",{ids:i.join(",")}).then(function(e){e.code===t.$config.API_STATUS.OK&&(t.$refs.table.emitRequestTableData(),t.$message({type:"success",message:"操作成功！"}))})}).catch(function(){t.$message({type:"info",message:"已取消"})})},itemShow:function(e){"item"===e?this.item=!this.item:"item1"===e?this.item1=!this.item1:this.item2=!this.item2},submitForm:function(e){var t=!0;return this.$refs[e].validate(function(e){if(!e)return t=!1}),t},submit:function(){var e=this;if("添加司机"===this.drawerTitle){if(this.submitForm("ruleForm")&&this.submitForm("ruleForm1")){var t=this.publicData();this.$http.post("/driver/create",t).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$refs.table.emitRequestTableData(),e.drawerDisplay=!1,e.$message({message:t.message,type:"success"}))})}}else if("编辑司机"===this.drawerTitle&&this.submitForm("ruleForm")){var i=this.publicData();this.$http.post("/driver/update/"+this.driverId,i).then(function(t){t.code===e.$config.API_STATUS.OK&&(e.$refs.table.emitRequestTableData(),e.drawerDisplay=!1,e.$message({message:t.message,type:"success"}))})}},publicData:function(){var e=this;return this.fileList.forEach(function(t){t.length>0&&(e.form[t[0].type]||void 0!==e.form[t[0].type]&&(e.form[t[0].type]=t[0].url),e.form1[t[0].type]||void 0!==e.form1[t[0].type]&&(e.form1[t[0].type]=t[0].url),e.form2[t[0].type]||void 0!==e.form2[t[0].type]&&(e.form2[t[0].type]=t[0].url))}),r()({},this.form,this.form1,this.form2)},uploadSubmit:function(){return!!this.submitForm("upLoad")&&(this.$refs.upload.uploadFiles.length?null===this.upLoadData.companyId?(this.$message({type:"warning",message:"请选择所属车队/公司!"}),!1):void this.$refs.upload.submit():(this.$message({type:"warning",message:"请选择将要上传的文件！"}),!1))},batchExport:function(){var e=this;this.drawerWidth="500px",this.drawerTitle="批量导入",this.drawerDisplay=!0,this.$nextTick(function(){e.$refs.upLoad.resetFields()}),this.$http.get("/vehicle/motorcade/treeList").then(function(t){t.code===e.$config.API_STATUS.OK&&e.resetDataFn(t.data,!1)})},companyIdValue:function(e){e.length>0&&(this.upLoadData.companyId=e[e.length-1])},resetDataFn:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.resetData){var a=[];if(e.forEach(function(e){var i=t.initJSON(t.resetData,e);a.push(i)}),!0===i)return a;this.resetMenus=a}},initJSON:function(e,t){var i={};for(var a in e)if("children"===a&&t[e[a]]&&t[e[a]].length>0){var l=this.resetDataFn(t[e[a]],!0);i[a]=l}else"children"!==a&&(i[a]=t[e[a]]);return i},exportRecord:function(){var e=this;this.$confirm("确认导出记录?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1,beforeClose:function(t,i,a){e.fieldMap={},e.tableOptions.columns.forEach(function(t){e.$refs.table.columnCheckList.forEach(function(i){t.key===i&&"operate"!==t.key&&(e.fieldMap[i]=t.title)})});var l=e.$refs.table._data.searchParams,o=l.allowModel,r=l.motorcadeId,s=l.selectKey,n=l.inputKey;if("confirm"===t){var d={fieldMap:e.fieldMap,allowModel:o,motorcadeId:r};s&&(d[s]=n),e.$http.download("/driver/export?isToken=true",d).then(function(e){}),a()}else a()}}).catch(function(){})},onSuccess:function(e,t,i){"idFront"===e.data.type?this.$set(this.fileList,0,[{name:"身份证(正面)",url:e.data.url,type:e.data.type}]):"idBack"===e.data.type?this.$set(this.fileList,1,[{name:"反面身份证(反面)",url:e.data.url,type:e.data.type}]):"certPhoto"===e.data.type?this.$set(this.fileList,2,[{name:"证件照",url:e.data.url,type:e.data.type}]):"drivingFront"===e.data.type?this.$set(this.fileList,3,[{name:"驾驶证(正面)",url:e.data.url,type:e.data.type}]):"drivingBack"===e.data.type?this.$set(this.fileList,4,[{name:"驾驶证(反面)",url:e.data.url,type:e.data.type}]):"onlineFront"===e.data.type?this.$set(this.fileList,5,[{name:"资格证(正面)",url:e.data.url,type:e.data.type}]):"onlineBack"===e.data.type&&this.$set(this.fileList,6,[{name:"资格证(反面)",url:e.data.url,type:e.data.type}])},handleRemove:function(e,t){return this.$confirm("确定移除 "+e.name+" ? 此操作将永久删除该文件, 是否继续？")},onremove:function(e,t){this.$http.post("/file/delete",{url:e.url}).then(function(e){});var i={};i[e.type]="",this.$http.post("/driver/update/"+this.driverId,i).then(function(e){})},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 张照片")}}},c=(i("xk0K"),i("ZrdR")),m=Object(c.a)(d,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"page-wrap"},[i("table-view",{ref:"table",attrs:{stripe:"",center:"","id-key":"id","is-search":!0,data:e.tableOptions.data,total:e.tableOptions.total,columns:e.tableOptions.columns,"search-controls":e.tableOptions.searchControls,"footer-buttons":e.tableOptions.footerButtons,"button-controls":e.tableOptions.buttonControls,"pagination-layout":e.tableOptions.paginationLayout,loading:e.tableOptions.loading,checked:"","column-view":"","is-shadow":"",alias:e.alias},on:{requestTableData:e.getTableData,handleCallback:e.tableResponseFn}},[i("el-table-column",{attrs:{slot:"number",label:"序号",type:"index",align:"center"},slot:"number"})],1),e._v(" "),i("el-drawer",{attrs:{title:e.drawerTitle,visible:e.drawerDisplay,direction:e.direction,size:e.drawerWidth,"wrapper-closable":!1},on:{"update:visible":function(t){e.drawerDisplay=t}}},["批量导入"===e.drawerTitle?i("div",[i("el-form",{ref:"upLoad",staticStyle:{"margin-top":"10px"},attrs:{model:e.upLoadData,rules:e.upLoadRole,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"所属车队",prop:"companyId"}},[i("el-cascader",{staticStyle:{width:"356px"},attrs:{options:e.resetMenus,props:{checkStrictly:!0},clearable:"",filterable:""},on:{change:e.companyIdValue},model:{value:e.upLoadData.companyId,callback:function(t){e.$set(e.upLoadData,"companyId",t)},expression:"upLoadData.companyId"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"上传文件"}},[i("div",{staticClass:"uploadDialogClass"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.$config.API_CONFIG.API_ROOT+"/deviceinfo/upload",name:"file",data:e.upLoadData,"on-success":e.successUpload,"before-upload":e.beforeUpload,"auto-upload":!1,accept:".excel,.xlsx,.xls",multiple:"","file-list":e.fileLists,limit:1}},[i("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("点击选取文件")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只支持Excel文件，大小5M以内")])],1),e._v(" "),i("a",{staticClass:"upload-click-span",attrs:{href:"http://cipas2-oss.oss-cn-shenzhen.aliyuncs.com/upload/20191121/18ef538f9ff04e93b0dbaf847759722d.xls"},on:{click:function(e){e.stopPropagation()}}},[e._v("下载模板文件")])],1)])],1),e._v(" "),i("div",{staticClass:"footBtn",staticStyle:{width:"500px"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.uploadSubmit}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.drawerDisplay=!1}}},[e._v("取消")])],1)],1):i("div",[i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("基本信息")]),e._v(" "),e.item?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[e.item?i("div",[i("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form,rules:e.rules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"资格证号",prop:"certificateNum"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.certificateNum,callback:function(t){e.$set(e.form,"certificateNum",t)},expression:"form.certificateNum"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.certificateNum)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"姓名",prop:"username"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.username)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"性别",prop:"sex"}},["司机详情"!==e.drawerTitle?i("el-select",{staticStyle:{width:"176px"},model:{value:e.form.sex,callback:function(t){e.$set(e.form,"sex",t)},expression:"form.sex"}},e._l(e.sex,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v("  "+e._s(e.filterData(e.sex,e.form.sex))+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"手机",prop:"phone"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.phone)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"籍贯"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.hometown,callback:function(t){e.$set(e.form,"hometown",t)},expression:"form.hometown"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.hometown)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"身份证号",prop:"idCard"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.idCard,callback:function(t){e.$set(e.form,"idCard",t)},expression:"form.idCard"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.idCard)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"出生日期"}},["司机详情"!==e.drawerTitle?i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form.bornAt,callback:function(t){e.$set(e.form,"bornAt",t)},expression:"form.bornAt"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.bornAt)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"核发机关"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.issuer,callback:function(t){e.$set(e.form,"issuer",t)},expression:"form.issuer"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.issuer)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"现居住地"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form.living,callback:function(t){e.$set(e.form,"living",t)},expression:"form.living"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form.living)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"绑定车辆"}},[i("el-select",{staticStyle:{width:"176px"},attrs:{disabled:"司机详情"===e.drawerTitle,clearable:"",multiple:"",filterable:""},model:{value:e.form.vehicleIds,callback:function(t){e.$set(e.form,"vehicleIds",t)},expression:"form.vehicleIds"}},e._l(e.vehicleIds,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"身份证(正面)"}},[i("el-upload",{ref:"idFront",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/idFront","on-success":e.onSuccess,"on-remove":e.onremove,"before-remove":e.handleRemove,accept:".png,.jpg",disabled:"司机详情"===e.drawerTitle,"on-exceed":e.handleExceed,"file-list":e.fileList[0],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传正面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"身份证(反面)"}},[i("el-upload",{ref:"idBack",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/idBack","on-success":e.onSuccess,"on-remove":e.onremove,"before-remove":e.handleRemove,accept:".png,.jpg","on-exceed":e.handleExceed,disabled:"司机详情"===e.drawerTitle,"file-list":e.fileList[1],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传反面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"证件照"}},[i("el-upload",{ref:"certPhoto",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/certPhoto","on-success":e.onSuccess,"on-remove":e.onremove,"before-remove":e.handleRemove,accept:".png,.jpg",disabled:"司机详情"===e.drawerTitle,"on-exceed":e.handleExceed,"file-list":e.fileList[2],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传照片")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1)],1):e._e()])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("驾驶证信息")]),e._v(" "),e.item1?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item1")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item1")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[e.item1?i("div",[i("el-form",{ref:"ruleForm1",staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form1,rules:e.rules1,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"驾驶证号",prop:"driverLicenseNum"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form1.driverLicenseNum,callback:function(t){e.$set(e.form1,"driverLicenseNum",t)},expression:"form1.driverLicenseNum"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form1.driverLicenseNum)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"发证机关"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form1.drivingIssuer,callback:function(t){e.$set(e.form1,"drivingIssuer",t)},expression:"form1.drivingIssuer"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form1.drivingIssuer)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"准驾车型",prop:"allowModel"}},["司机详情"!==e.drawerTitle?i("el-select",{staticStyle:{width:"176px"},attrs:{clearable:"",filterable:""},model:{value:e.form1.allowModel,callback:function(t){e.$set(e.form1,"allowModel",t)},expression:"form1.allowModel"}},e._l(e.allowModel,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v("  "+e._s(e.filterData(e.allowModel,e.form1.allowModel))+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"初次领证日期"}},["司机详情"!==e.drawerTitle?i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form1.drivingIssueAt,callback:function(t){e.$set(e.form1,"drivingIssueAt",t)},expression:"form1.drivingIssueAt"}}):i("div",{staticStyle:{width:"176px"}},[e._v(" "+e._s(e.form1.drivingIssueAt)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"有效开始日期",prop:"drivingValidAt"}},["司机详情"!==e.drawerTitle?i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form1.drivingValidAt,callback:function(t){e.$set(e.form1,"drivingValidAt",t)},expression:"form1.drivingValidAt"}}):i("div",{staticStyle:{width:"176px"}},[e._v(" "+e._s(e.form1.drivingValidAt)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"有效到期日期"}},["司机详情"!==e.drawerTitle?i("el-date-picker",{staticStyle:{width:"176px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:e.endTime},model:{value:e.form1.drivingInvalidAt,callback:function(t){e.$set(e.form1,"drivingInvalidAt",t)},expression:"form1.drivingInvalidAt"}}):i("div",{staticStyle:{width:"176px"}},[e._v(" "+e._s(e.form1.drivingInvalidAt)+" ")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"700px"},attrs:{label:"提前提醒天数",prop:"drivingAdvanceNum"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form1.drivingAdvanceNum,callback:function(t){e.$set(e.form1,"drivingAdvanceNum",t)},expression:"form1.drivingAdvanceNum"}}):i("div",{staticStyle:{width:"176px"}},[e._v(" "+e._s(e.form1.drivingAdvanceNum)+" ")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"驾驶证(正面)"}},[i("el-upload",{ref:"drivingFront",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/drivingFront","on-success":e.onSuccess,"on-remove":e.onremove,disabled:"司机详情"===e.drawerTitle,"before-remove":e.handleRemove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[3],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传正面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"驾驶证(反面)"}},[i("el-upload",{ref:"drivingBack",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/drivingBack","on-success":e.onSuccess,"on-remove":e.onremove,disabled:"司机详情"===e.drawerTitle,"before-remove":e.handleRemove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[4],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传反面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1)],1):e._e()])],1),e._v(" "),i("div",{staticClass:"formItem"},[i("div",{staticClass:"formTitle"},[i("div",[e._v("网约车资格证信息")]),e._v(" "),e.item2?i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item2")}}},[e._v("收起")]):i("el-button",{attrs:{type:"text"},on:{click:function(t){e.itemShow("item2")}}},[e._v("展开")])],1),e._v(" "),i("el-collapse-transition",[e.item2?i("div",[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.form2,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"网约车驾驶证号"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form2.onlineLicenseNum,callback:function(t){e.$set(e.form2,"onlineLicenseNum",t)},expression:"form2.onlineLicenseNum"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form2.onlineLicenseNum)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"发证机关"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form2.onlineIssuer,callback:function(t){e.$set(e.form2,"onlineIssuer",t)},expression:"form2.onlineIssuer"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form2.onlineIssuer)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"有效开始日期"}},["司机详情"!==e.drawerTitle?i("el-date-picker",{staticStyle:{width:"176px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.form2.onlineValidAt,callback:function(t){e.$set(e.form2,"onlineValidAt",t)},expression:"form2.onlineValidAt"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form2.onlineValidAt)+" ")])],1),e._v(" "),i("el-form-item",{attrs:{label:"有效到期日期"}},["司机详情"!==e.drawerTitle?i("el-date-picker",{staticStyle:{width:"176px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:e.onlineEndTime},model:{value:e.form2.onlineInvalidAt,callback:function(t){e.$set(e.form2,"onlineInvalidAt",t)},expression:"form2.onlineInvalidAt"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form2.onlineInvalidAt)+" ")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"700px"},attrs:{label:"提前提醒天数"}},["司机详情"!==e.drawerTitle?i("el-input",{model:{value:e.form2.onlineAdvanceNum,callback:function(t){e.$set(e.form2,"onlineAdvanceNum",t)},expression:"form2.onlineAdvanceNum"}}):i("div",{staticStyle:{width:"176px","font-size":"14px",color:"1A1A1A"}},[e._v(" "+e._s(e.form2.onlineInvalidAt)+" ")])],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"驾驶证(正面)"}},[i("el-upload",{ref:"onlineFront",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/onlineFront","on-success":e.onSuccess,"on-remove":e.onremove,"before-remove":e.handleRemove,accept:".png,.jpg",disabled:"司机详情"===e.drawerTitle,"on-exceed":e.handleExceed,"file-list":e.fileList[5],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传正面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1),e._v(" "),i("el-form-item",{staticStyle:{width:"345px"},attrs:{label:"驾驶证(反面)"}},[i("el-upload",{ref:"onlineBack",staticClass:"upload-demo",attrs:{limit:1,headers:e.upData,action:e.api+"/file/upload/onlineBack","on-success":e.onSuccess,"on-remove":e.onremove,disabled:"司机详情"===e.drawerTitle,"before-remove":e.handleRemove,accept:".png,.jpg","on-exceed":e.handleExceed,"file-list":e.fileList[6],"list-type":"picture"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传反面")]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件")])],1)],1)],1)],1):e._e()])],1),e._v(" "),"司机详情"!==e.drawerTitle?i("div",{staticClass:"footBtn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确定")]),e._v(" "),i("el-button",{on:{click:function(t){e.drawerDisplay=!1}}},[e._v("取消")])],1):e._e()])])],1)},[],!1,null,"f4e6f74c",null);m.options.__file="driverAdminister.vue";t.default=m.exports},xk0K:function(e,t,i){"use strict";var a=i("y0wk");i.n(a).a},y0wk:function(e,t,i){}}]);